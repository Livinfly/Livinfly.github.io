<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='MIT6.5940 çš„å­¦ä¹ ç¬”è®°ï¼ŒQML éƒ¨åˆ†å’•å’•å’• TBD.'><title>ã€å­¦ä¹ ç¬”è®°ã€MIT6.5940-TinyML-and-Efficient-Deep-Learning-Computing | Livinfly's Blog</title><link rel=canonical href=https://livinfly.github.io/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/><link rel=stylesheet href=/scss/style.min.7b96b7b80dada1deccaa378dbac0dcc82da1c6e0722374b6ba5d8ad5b920363f.css><meta property='og:title' content="ã€å­¦ä¹ ç¬”è®°ã€MIT6.5940-TinyML-and-Efficient-Deep-Learning-Computing"><meta property='og:description' content="MIT6.5940 çš„å­¦ä¹ ç¬”è®°ï¼ŒQML éƒ¨åˆ†å’•å’•å’• TBD."><meta property='og:url' content='https://livinfly.github.io/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/'><meta property='og:site_name' content="Livinfly's Blog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='å­¦ä¹ ç¬”è®°'><meta property='article:tag' content='MLsys'><meta property='article:published_time' content='2025-06-14T10:17:32+00:00'><meta property='article:modified_time' content='2025-06-14T18:55:17+08:00'><meta property='og:image' content='https://livinfly.github.io/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/cover.jpg'><meta name=twitter:site content="@Mengmm_JhaiL"><meta name=twitter:creator content="@Mengmm_JhaiL"><meta name=twitter:title content="ã€å­¦ä¹ ç¬”è®°ã€MIT6.5940-TinyML-and-Efficient-Deep-Learning-Computing"><meta name=twitter:description content="MIT6.5940 çš„å­¦ä¹ ç¬”è®°ï¼ŒQML éƒ¨åˆ†å’•å’•å’• TBD."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://livinfly.github.io/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/cover.jpg'><link rel="shortcut icon" href=/favicon.png><link rel=apple-touch-icon href=/favicon.png><script async src="https://www.googletagmanager.com/gtag/js?id=G-LKX43Y8KEL"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LKX43Y8KEL")}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_6155a7461c712b4f.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¤£</span></figure><div class=site-meta><h1 class=site-name><a href=/>Livinfly's Blog</a></h1><h2 class=site-description>æƒ³è¦ç•™ä¸‹ç‚¹æ¸©æš–çš„åœ°æ–¹</h2></div></header><ol class=menu-social><li><a href=mailto:luojie3m@163.com target=_blank title=Email rel=me><svg class="icon icon-tabler icon-tabler-mail" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="3" y="5" width="18" height="14" rx="2"/><polyline points="3 7 12 13 21 7"/></svg></a></li><li><a href=https://github.com/Livinfly target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/Mengmm_JhaiL target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>å‹é“¾</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äº</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#lec01-å¼•å…¥>Lec01 å¼•å…¥</a></li><li><a href=#lec02-åŸºç¡€>Lec02 åŸºç¡€</a></li><li><a href=#lab0>Lab0</a></li><li><a href=#lec03---04-å‰ªæ>Lec03 - 04 å‰ªæ</a></li><li><a href=#lab1>Lab1</a></li><li><a href=#lec05-é‡åŒ–>Lec05 é‡åŒ–</a></li><li><a href=#lec06-é‡åŒ–æé«˜ç»“æœ>Lec06 é‡åŒ–æé«˜ç»“æœ</a><ol><li><a href=#post-training-quantization>Post-training Quantization</a></li><li><a href=#quantization-aware-training-qat>Quantization-Aware Training (QAT)</a></li><li><a href=#binaryternary-quantization>Binary/Ternary Quantization</a></li><li><a href=#mixed-precision-quantization>Mixed-Precision Quantization</a></li></ol></li><li><a href=#lab2>Lab2</a></li><li><a href=#lec07-nas-ç¥ç»ç½‘ç»œç»“æ„æœç´¢>Lec07 NAS ç¥ç»ç½‘ç»œç»“æ„æœç´¢</a></li><li><a href=#lec08-nas-æ›´é«˜æ•ˆ>Lec08 NAS æ›´é«˜æ•ˆ</a></li><li><a href=#lec09-çŸ¥è¯†è’¸é¦-kd>Lec09 çŸ¥è¯†è’¸é¦ KD</a><ol><li><a href=#åŒ¹é…å¯¹é½ä»€ä¹ˆ>åŒ¹é…/å¯¹é½ä»€ä¹ˆï¼Ÿ</a></li><li><a href=#online-distillation-åœ¨çº¿è’¸é¦>online distillation åœ¨çº¿è’¸é¦</a><ol><li><a href=#self-distillation>self-distillation</a></li><li><a href=#deep-mutual-learning-äº’å­¦ä¹ -dml>Deep Mutual Learning äº’å­¦ä¹  DML</a></li></ol></li></ol></li><li><a href=#lec10-mcunet-tinyml>Lec10 MCUnet TinyML</a><ol><li><a href=#ç“¶é¢ˆ>ç“¶é¢ˆ</a></li><li><a href=#tinynas>TinyNAS</a><ol><li><a href=#patch-based-inference-åˆ†å—>Patch-based Inference åˆ†å—</a></li><li><a href=#åº”ç”¨>åº”ç”¨</a></li></ol></li></ol></li><li><a href=#lec11-tinyengine>Lec11 TinyEngine</a><ol><li><a href=#loop-optimization-å¾ªç¯ä¼˜åŒ–>Loop optimization å¾ªç¯ä¼˜åŒ–</a><ol><li><a href=#loop-reordering-å¾ªç¯é‡æ’>Loop reordering å¾ªç¯é‡æ’</a></li><li><a href=#loop-tiling-å¾ªç¯åˆ†å—>Loop tiling å¾ªç¯åˆ†å—</a></li></ol></li><li><a href=#loop-unrolling-å¾ªç¯å±•å¼€>Loop unrolling å¾ªç¯å±•å¼€</a></li><li><a href=#simd-single-instruction-multiple-data-programming-å•æŒ‡ä»¤å¤šæ•°æ®>SIMD (single instruction, multiple data) programming å•æŒ‡ä»¤å¤šæ•°æ®</a><ol><li><a href=#isa-instruction-set-architecture-æŒ‡ä»¤é›†æ¶æ„>ISA (Instruction set architecture) æŒ‡ä»¤é›†æ¶æ„</a></li></ol></li><li><a href=#multithreading-å¤šçº¿ç¨‹>Multithreading å¤šçº¿ç¨‹</a><ol><li><a href=#openmp>OpenMP</a></li><li><a href=#cuda>CUDA</a></li></ol></li><li><a href=#inference-optimization>Inference Optimization</a><ol><li><a href=#image-to-column-im2col-convolution>Image to Column (Im2col) convolution</a></li><li><a href=#in-place-depth-wise-convolution>In-place depth-wise convolution</a></li><li><a href=#nhwc-for-point-wise-convolution-nchw-for-depth-wise-convolution>NHWC for point-wise convolution, NCHW for depth-wise convolution</a></li><li><a href=#winograd-convolution>Winograd convolution</a></li></ol></li></ol></li><li><a href=#lec12-transfomer--llm>Lec12 Transfomer & LLM</a><ol><li><a href=#transformer-åŸºç¡€>Transformer åŸºç¡€</a></li><li><a href=#transfomer-design-variants-å˜ä½“>Transfomer Design Variants å˜ä½“</a><ol><li><a href=#encoder-decoder-t5>Encoder-Decoder (T5)</a></li><li><a href=#encoder-only-bert-bidirectional-encoder-representations-from-transformers>Encoder-only (BERT, Bidirectional Encoder Representations from Transformers)</a></li><li><a href=#decoder-only-gpt-generative-pre-trained-transformer>Decoder-only (GPT, Generative Pre-trained Transformer)</a></li></ol></li><li><a href=#absoluterelative-positional-encoding>Absolute/Relative Positional Encoding</a></li><li><a href=#kv-cache-optimization>KV cache optimization</a><ol><li><a href=#multi-head-attention-mha>Multi-Head Attention (MHA)</a></li><li><a href=#multi-query-attention-mqa>Multi-Query Attention (MQA)</a></li><li><a href=#grouped-query-attention-gqa>Grouped-Query Attention (GQA)</a></li></ol></li><li><a href=#ffn--swiglu-gated-linear-units>FFN => SwiGLU (Gated Linear Units)</a></li><li><a href=#llm>LLM</a></li></ol></li><li><a href=#lec13-llm-deployment-techniques>Lec13 LLM Deployment Techniques</a><ol><li><a href=#quantization>Quantization</a><ol><li><a href=#weight-activation-quantization-smoothquant>Weight-Activation Quantization: SmoothQuant</a></li><li><a href=#weight-only-quantization-awq-and-tinychat>Weight-Only Quantization: AWQ and TinyChat</a></li><li><a href=#qserve-w4a8kv4>QServe (W4A8KV4)</a></li></ol></li><li><a href=#pruning--sparsity>Pruning & Sparsity</a><ol><li><a href=#weight-sparsity-wanda>Weight Sparsity: Wanda</a></li><li><a href=#contextual-sparsity>Contextual Sparsity</a></li><li><a href=#attention-sparsity>Attention Sparsity</a></li></ol></li><li><a href=#llm-serving-systems>LLM Serving Systems</a><ol><li><a href=#important-metrics-æŒ‡æ ‡-for-llm-serving>Important Metrics æŒ‡æ ‡ for LLM Serving</a></li><li><a href=#ä¼˜åŒ–ç›®æ ‡>ä¼˜åŒ–ç›®æ ‡</a></li><li><a href=#paged-attention-vllm>Paged Attention (vLLM)</a></li><li><a href=#flashattention>FlashAttention</a></li><li><a href=#speculative-decoding-æ¨æµ‹æ€§è§£ç >Speculative Decoding æ¨æµ‹æ€§è§£ç </a></li><li><a href=#batching>Batching</a></li></ol></li></ol></li><li><a href=#lec-14-llm-post-training>Lec 14 LLM Post-Training</a><ol><li><a href=#llm-fine-tuning-å¾®è°ƒ>LLM Fine-Tuning å¾®è°ƒ</a><ol><li><a href=#supervised-fine-tuning-sft-ç›‘ç£å¾®è°ƒ>Supervised Fine-Tuning (SFT) ç›‘ç£å¾®è°ƒ</a></li><li><a href=#reinforcement-learning-from-human-feedback-rlhf-åŸºäºäººç±»åé¦ˆçš„å¼ºåŒ–å­¦ä¹ >Reinforcement Learning from Human Feedback (RLHF) åŸºäºäººç±»åé¦ˆçš„å¼ºåŒ–å­¦ä¹ </a></li><li><a href=#parameter-efficient-fine-tuning-peft>Parameter Efficient Fine-Tuning (PEFT)</a></li></ol></li><li><a href=#multi-model-llms>Multi-model LLMs</a><ol><li><a href=#cross-attention-based-flamingo>Cross-Attention Based: Flamingo</a></li><li><a href=#visual-tokens-as-input-palm-e-vila>Visual Tokens as Input: PaLM-E, VILA</a></li><li><a href=#enabling-visual-outputs-vila-u>Enabling Visual Outputs: VILA-U</a></li></ol></li><li><a href=#prompt-engineering>Prompt Engineering</a><ol><li><a href=#in-context-learning-icl>In-Context Learning (ICL)</a></li><li><a href=#chain-of-thought-cot>Chain-of-Thought (CoT)</a></li><li><a href=#retrieval-augmented-generation-rag>ReTrieval Augmented Generation (RAG)</a></li></ol></li></ol></li><li><a href=#lec15-long-context-llm>Lec15 Long-Context LLM</a><ol><li><a href=#context-extension>Context Extension</a><ol><li><a href=#pope>PoPE</a></li><li><a href=#longlora>LongLoRA</a></li></ol></li><li><a href=#evaluation-of-long-context-llms-é•¿ä¸Šä¸‹æ–‡å¤§æ¨¡å‹çš„è¯„ä¼°æ ‡å‡†>Evaluation of Long-Context LLMs é•¿ä¸Šä¸‹æ–‡å¤§æ¨¡å‹çš„è¯„ä¼°æ ‡å‡†</a><ol><li><a href=#the-lost-in-the-middle-phenomenon-ä¸­é—´ä¸¢å¤±ç°è±¡>The Lost-in-the-Middle Phenomenon ä¸­é—´ä¸¢å¤±ç°è±¡</a></li><li><a href=#long-context-benchmarks-é•¿ä¸Šä¸‹æ–‡çš„åŸºå‡†æµ‹è¯•-niah-longbench>Long-Context Benchmarks é•¿ä¸Šä¸‹æ–‡çš„åŸºå‡†æµ‹è¯•: NIAH, LongBench</a></li></ol></li><li><a href=#efficient-attention-mechanismskv-cache-è¿‡å¤§çš„é—®é¢˜>Efficient Attention Mechanismsï¼ŒKV cache è¿‡å¤§çš„é—®é¢˜</a><ol><li><a href=#kv-cache>KV Cache</a></li><li><a href=#streamingllm-and-attention-sinks>StreamingLLM and Attention Sinks</a></li><li><a href=#duoattention-retrieval-heads-and-streaming-heads>DuoAttention: Retrieval Heads and Streaming Heads</a></li><li><a href=#quest-query-aware-sparsity>Quest: Query-Aware Sparsity</a></li></ol></li><li><a href=#beyond-transformers>Beyond Transformers</a><ol><li><a href=#state-space-models-ssms-mamba>State-Space Models (SSMs): Mamba</a></li><li><a href=#hybrid-models-jamba>Hybrid Models: Jamba</a></li></ol></li></ol></li><li><a href=#lec16-vit>Lec16 ViT</a><ol><li><a href=#basics-of-vision-transformer-vit>Basics of Vision Transformer (ViT)</a></li><li><a href=#efficient-vit--accerleration-techniques>Efficient ViT & accerleration techniques</a><ol><li><a href=#windows-attention>Windows attention</a></li><li><a href=#linear-attention>Linear attention</a></li><li><a href=#sparse-attention>Sparse attention</a></li></ol></li><li><a href=#self-supervised-learning-for-vit>Self-supervised learning for ViT</a><ol><li><a href=#contrastive-learning>Contrastive learning</a></li><li><a href=#masked-image-modeling>Masked image modeling</a></li></ol></li><li><a href=#vit--autoregressive-image-generation>ViT & Autoregressive Image Generation</a><ol><li><a href=#hybrid-autoregressive-transformer-hart>Hybrid Autoregressive Transformer (HART)</a></li></ol></li></ol></li><li><a href=#lec17-gan-video-point-cloud>Lec17 GAN, Video, Point Cloud</a><ol><li><a href=#efficient-gan>Efficient GAN</a><ol><li><a href=#gan-compression>GAN Compression</a></li><li><a href=#anycost-gan>AnyCost GAN</a></li><li><a href=#differentiable-augmentation-for-data-efficient-gans>Differentiable Augmentation for Data-Efficient GANs</a></li></ol></li><li><a href=#efficient-video-understanding>Efficient Video Understanding</a><ol><li><a href=#2d-cnn>2D CNN</a></li><li><a href=#3d-cnn>3D CNN</a></li><li><a href=#tsm-temporal-shift-module>TSM (Temporal Shift module)</a></li></ol></li><li><a href=#efficient-point-cloud-understanding>Efficient Point Cloud Understanding</a><ol><li><a href=#pvcnn--spvcnn>PVCNN / SPVCNN</a></li><li><a href=#bevfusion-birds-eye-view>BEVFusion (Bird&rsquo;s-Eye View)</a></li></ol></li></ol></li><li><a href=#lec18-diffusion-model>Lec18 Diffusion Model</a><ol><li><a href=#basics-of-diffusion-model>Basics of diffusion model</a><ol><li><a href=#denoising-diffusion-models>Denoising diffusion models</a></li><li><a href=#conditional-diffusion-models>Conditional diffusion models</a></li><li><a href=#latent-diffusion-models>Latent diffusion models</a></li><li><a href=#image-editing>Image editing</a></li><li><a href=#model-personalization>Model personalization</a></li></ol></li><li><a href=#fast-sampling-techniques>Fast sampling techniques</a><ol><li><a href=#denoising-diffusion-implicit-models>Denoising diffusion implicit models</a></li><li><a href=#distillation>Distillation</a></li></ol></li><li><a href=#acceleration-techniques>Acceleration techniques</a><ol><li><a href=#sparsity>Sparsity</a></li><li><a href=#quantization-1>Quantization</a></li><li><a href=#parallelism>Parallelism</a></li></ol></li></ol></li><li><a href=#lec19-distributed-training-1>Lec19 Distributed Training 1</a><ol><li><a href=#background-and-motivation>Background and motivation</a></li><li><a href=#parallelization-methods-for-distributed-trainging>Parallelization methods for distributed trainging</a></li><li><a href=#communication-primitives>Communication primitives</a></li><li><a href=#data-parallelism>Data Parallelism</a><ol><li><a href=#parameter-server>Parameter Server</a></li><li><a href=#å»ä¸­å¿ƒåŒ–çš„æ–¹æ³•>å»ä¸­å¿ƒåŒ–çš„æ–¹æ³•</a></li></ol></li><li><a href=#reducing-memory-in-data-parallelism-zero-123-and-fsdp>Reducing memory in data parallelism: Zero-1/2/3 and FSDP</a></li><li><a href=#pipeline-parallelism>Pipeline parallelism</a></li><li><a href=#tensor-parallelism>Tensor parallelism</a></li><li><a href=#sequence-parallelism>Sequence parallelism</a><ol><li><a href=#deepspeed-ulysses-solution-1-re-partition-data-in-attention-layers>DeepSpeed Ulysses (Solution 1: Re-partition data in Attention layers)</a></li><li><a href=#ring-attentionsolution-2-ring-attention>Ring Attention(Solution 2: Ring Attention)</a></li></ol></li></ol></li><li><a href=#lec20-distributed-training-2>Lec20 Distributed Training 2</a><ol><li><a href=#hybrid-mixed-parallelism-and-how-to-auto-parallelize>Hybrid (mixed) parallelism and how to auto-parallelize</a><ol><li><a href=#2d-parallelism>2D Parallelism</a></li><li><a href=#3d-parallelism>3D Parallelism</a></li><li><a href=#how-to-auto-parallelize>How to Auto Parallelize</a></li><li><a href=#alpa-a-unified-compiler-for-distributed-training>Alpa: A Unified Compiler for Distributed Training</a></li></ol></li><li><a href=#understand-the-bandwidth-and-latency-bottleneck-of-distributed-training>Understand the bandwidth and latency bottleneck of distributed training</a></li><li><a href=#gradient-compression-overcome-the-bandwidth-bottleneck>Gradient compression: overcome the bandwidth bottleneck</a><ol><li><a href=#gradient-prunning>Gradient Prunning</a></li><li><a href=#gradient-quantization>Gradient Quantization</a></li></ol></li><li><a href=#delayed-gradient-update-overcome-the-latency-bottleneck>Delayed gradient update: overcome the latency bottleneck</a><ol><li><a href=#bandwidth-vs-latency>Bandwidth vs. Latency</a></li></ol></li></ol></li><li><a href=#lec21-on-device-training-and-transfer-learning>Lec21 On-Device Training and Transfer Learning</a><ol><li><a href=#deep-leakage-fram-gradients-gradient-is-not-safe-to-share>Deep leakage fram gradients, gradient is not safe to share</a></li><li><a href=#memory-bottleneck-of-on-device-training>Memory bottleneck of on-device training</a></li><li><a href=#tiny-tansfer-learning-tinytl>Tiny tansfer learning (TinyTL)</a></li><li><a href=#sparse-back-propagation-sparsebp>Sparse back-propagation (SparseBP)</a></li><li><a href=#quantized-training-with-quantization-aware-scaling-qas>Quantized training with quantization aware scaling (QAS)</a></li><li><a href=#pockengine-system-support-for-sparse-back-propagation>PockEngine: system support for sparse back-propagation</a></li></ol></li><li><a href=#lec22-quantum-machine-learning-1>Lec22 Quantum Machine Learning 1</a><ol><li><a href=#single-qubit-state-and-gates>Single qubit state and gates</a><ol><li><a href=#single-qubit-state>Single qubit state</a></li><li><a href=#single-qubit-gates>Single Qubit Gates</a></li></ol></li><li><a href=#multiple-qubit-state-and-gates>Multiple-qubit state and gates</a><ol><li><a href=#multiple-qubit-state>Multiple-qubit state</a></li><li><a href=#multiple-qubit-gates>Multiple-qubit gates</a></li></ol></li><li><a href=#quantum-circuit>quantum circuit</a></li><li><a href=#the-nisq-era-and-compilation-problems>the NISQ era and compilation problems</a></li><li><a href=#the-example-workflow-and-compiler-on-neutral-atom-quantum-computer>the example workflow and compiler on neutral atom quantum computer</a></li></ol></li><li><a href=#lec23-quantum-machine-learning-2>Lec23 Quantum Machine Learning 2</a><ol><li><a href=#parameterized-quantum-circuit-pqc>Parameterized Quantum Circuit (PQC)</a></li><li><a href=#pqc-training>PQC Training</a></li><li><a href=#quantum-classifiers>Quantum Classifiers</a></li><li><a href=#noise-aware-on-chip-training-qoc-of-pqc>Noise Aware On-Chip Training (QOC) of PQC</a></li><li><a href=#torchquantum-library-for-qml>TorchQuantum Library for QML</a></li><li><a href=#robust-quantum-architecture-search>Robust Quantum Architecture Search</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/cover_hu_5a05ef640c1c6410.jpg srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/cover_hu_5a05ef640c1c6410.jpg 800w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/cover_hu_6516e40f043bd59b.jpg 1600w" width=800 height=450 loading=lazy alt="Featured image of post ã€å­¦ä¹ ç¬”è®°ã€MIT6.5940-TinyML-and-Efficient-Deep-Learning-Computing"></a></div><div class=article-details><header class=article-category><a href=/categories/note/>ç¬”è®°</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/>ã€å­¦ä¹ ç¬”è®°ã€MIT6.5940-TinyML-and-Efficient-Deep-Learning-Computing</a></h2><h3 class=article-subtitle>MIT6.5940 çš„å­¦ä¹ ç¬”è®°ï¼ŒQML éƒ¨åˆ†å’•å’•å’• TBD.</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2025-06-14T10:17:32Z>2025 å¹´ 6 æœˆ 14 æ—¥</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 31 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><blockquote><p>å°é¢æ¥æºï¼š<a class=link href=https://x.com/giname93076/ target=_blank rel=noopener>X(Twitter)@giname93076</a>
<sup><svg aria-hidden="true" focusable="false" viewBox="0 0 100 100" width="12" height="12" class="icon outbound"><path fill="currentColor" d="M18.8 85.1h56c2.2.0 4-1.8 4-4v-32h-8v28h-48v-48h28v-8h-32c-2.2.0-4 1.8-4 4v56C14.8 83.3 16.6 85.1 18.8 85.1z"/><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"/></svg></sup></p></blockquote><h2 id=lec01-å¼•å…¥>Lec01 å¼•å…¥</h2><h2 id=lec02-åŸºç¡€>Lec02 åŸºç¡€</h2><ul><li><p>Fully-Connected Layer (Linear Layer)</p><p>The output neuron is connected to all input neurons.</p></li><li><p>Convolution Layer</p><p>The output neuron is connected to input neurons in the receptive field.</p><p>1D conv, 2D conv, è¿˜è¦åœ¨åŠ ä¸Š channel çš„ç»´åº¦</p><ol><li>feature map ç‰¹å¾å›¾çš„å¤§å°å˜åŒ–ï¼ˆå…¬å¼ï¼‰</li><li>Padding å¡«å……ï¼Œzero padding, others (reflection, replication, constant &mldr;)</li><li>receptive field æ„Ÿå—é‡ï¼ˆå…¬å¼ï¼‰</li><li>stridedï¼Œåœ¨ä¸å¢åŠ æ·±åº¦çš„æƒ…å†µä¸‹å¢å¤§æ„Ÿå—é‡</li><li>grouped conv, å‡å°‘è®¡ç®—é‡ï¼Œåˆå§‹ç‰ˆæœ¬ï¼Œæ‰€æœ‰çš„ channel_i å’Œ channel_o éƒ½æ˜¯ç›¸è¿çš„ï¼Œå‚æ•°é‡ä¼šå‡å°‘åˆ°åŸæ¥çš„ g å€ï¼ˆç»„æ•°å€ï¼‰</li><li>depthsise conv, åˆ†ç»„å·ç§¯çš„æé™æƒ…å†µï¼Œ</li><li>pooling layerï¼Œå¾—åˆ°å°çš„ç‰¹å¾å›¾ï¼Œå¯¹é«˜åˆ†è¾¨ç‡çš„å›¾ï¼Œmax, average</li></ol></li><li><p>Normalization Layer</p><ol><li>BN, CNN, HW B</li><li>LN, atention, HW c</li><li>IN, HW</li><li>GN, HW g</li></ol></li><li><p>Activation Function</p><ol><li>sigmoid, æ˜“äºé‡åŒ–quantizeï¼Œæ¢¯åº¦æ¶ˆå¤±</li><li>ReLU, è¾“å…¥ä¸ºæ­£ä¸ä¼šæ¢¯åº¦æ¶ˆå¤±ï¼Œä¸ºè´Ÿæ­»äº†ï¼Œæ˜“äºå®ç°ç¨€ç–æ€§sparsifyï¼Œä¸æ˜“é‡åŒ–</li><li>ReLU6ï¼Œæœ€å¤§ä¸º6çš„ReLUï¼Œç›¸å¯¹æ˜“äºé‡åŒ–</li><li>Leaky ReLUï¼Œä¸ºè´Ÿï¼Œå¤±å»ç¨€ç–æ€§</li><li>Swishï¼Œx / (1 + e&-x)ï¼Œç¡¬ä»¶å®ç°å›°éš¾</li><li>Hard Swish<ul><li>0, &lt;= -3</li><li>x, >= 3</li><li>x * (x + 3) / 6</li></ul></li></ol></li></ul><h2 id=lab0>Lab0</h2><p>ç†Ÿæ‚‰pytorchç”¨æ³•</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>lr_lambda</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>step</span><span class=p>:</span> <span class=n>np</span><span class=o>.</span><span class=n>interp</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=n>step</span> <span class=o>/</span> <span class=n>steps_per_epoch</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=n>num_epochs</span> <span class=o>*</span> <span class=mf>0.3</span><span class=p>,</span> <span class=n>num_epochs</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>steps</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=n>steps_per_epoch</span> <span class=o>*</span> <span class=n>num_epochs</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>steps</span><span class=p>,</span> <span class=p>[</span><span class=n>lr_lambda</span><span class=p>(</span><span class=n>step</span><span class=p>)</span> <span class=o>*</span> <span class=mf>0.4</span> <span class=k>for</span> <span class=n>step</span> <span class=ow>in</span> <span class=n>steps</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>scheduler</span> <span class=o>=</span> <span class=n>LambdaLR</span><span class=p>(</span><span class=n>optimizer</span><span class=p>,</span> <span class=n>lr_lambda</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=lec03---04-å‰ªæ>Lec03 - 04 å‰ªæ</h2><ul><li><p>Pruning at different granularities</p><ol><li><p>fine-grained / unstructured, ç»†ç²’åº¦å‰ªæï¼Œçµæ´»ï¼Œå‰ªææ¯”ç‡é«˜ï¼Œä¸å¥½å¹¶è¡ŒåŒ–</p></li><li><p>coarse-grained / structured,</p><p>1. pattern-basedï¼Œæä¾›å‡ ç§æ¨¡å¼ï¼Œæ¨¡å¼æ—‹è½¬ç­‰æ–¹å¼ï¼Œè§„å¾‹æ€§</p><p>N2Mï¼ŒN:M sparsityï¼Œä¸å¦‚ 2:4ï¼ŒMä¸ªä¸ºä¸€ç»„ï¼Œè‡³å°‘æœ‰Nä¸ªè¢«ç½®é›¶ã€‚</p><p>éœ€è¦ç”¨ä¸¤ä½æ¥è¡¨ç¤ºéé›¶ï¼Œä¸ºäº†ç¨€ç–ï¼Œéœ€è¦èŠ±è´¹é¢å¤–çš„å†…å­˜æ¥å­˜å‚¨ç´¢å¼•</p><p>2. vector-level è¡Œ</p><p>3. Kernel-level ä¸€å—</p><p>4. channel-levelï¼Œæ‹¿æ‰ä¸€æ•´ä¸ªé€šé“ï¼ŒåŠ é€Ÿç®€å•ï¼Œå‰ªæç‡ä½ã€‚</p><p>è®¾è®¡ä¸åŒå±‚çš„ç¨€ç–åº¦ï¼Œuniform shrink å‡åŒ€å‹ç¼©ï¼›xxx</p><p>å¦‚ä½•å¾—åˆ°æœ€ä½³ç¨€ç–åº¦åˆ†é…ï¼ŸAMC</p></li></ol></li><li><p>Pruning Criteria å‰ªææ ‡å‡†</p><p>é€‰æœ€ä¸é‡è¦çš„ï¼Œheuristic å¯å‘å¼</p><ol><li>magnitude-based pruningï¼ŒåŸºäºæƒé‡å¤§å°ï¼Œç»å¯¹å€¼æœ€å°çš„</li><li>scaling-based pruningï¼Œç»™æ¯ä¸€ä¸ªæ»¤æ³¢å™¨ä¸€ä¸ªç¼©æ”¾å‚æ•°ï¼Œæˆ–è€…æ˜¯channelï¼Œå­¦nä¸ªå‚æ•°å°±è¡Œï¼Œç„¶åå†å»é™¤é è¿‘é›¶çš„filterï¼Œå› ä¸ºBatch Normalization ä¸­æœ‰ç¼©æ”¾å› å­scaling factorï¼Œå¯ä»¥ç”¨æ¥å¤ç”¨</li><li>second-order-based pruningï¼Œæ³°å‹’å±•å¼€ - æµ·æ£®çŸ©é˜µ - è¿‘ä¼¼</li><li>neurons to pruneï¼Œå®é™…æ˜¯å»æ‰ä¸€è¡Œï¼Œä¸€å—æ ¸</li><li>percentage-of-zero-based pruningï¼Œç”¨ReLUçš„æ—¶å€™ï¼Œä¼šå‡ºç°é›¶ï¼Œç„¶åçœ‹æ¿€æ´»å€¼çš„é›¶çš„å æ¯”ï¼Œå»æ‰å æ¯”æœ€é«˜çš„ï¼Œéœ€è¦è¿è¡Œï¼Œå¾—åˆ°activation tensor</li><li>regression-based pruningï¼Œ</li></ol></li><li><p>Finding pruning ratios</p><p>å¤§éƒ¨åˆ†éƒ½æ˜¯å‡è®¾å±‚ä¸å±‚ä¹‹é—´æ˜¯ç‹¬ç«‹çš„</p><ol><li>analyze the sensitivity of each layerï¼Œå¯¹æ¯ä¸€å±‚è¿›è¡Œä¸åŒç¨‹åº¦çš„å‰ªæï¼Œçœ‹å‡†ç¡®ç‡ä¸‹é™æƒ…å†µï¼Œè®¾å®šé™ä½5%~10%ï¼Œç”»çº¿å¯¹åº”è¿‡å»ï¼Œå¾—åˆ°æ¨ªåæ ‡å°±æ˜¯å‰ªæç‡</li><li>automatic pruningï¼Œè‡ªåŠ¨å‰ªæ<ol><li>AMC: AutoML for Model Compressionï¼ŒRL</li><li>NetAdapt, rule-based iterative/progressive methodï¼Œè®¾å®šå‡å°çš„å»¶è¿Ÿlatencyï¼Œæ¯ä¸€å±‚çœ‹éœ€è¦å‰ªæå¤šå°‘æ‰èƒ½è¾¾æˆï¼Œåé¢è¿›è¡Œshort-term fine-tuneï¼Œåœ¨èƒ½å¤Ÿå¾—åˆ°ä¸€æ ·çš„ç»“æœâ”€â”€å‡å°è®¾å®šçš„å»¶è¿Ÿçš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©fine-tuneåå‡†ç¡®ç‡æœ€é«˜çš„å‰ªæï¼Œä¸æ–­è¿­ä»£ï¼Œæœ€åæ•´ä½“è¿›è¡Œ long-term fune-tune</li></ol></li></ol></li><li><p>Fine-tuning pruned neural networks</p><p>ç»éªŒå€¼ï¼ŒæŠŠå­¦ä¹ ç‡é™ä½10~100å€</p><ol><li>iterative pruningï¼Œè¿­ä»£å‰ªæï¼Œè¾¹å‰ªæè¾¹å¾®è°ƒï¼Œä¸ºäº†70%ï¼Œç»è¿‡ 30% - 50% - 70%</li></ol></li><li><p>System & Hardware Support for Sparsity</p><ol><li><p>EiEï¼Œæƒé‡ç¨€ç– + æ¿€æ´»å€¼ç¨€ç–ï¼Ÿ</p><p>å¯¹ç¨€ç–æ¨¡å‹çš„ç¡¬ä»¶åŠ é€Ÿå™¨è®¾è®¡</p></li><li><p>Tensor Core, M:N Weight Sparsityï¼Œç›¸å¯¹è§„åˆ™ï¼Œéœ€è¦ç”¨2bitç´¢å¼•ï¼Œä¹˜æ³•ï¼Œç”¨maskæ©ç </p></li><li><p>TorchSparsity & PointAccï¼Œæ¿€æ´»å€¼ç¨€ç–ï¼Œç‚¹äº‘ï¼Œç¨€ç–å·ç§¯ï¼Œä¸æ‰©æ•£ï¼Œä¿æŒå’Œè¾“å…¥çš„ç¨€ç–æ¨¡å¼ä¸€è‡´</p><p>è‡ªé€‚åº”åˆ†ç»„ï¼ŒMM & BMM</p><p>ç¨€ç–å·ç§¯ç¡¬ä»¶åŠ é€Ÿï¼Œå½’å¹¶æ’åºæ‰¾é‡å éƒ¨åˆ†</p></li></ol></li></ul><h2 id=lab1>Lab1</h2><p>å®ç° VGG åœ¨ Cifar-10 æ¨¡å‹çš„fine-grained pruningç»†é¢—ç²’å‰ªæä¸channel pruningé€šé“å‰ªæã€‚</p><p>åŒæ—¶åº”ç”¨äº†ï¼Œsensitiveæ•æ„Ÿæ€§æ’åºï¼Œå‚æ•°é‡æ’åºç­‰å®é™…ä¼˜åŒ–å‰ªæçš„æ–¹æ³•</p><h2 id=lec05-é‡åŒ–>Lec05 é‡åŒ–</h2><ul><li><p>data type æ•°æ®ç±»å‹ï¼Œæ€ä¹ˆæ ·è¡¨ç¤ºçš„</p><ol><li><p>IEEE FP32 1ç¬¦å· + 8æŒ‡æ•° + 23å°¾æ•°ï¼Œsingle precision</p></li><li><p>IEEE FP16 1ç¬¦å· + 5æŒ‡æ•° + 10å°¾æ•°ï¼Œhalf precision</p></li><li><p>Google BF16 ï¼Œ1ç¬¦å· + 8æŒ‡æ•° + 7å°¾æ•°ï¼ŒBrain Floatï¼Œæœ‰æ—¶ FP32 -> FP16 è®­ç»ƒä¸ç¨³å®šï¼Œå¯ä»¥æ¢æˆ BF 16</p></li><li><p>Nvidia FP8 (E4M3)ï¼Œ1ç¬¦å· + 4æŒ‡æ•° + 3å°¾æ•°ï¼Œhopper</p></li><li><p>Nvidia FP8 (E5M2)ï¼Œ1ç¬¦å· + 5æŒ‡æ•° + 2å°¾æ•°</p><p>æŒ‡æ•°ï¼ˆæ•°å€¼èŒƒå›´ã€åŠ¨æ€è·¨åº¦å¤§å°ï¼‰ï¼Œå°¾æ•°ï¼ˆç²¾åº¦ï¼‰</p></li><li><p>Nvidia INF4ï¼Œ1ç¬¦å· + 3å°¾æ•°ï¼ŒBlackWell</p><p>FP4 (E1M2), (E2M1), (E3M0)</p><p>E1M2 å’Œ INT8ä¸€è‡´ï¼Œä½†æ˜¯æµªè´¹åº”è¯¥ +- 0</p></li></ol></li><li><p>Quantization é‡åŒ–</p><p>æŠŠè¾“å…¥ä»è¿ç»­é›†åˆè½¬æ¢æˆç¦»æ•£æ•°å€¼é›†åˆçš„è¿‡ç¨‹ï¼Œä¹‹é—´çš„å·®å¼‚ï¼Œç§°ä¸ºé‡åŒ–è¯¯å·®ï¼Œç›®æ ‡æ˜¯æœ€å°åŒ–å·®å¼‚</p><ol><li><p>å­˜å‚¨ã€è®¡ç®—ï¼šæµ®ç‚¹æ•°ï¼Œæµ®ç‚¹æ•°</p></li><li><p>K-Means-based Quantizationï¼Œcode book</p><ul><li><p>æ¦‚å¿µ</p><p>å­˜å‚¨ã€è®¡ç®—ï¼šæ•´æ•°ï¼Œæµ®ç‚¹æ•°</p><p>èŠ‚çœç©ºé—´ï¼›è®¡ç®—é‡ä¸å˜</p><p>å­˜å‚¨çš„æ˜¯ä»£ç æœ¬ï¼ˆk-meansçš„è´¨å¿ƒï¼‰å’Œåˆ†ç±»çš„ä¸‹æ ‡</p><p>N-bit quantization é‡åŒ–ï¼Œ#parameters = M &#187; 2^N</p><p>32 bit x M = 32 M bit; N bit x M = NM bit + 32bit x 2^N = NM + 2^(N+5) bit</p><p>where 2^(N+5) bit can be ignored</p></li><li><p>é‡åŒ–åå¾®è°ƒ fine-tune</p><p>å¾—åˆ°æ¢¯åº¦çŸ©é˜µï¼ŒæŠŠåŸæœ¬æƒé‡çš„åˆ†ç»„ï¼Œç”¨åœ¨æ¢¯åº¦çŸ©é˜µä¸Šï¼Œæ±‚å’Œï¼Œåœ¨æƒé‡çš„code bookä¸Šå»å¯¹åº”é¢œè‰²çš„å‡æ‰ ï¼ˆä¹˜å­¦ä¹ ç‡ï¼‰</p><p>è¿™ä¸ªå›¾æœ‰ç‚¹ç¥å¥‡çš„ï¼Œä¸¤ä¸ªç»“åˆï¼Œä½†æ˜¯å¾—åˆ°äº†æ›´å¥½çš„ç»“æœï¼š</p><img src=note.assets/image-20250406022031670.png alt=image-20250406022031670 style=zoom:50%><p>å…ˆ å‰ªæ å é‡åŒ–ï¼Œé™ä½é‡åŒ–å·¥ä½œé‡ï¼Œé™ä½é‡åŒ–è¯¯å·®</p><p>ä½ç²¾åº¦è®¡ç®—å•å…ƒ</p><p>ç»éªŒå€¼ï¼ŒConvï¼Œåœ¨4bitsåï¼Œæ‰ä¸‹é™æ˜æ˜¾ï¼›FCï¼Œåœ¨2bitsåæ‰ä¸‹é™æ˜æ˜¾ï¼›æ‰€ä»¥4bitsä¿æŒä¸é”™</p></li><li><p>å…¶ä»–çš„ç¼–ç æ–¹å¼</p><p>Huffman Coding å“ˆå¤«æ›¼ç¼–ç </p><p>ä¸åŒçš„æƒé‡å‡ºç°çš„é¢‘ç‡ä¸åŒï¼Œå˜é•¿ç¼–ç ç­–ç•¥</p><p>å‡ºç°å¤šçš„ï¼Œç”¨çŸ­ç¼–ç </p><ul><li><p>three-stage pipeline Deep compression</p><p>æ·±åº¦å‹ç¼©ä¸‰é˜¶æ®µæµæ°´çº¿</p><ol><li>å‰ªæï¼Œå‡å°‘æƒé‡æ•°é‡</li><li>é‡åŒ–ï¼Œç”¨k-meansèšç±»ç®—æ³•ï¼Œæƒé‡åˆ†ç»„</li><li>ç¼–ç ï¼Œhuffman codingï¼Œå‡ºç°é¢‘ç‡</li></ol></li></ul></li></ul><ol start=3><li><p>Linear Quantization</p><ul><li><p>æ¦‚å¿µ</p><p>å­˜å‚¨ã€è®¡ç®—ï¼šæ•´æ•°ï¼Œæ•´æ•°</p><p>èŠ‚çœç©ºé—´ï¼›å‡å°‘è®¡ç®—é‡</p><p>åŸå§‹å‚æ•°æƒé‡ =></p><p>ï¼ˆé‡åŒ–åçš„å‚æ•°æƒé‡ - zero point (int) ï¼‰* scale(float)</p><p>r(fp) = (q(int) - z(int)) * s(fp)</p><p>q_min max æ˜¯ç¡®å®šçš„ï¼Œ</p><p>s = (r_max - r_min) / (q_max - q_min)</p><p>z = round(q_min - r_min / S)</p></li><li><p>çŸ©é˜µä¹˜æ³•è¿ç®—</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406024808127.png width=1956 height=960 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406024808127_hu_3f799dbfe6d15a6.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406024808127_hu_92e6d94c59de2d5e.png 1024w" loading=lazy alt=image-20250406024808127 class=gallery-image data-flex-grow=203 data-flex-basis=489px></p><p>ä¸ºäº†é˜²æ­¢æº¢å‡ºï¼Œè®¡ç®—æ˜¯éœ€è¦ç±»å‹è½¬æ¢</p><p>æ‹¬å·å†…åä¸¤é¡¹æ˜¯å¸¸æ•°ï¼ˆè¾“å…¥çš„é›¶ç‚¹ï¼Œæƒé‡çš„é‡åŒ–å€¼ï¼‰ï¼ŒåŒ…æ‹¬æ‹¬å·å¤–ä¸€é¡¹æ˜¯å¸¸æ•°ï¼Œå¯ä»¥æå‰ç®—</p><p>é›¶ç‚¹ä¸å˜ï¼Œé‡åŒ–æƒé‡ä¸å˜</p><p>ç»éªŒå€¼ï¼Œç¼©æ”¾å› å­åœ¨ (0, 1)ï¼Œæƒé‡wçš„åˆ†å¸ƒï¼Œéµå¾ªæ­£æ€åˆ†å¸ƒï¼ŒZ_w = 0ï¼Œä¸ºä»€ä¹ˆï¼ˆï¼Ÿï¼‰</p><p>å½“ Z = 0ï¼ŒS = r_min / (q_min - Z) = - |r|_max / 2^(N-1)</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406025931073.png width=1956 height=959 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406025931073_hu_8321b7dd25241c56.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406025931073_hu_a57f1014fd1999db.png 1024w" loading=lazy alt=image-20250406025931073 class=gallery-image data-flex-grow=203 data-flex-basis=489px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406032859998.png width=2148 height=883 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406032859998_hu_c06488ecb2056d75.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406032859998_hu_43a5e04f2e165625.png 1024w" loading=lazy alt=image-20250406032859998 class=gallery-image data-flex-grow=243 data-flex-basis=583px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406032936357.png width=1767 height=1006 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406032936357_hu_a63f5c0dc3bcf1f1.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406032936357_hu_5146e2601fb6b8a8.png 1024w" loading=lazy alt=image-20250406032936357 class=gallery-image data-flex-grow=175 data-flex-basis=421px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406033029856.png width=1594 height=952 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406033029856_hu_dc435b33aedec7a9.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406033029856_hu_f977d1683c0a763c.png 1024w" loading=lazy alt=image-20250406033029856 class=gallery-image data-flex-grow=167 data-flex-basis=401px></p></li></ul></li></ol></li></ol></li></ul><h2 id=lec06-é‡åŒ–æé«˜ç»“æœ>Lec06 é‡åŒ–æé«˜ç»“æœ</h2><ul><li><p>Post-Training Quantization (PTQ)</p><p>quantization granularity</p></li><li><p>Quantization-Aware Training (QAT)</p></li><li><p>æ›´ä½çš„é‡åŒ–ä½æ•°</p><ol><li>binary quantization</li><li>ternary quantization</li></ol></li><li><p>automatic mixed-precision quantization æ··åˆç²¾åº¦é‡åŒ–</p><p>æ¯ä¸€å±‚ä¸ä¸€å®šè¦ä¸€æ ·çš„ç²¾åº¦</p></li></ul><h3 id=post-training-quantization>Post-training Quantization</h3><ul><li><p>Quantization Granularity</p><ol><li><p>Per-Tensor Quantization</p><p>å¯¹æ•´ä¸ªå¼ é‡ç”¨ä¸€ä¸ªç¼©æ”¾å› å­</p><p>å¤§æ¨¡å‹ä¸Šæ•ˆæœå¥½ï¼Œå°æ¨¡å‹ç²¾åº¦ä¸‹é™</p><p>åŸå› ï¼šä¸åŒçš„channelçš„æƒé‡èŒƒå›´ä¸ä¸€æ ·</p></li><li><p>Per-Channel Quantization</p><p>æ›´ç²¾ç»†ï¼Œè¯¯å·®æ›´å°ï¼Œå­˜å‚¨æ›´å¤šçš„å€¼</p></li><li><p>Group Quantizationï¼Œåœ¨4bitåŠä»¥ä¸‹ï¼Œå¾ˆé‡è¦</p><ul><li><p>VS-Quant: Per-Vector Quantization</p><p>å…¨å±€æµ®ç‚¹ç¼©æ”¾å› å­ï¼Œå±€éƒ¨æ•´æ•°ç¼©æ”¾å› å­</p><p>Multi-level scaling scheme å¤šçº§ç¼©æ”¾</p></li><li><p>Shared Micro-exponent(MX) data type</p><p>L0 å’Œ datatype æ˜¯å…±äº«çš„</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406103525669.png width=2169 height=429 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406103525669_hu_7c885041ecad1b1a.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406103525669_hu_19a72b08ee6b4e26.png 1024w" loading=lazy alt=image-20250406103525669 class=gallery-image data-flex-grow=505 data-flex-basis=1213px></p></li></ul></li></ol></li><li><p>Dynamic Range Clipping åŠ¨æ€èŒƒå›´è£å‰ª</p><p>æ”¶é›†æ¿€æ´»å€¼çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œåœ¨éƒ¨ç½²æ¨¡å‹ä¹‹å‰</p><ol><li><p>During Training åœ¨è®­ç»ƒçš„åŒæ—¶</p><p>Exponential Moving Averages (EMA)</p><p>ç»´æŠ¤ r_min, r_maxï¼Œr(t) = alpha * r(t) + (1-alpha) * r(t-1)ï¼Œå¹³æ»‘ç»´æŠ¤åŠ¨æ€èŒƒå›´</p><p>ï¼ˆå¿…é¡»å‚ä¸åœ¨è®­ç»ƒï¼‰</p></li><li><p>calibration batch è®­ç»ƒå</p><p>ä¸è¿‡å¯ä»¥ä½¿ç”¨å¤šè®­ç»ƒä¸€ä¸ªbatchï¼Œç”¨calibrationæ ¡å‡†æ•°æ®é›†ï¼Œä¼°ç®—åŠ¨æ€èŒƒå›´</p></li></ol><p>å¯èƒ½ä¸å¸Œæœ›ç”¨çœŸæ­£çš„æœ€å¤§å€¼</p><ol><li><p>æœ€å°åŒ– MSE å‡æ–¹è¯¯å·®</p><p>å‡è®¾æ˜¯é«˜æ–¯åˆ†å¸ƒæˆ–è€…æ‹‰æ™®æ‹‰æ–¯åˆ†å¸ƒï¼Œæœ€ä¸¤ç«¯çš„åœ°æ–¹æ•°é‡å…¶å®å°‘ï¼Œæœ‰å¯¹åº”å°é—­è§£</p><p>ä½†å®é™…ç¬¦åˆè¿™æ ·åˆ†å¸ƒçš„è¾“å…¥æ•°æ®å¾ˆå°‘</p></li><li><p>æœ€å°åŒ–æŸå¤±çš„ä¿¡æ¯</p><p>ä½¿ç”¨ KL divergenceæ•£åº¦æ¥æ ¡å‡†é‡åŒ–èŒƒå›´</p></li></ol></li><li><p>Rounding èˆå…¥</p><p>æƒé‡ä¹‹é—´æ˜¯ç›¸å…³çš„ï¼Œèˆå…¥åˆ°æœ€è¿‘çš„å€¼ä¸ä¸€å®šæ˜¯æœ€å¥½çš„</p><ol><li><p>Round-to-Nearest</p></li><li><p>AdaRound</p><p>å¼•å…¥å¯å­¦ä¹ çš„ delta ç„¶åå†å››èˆäº”å…¥</p></li></ol></li></ul><h3 id=quantization-aware-training-qat>Quantization-Aware Training (QAT)</h3><p>é‡åŒ–æ„ŸçŸ¥è®­ç»ƒï¼Œfine-tuning æ¢å¤ç²¾åº¦</p><p>K-means-based é‡åŒ–ï¼Œfine-tuningï¼Œæ›´æ–°è´¨å¿ƒå³å¯</p><ul><li><p>çº¿æ€§é‡åŒ–ï¼Ÿ</p><p>Simulated quantization æ¨¡æ‹Ÿé‡åŒ–ï¼Œfake quantization ä¼ªé‡åŒ–</p><p>åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œç»´æŠ¤ä¸€ä¸ªå…¨ç²¾åº¦çš„å‚æ•°æƒé‡ï¼Œèƒ½ç´¯è®¡éå¸¸å°çš„æ¢¯åº¦</p><p>å†åŠ ä¸Šå¯¹æ¿€æ´»å€¼çš„é‡åŒ–çš„è¿‡ç¨‹</p><p>å¢åŠ è¿™ä¸¤ä¸ªé‡åŒ–èŠ‚ç‚¹ Q(W), Q(Y)</p><p>è®­ç»ƒå¥½åï¼Œå…¨ç²¾åº¦å‚æ•°æƒé‡å°±è¢«æŠ›å¼ƒ</p><p>é‡åŒ–æ¿€æ´»ï¼Œé˜¶è·ƒçš„ï¼Œæ¢¯åº¦æ˜¯0</p></li><li><p>Straight-Through Estimator (STE)</p><p>æŠŠweight-quantization nodeçœ‹æˆæ’å®šå‡½æ•° Y = Xï¼Œä¼ é€’æ¢¯åº¦</p></li></ul><h3 id=binaryternary-quantization>Binary/Ternary Quantization</h3><ul><li><p>æ¦‚å¿µ</p><p>Binary Weight Networks (BWN)</p><p>å‚¨å­˜ï¼Œè®¡ç®—ï¼šBinary/Ternaryï¼ŒBit Operations</p><ol><li><p>deterministic binarization ç¡®å®šæ€§äºŒå€¼åŒ–</p></li><li><p>stochastic binarization éšæœºæ€§äºŒå€¼åŒ–</p><p>éœ€è¦éšæœºæ•°ç”Ÿæˆç¡¬ä»¶</p></li></ol><p>ç²¾åº¦ä¸‹é™å¤§ï¼Œé‡åŒ–è¯¯å·®å¤§ï¼Œå†æ¬¡å¼•å…¥ç¼©æ”¾å› å­ï¼Œ1/n * |W|_1</p><p>å•Šï¼Ÿé‡åŒ–è¯¯å·®å˜åŒ–ä¸å¤§ï¼Œç²¾åº¦èƒ½æå‡ï¼Œä»-21.2% èƒ½åˆ° 0.2%ï¼Ÿ</p><p>æ¿€æ´»å€¼çš„äºŒå€¼åŒ–ï¼Ÿ</p><p>XNOR åŒæˆ–ï¼Œç”¨ä»–æ¥ä»£æ›¿ä¹˜æ³•</p><p>é»˜è®¤å€¼ï¼Œ0 æ˜¯ -1ï¼Œ1 æ˜¯ +2ï¼Œèµ·å› ä¹Ÿæ˜¯æœ‰ XNOR ç¡¬ä»¶è®¡ç®—å¿«</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406133544987.png width=2412 height=1092 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406133544987_hu_a213636e07f04119.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406133544987_hu_8212bc1126c7b102.png 1024w" loading=lazy alt=image-20250406133544987 class=gallery-image data-flex-grow=220 data-flex-basis=530px></p><p>y = -n + popcount(W_i xnor x) &#171; 1</p></li><li><p>Ternary Weight Networks (TWN)</p><p>å’Œ delta æ¯”è¾ƒï¼Œå¾—åˆ° +1 -1 0ï¼Œç»éªŒå€¼ï¼Œ0.7 * E(W)</p><p>åŒæ ·ç¼©æ”¾ç³»æ•°</p><p>Trained Ternary Quantization (TTQ)</p><p>å¯ä»¥å†å¼•å…¥ï¼Œæ­£ç¼©æ”¾ç³»æ•° Wp ä¸è´Ÿç¼©æ”¾ç³»æ•° Wn</p></li><li><p>é™ä½ç²¾åº¦çš„æ—¶å€™ï¼Œå†…å­˜æ˜¯çº¿æ€§ä¸‹é™ï¼Œè®¡ç®—é‡ï¼Œæ¨¡å‹è¡¨è¾¾èƒ½åŠ›ï¼ŒäºŒæ¬¡ä¸‹é™</p></li></ul><h3 id=mixed-precision-quantization>Mixed-Precision Quantization</h3><p>æ··åˆç²¾åº¦é‡åŒ–</p><p>è®¾è®¡çš„ç©ºé—´å¾ˆå¤§</p><p>Hardward-aware automated quantization with mixed precision (HAQ)</p><h2 id=lab2>Lab2</h2><p>K-means Quantization</p><p>QATï¼Œç®€åŒ–ï¼Œk-meansç›´æ¥ç”¨æƒé‡å†æ›´æ–°</p><p>è®­ç»ƒ/å¾®è°ƒçš„æ—¶å€™æ˜¯ä¼ªé‡åŒ–ï¼Œéƒ¨ç½²æ—¶æ‰æ˜¯çœŸé‡åŒ–</p><p>Linear Quantization</p><h2 id=lec07-nas-ç¥ç»ç½‘ç»œç»“æ„æœç´¢>Lec07 NAS ç¥ç»ç½‘ç»œç»“æ„æœç´¢</h2><p>Neural Architecture Search (NAS)</p><p>ä¸åŒäºå‰é¢çš„è®­ç»ƒã€æ¨ç†çš„ä¼˜åŒ–ï¼Œè¿™æ˜¯æ¨¡å‹ç»“æ„çš„ä¼˜åŒ–</p><ol><li><p>ResNetï¼Œ1x1 å·ç§¯ï¼Œbottleneck block</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406221950762.png width=2010 height=858 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406221950762_hu_3847943bb3f661ac.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406221950762_hu_660c8b7a3a0bc52b.png 1024w" loading=lazy alt=image-20250406221950762 class=gallery-image data-flex-grow=234 data-flex-basis=562px></p></li><li><p>ResNeXtï¼Œ1x1 åˆ†å‡ºæ¥channelï¼Œåˆ†ç»„å·ç§¯</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406222006296.png width=2421 height=668 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406222006296_hu_31198f564f4a78ac.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406222006296_hu_36679652dab8a1d7.png 1024w" loading=lazy alt=image-20250406222006296 class=gallery-image data-flex-grow=362 data-flex-basis=869px></p></li><li><p>MobileNet: depthwise-separable block</p><p>ç©ºé—´ä¿¡æ¯depthwiseå’Œé€šé“ä¿¡æ¯pointwiseï¼Œåˆ†å¼€åŒºåˆ†</p><p>depthwise conv è¡¨è¾¾èƒ½åŠ›å¼±</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406222411507.png width=989 height=656 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406222411507_hu_98c0b63e8df9b085.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406222411507_hu_301b97eb076864e0.png 1024w" loading=lazy alt=image-20250406222411507 class=gallery-image data-flex-grow=150 data-flex-basis=361px></p></li><li><p>MobileNetV2: inverted bottleneck block</p><p>å’Œbottleneckç›¸åï¼Œä¸­é—´å¢å¤§</p><p>æ¿€æ´»å€¼çš„ç‰¹æ€§ä¸å¥½</p><p>å¯ä»¥ç”¨æ¥å‡å°æ¨¡å‹å¤§å°å’Œè®¡ç®—é‡ï¼Œä½†æ¿€æ´»å†…å­˜ä¸èƒ½ï¼ˆè®­ç»ƒå¸¸å¸¸æ˜¯æ¿€æ´»å†…å­˜ä¸ºç“¶é¢ˆï¼‰</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406222421463.png width=937 height=587 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406222421463_hu_bf8bfed1cdd6bd13.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250406222421463_hu_225b887efaaf1782.png 1024w" loading=lazy alt=image-20250406222421463 class=gallery-image data-flex-grow=159 data-flex-basis=383px></p></li><li><p>ShuffleNet</p><p>æ··æ´—shuffleï¼Œä¿ƒè¿›ä¸åŒé€šé“çš„ä¿¡æ¯çš„æµåŠ¨</p></li><li><p>Transformer</p><p>Multi-Head Self-Attention (MHSA)</p><p>æ„Ÿå—é‡ä¸€å±‚å°±å¯ä»¥å…¨äº†</p></li></ol><ul><li><p>Search Space</p><ol><li><p>Cell-level search space</p><p>é‡å¤ä½¿ç”¨ä¸¤ç§ã€</p><p>reduction cell å½’çº¦å•å…ƒï¼Œé™ä½åˆ†è¾¨ç‡</p><p>normal cell æ™®é€šå•å…ƒ</p></li><li><p>Network-level search space</p><ol><li>TinyMLï¼Œå†…å­˜æ›´å…³é”®ï¼Œåœ¨åŒæ ·çš„å†…å­˜é™åˆ¶ä¸‹æœ‰æ›´é«˜FLOPsæ›´å¥½</li></ol></li></ol></li><li><p>æœç´¢ç­–ç•¥</p><ol><li><p>Grid search ç½‘æ ¼æœç´¢</p><p>éœ€è¦è®­ç»ƒï¼Œæ ¹æ®å„ä¸ªæŒ‡æ ‡å‰”é™¤</p><p>compound scaling å¤åˆç¼©æ”¾</p></li><li><p>Random search</p><p>åŒæ ·çš„æœç´¢ç©ºé—´ï¼Œä½†æ˜¯éšæœºå˜åŒ–ï¼Œå¿«é€Ÿè¯„ä¼°</p></li><li><p>Reinforcement learning</p><p>å†³ç­–åºåˆ—</p></li><li><p>Gradient descent</p><p>æŒ‡æ ‡è€ƒè™‘ï¼Œè®¡ç®—é€‰æ‹©æ¦‚ç‡</p></li><li><p>Evoluitionary search è¿›åŒ–ç®—æ³•</p><p>å˜å¼‚ã€äº¤å‰ç­‰</p></li></ol></li><li><p>Performance Estimation Strategy</p><ol><li><p>Train from scratch</p><p>æˆæœ¬é«˜</p></li><li><p>Inherit weight</p><p>ä»é¢„è®­ç»ƒçš„åŸºç¡€ä¸Šï¼Œç»§æ‰¿æƒé‡ï¼Œæ‹†åˆ†ç‚¹ï¼Œä¿æŒæ•°å­¦ç­‰ä»·ï¼Œæ”¹å˜æ·±åº¦ã€å®½åº¦</p><p>é™ä½æˆæœ¬ net-to-net</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250407120550665.png width=2291 height=975 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250407120550665_hu_865a82921487f21c.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250407120550665_hu_188897bdda597596.png 1024w" loading=lazy alt=image-20250407120550665 class=gallery-image data-flex-grow=234 data-flex-basis=563px></p></li><li><p>Hypernetwork</p><p>ç”¨ç½‘ç»œæ¥é¢„æµ‹ç½‘ç»œå‚æ•°ï¼Œå±‚ä½œä¸ºnode embedding</p><p>init embedding => final embedding ç”Ÿæˆæƒé‡</p><p>ç”¨æ¥é™ä½è®­ç»ƒæˆæœ¬</p></li></ol></li></ul><h2 id=lec08-nas-æ›´é«˜æ•ˆ>Lec08 NAS æ›´é«˜æ•ˆ</h2><p>å®šåˆ¶æ¨¡å‹</p><p>å‰é¢çš„ NAS å¤ªè´µï¼Œé€‰æ‹©proxy taskä»£ç†ä»»åŠ¡ï¼Œå¦‚æ›´å°çš„æ•°æ®é›†ï¼Œæ›´å°‘çš„è®­ç»ƒè½®æ•°ï¼ŒFLOPsï¼Œå‚æ•°é‡ç­‰</p><p>ä½†æ˜¯proxy taskçš„ç›¸å…³æ€§å¯èƒ½ä¹Ÿæ²¡è¿™ä¹ˆå¥½ã€‚</p><ol><li><p>ProxylessNAS</p><p>è·¯å¾„çº§äºŒå€¼åŒ–ï¼ŒæŒ‡èµ°æ¦‚ç‡æœ€é«˜çš„è·¯å¾„</p><p>è®­ç»ƒæŒ‰æ¦‚ç‡ï¼Œæ¨ç†é€‰æ¦‚ç‡æœ€é«˜</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412000504067.png width=2271 height=1085 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412000504067_hu_80806bdc0fad10a.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412000504067_hu_56a41b41cff6d39d.png 1024w" loading=lazy alt=image-20250412000504067 class=gallery-image data-flex-grow=209 data-flex-basis=502px></p><ul><li><p>MACs ä¸ç­‰äºçœŸå®ç¡¬ä»¶æ•ˆç‡</p><p>éœ€è¦ç”¨çœŸå®ç¡¬ä»¶ï¼Œæ•ˆç‡ä½ï¼Ÿå¹¶è¡Œï¼å¤ªè´µï¼Ÿç”¨å»¶è¿Ÿé¢„æµ‹æ¨¡å‹ã€æ¶æ„ï¼Œå»¶è¿Ÿã€ï¼Œæœ€ç®€å•çš„æ¨¡å‹æ˜¯æŸ¥è¯¢è¡¨ï¼Œç®—å­å’Œå»¶è¿Ÿï¼ˆä¸€å±‚ä¸€å±‚çš„æµ‹å»¶è¿Ÿï¼Œç›¸åŠ ï¼‰</p><p>GPUä¼šæœ‰ kernel fusionï¼Œä¸¤ä¸ªkernel å¯èƒ½ä¼šå˜æˆä¸€ä¸ªkernel è€Œå˜å¿«</p><p>è®¡ç®—å¯†é›†å‹çš„ä¸¤ä¸ªï¼Œé€šç•…ä¸èƒ½kernel fusionï¼Œå¦‚ä¸¤ä¸ªçŸ©é˜µä¹˜æ³•</p><p>ä½†çŸ©é˜µä¹˜æ³• + éçº¿æ€§æ¿€æ´»å‡½æ•°æ˜¯å¯ä»¥çš„ï¼Œè®¡ç®—å¯†é›†å‹ + å†…å­˜å¯†é›†å‹</p><p>GPUä¼šåœ¨æ›´æµ…ã€æ›´å®½çš„è¡¨ç°å¥½ï¼ŒCPUåœ¨æ›´æ·±ã€æ›´ç»†çš„è¡¨ç°å¥½ï¼ˆå¯¹è‡ªå·±è®¾å¤‡æ¥è¯´ï¼‰</p></li><li><p>æ¯ä¸ªè®¾å¤‡éƒ½è¦é‡æ–°è®­ç»ƒä¸€ä¸ªå¤ªè´µï¼ŒOnce-For-All approach</p><p>åŒæ—¶è®­ç»ƒå¤šä¸ªæ¨¡å‹ï¼Ÿ</p><p>ç”¨ä¸€ä¸ªå•ä¸€æ¨¡å‹ï¼ŒåŒ…å«è®¸å¤šå­ç½‘ç»œï¼Œç¨€ç–æ¿€æ´»</p><p>ç›¸æ¯”ä¹‹å‰çš„é‡æ–°è®­ç»ƒï¼Œç°åœ¨åªéœ€è¦åœ¨å°å‹ç½‘ç»œä¸­æŠ½å–ä¸åŒçš„subnetworkå­ç½‘ç»œå°±è¡Œäº†</p><p>è®¾å¤‡ä¸åŒï¼Œç”µé‡ä¸åŒï¼ˆé€‚åº”ä¸åŒèƒ½è€—ï¼‰ç­‰</p><ul><li><p>å…±äº«å‚æ•°ï¼Œä¸åŒå­ç½‘ç»œä¹‹é—´ç›¸äº’å¹²æ‰°ï¼Ÿelastic å¼¹æ€§çš„</p><ol><li>å·ç§¯æ ¸å¤§å°ï¼Œä¸é‡‡ç”¨å•ç‹¬ä¸åŒçš„å·ç§¯æ ¸å¤§å°ï¼Œè€Œæ˜¯é€‰æ‹©ç”¨å˜æ¢çŸ©é˜µå¤„ç†ï¼Œåªç”¨ä¸€ä¸ª 7x7 çš„å‚æ•°å°±å¥½ï¼Œå°çš„å‚æ•°éƒ½åœ¨7x7çš„å†…éƒ¨</li><li>æ·±åº¦ï¼Œshrink the depth å½’çº¦æ·±åº¦</li><li>é€šé“ï¼Œé€šè¿‡ä¸åŒchannelçš„magnitudeå¹…å€¼ï¼Œå¯¹é‡è¦æ€§è¿›è¡Œæ’åºï¼Œé€‰æ‹©å‰ i ä¸ªé€šé“</li></ol><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412003747820.png width=2265 height=1223 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412003747820_hu_d3d109dc2a9fa7da.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412003747820_hu_bfd68f8dba67072b.png 1024w" loading=lazy alt=image-20250412003747820 class=gallery-image data-flex-grow=185 data-flex-basis=444px></p></li><li><p>Roofline Analysis å±‹é¡¶çº¿åˆ†æ</p><p>æŠ˜çº¿å›¾ï¼ŒX-è·å¾—ä¸€ä¸ªå­—èŠ‚çš„æ“ä½œæ•°ï¼ŒY-GFLOPS æµ®ç‚¹ç®—åŠ›</p><p>computation is cheap; memory is expensive.</p><p>å†…å­˜ç“¶é¢ˆï¼Œè®¡ç®—ç“¶é¢ˆã€‚</p></li></ul></li></ul></li><li><p>Zero-shot NAS</p><p>åŸæœ¬éœ€è¦éœ€è¦è®­ç»ƒæ‰çŸ¥é“è¯„ä¼°accå‡†ç¡®ç‡ï¼Œå˜æˆåªè¦çœ‹å®ƒçš„ç»“æ„ï¼Œæ¨æµ‹æ˜¯å¦èƒ½æ‹¿åˆ°é«˜çš„å‡†ç¡®ç‡</p><p>ZenNAS, GradSignï¼ˆæ„Ÿè§‰å¾ˆç›´è§‰åœ°å¼€å§‹å¥—å¨ƒï¼‰</p><ol><li><p>ZenNAS å¯å‘å¼</p><p>random weights éšæœºæƒé‡ï¼Œç²—ç•¥ä¼°è®¡ï¼Œç»“æœä¸é”™</p><ol><li><p>éšæœºåˆå§‹åŒ–è¾“å…¥ï¼Œç¬¦åˆæ­£æ€åˆ†å¸ƒ</p></li><li><p>åŠ å…¥å°çš„æ‰°åŠ¨</p></li><li><p>å†æŠŠæ‰€æœ‰çš„æƒé‡ï¼Œæ˜ å°„åˆ°æ­£æ€åˆ†å¸ƒ</p></li><li><p>è®ºæ–‡æŒ‡å‡ºï¼Œz = log(f(x&rsquo;) - f(x))ï¼Œå¦‚æœæ¨¡å‹æ•ˆæœå¥½ï¼Œåº”è¯¥å¯¹æ¨¡å‹è¾“å…¥æ„Ÿåˆ°æ•æ„Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªè¾“å‡ºçš„å·®å€¼åº”è¯¥å¤§</p></li><li><p>+ batch normalization variance æ‰¹å½’ä¸€åŒ–ï¼ˆå¦ä¸€ç§å¯å‘å¼ï¼‰</p><p>å¯¹äºä¸åŒçš„æ‰¹æ¬¡ï¼Œæ–¹å·®å¤§å¥½</p><p>è®¡ç®—æ¯å±‚çš„æ–¹å·®å‡å€¼ï¼ŒåŠ èµ·æ¥ï¼Œå¸Œæœ›è¿™ä¸ªæ–¹å·®è¶Šå¤§è¶Šå¥½</p><p>è¿™æ ·ï¼Œä¸åŒçš„è¾“å‡ºï¼Œå®¹æ˜“å¾—åˆ°ä¸åŒçš„ç»“æœ</p></li></ol></li><li><p>GradSign</p><p>å¥½çš„æ¨¡å‹ä¼šéå¸¸å¯†é›†çš„sample-wiseæ ·æœ¬çº§å±€éƒ¨æœ€å°å€¼ï¼Œä¸¤ä¸ªå±€éƒ¨æœ€å°å€¼åº”è¯¥éå¸¸æ¥è¿‘</p><p>åœ¨å›¾ä¸­ï¼Œç»¿è‰²æ˜¯æ¢¯åº¦ç¬¦å·ç›¸åŒçš„éƒ¨åˆ†ï¼Œå¥½çš„æ¨¡å‹ç»¿è‰²éƒ¨åˆ†åº”è¯¥æ›´å¤§ï¼Œçº¢è‰²éƒ¨åˆ†å°</p><p>åœ¨åˆå§‹ç‚¹é™„è¿‘ï¼Œéšæœºé€‰æ‹©äº›ç‚¹ï¼Œè®¡æ•°æ¢¯åº¦ç¬¦å·ç›¸åŒçš„æ•°é‡ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412010255963.png width=2558 height=1075 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412010255963_hu_a00edb8bda7c411f.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412010255963_hu_9ad5294ac72016f6.png 1024w" loading=lazy alt=image-20250412010255963 class=gallery-image data-flex-grow=237 data-flex-basis=571px></p></li></ol></li></ol><ul><li><p>Neural-hardware achitecture co-searchï¼Œè®¾è®¡ç¡¬ä»¶</p><p>ä¸ä»…æœç´¢ç¥ç»ç½‘ç»œæ¶æ„ï¼Œä¹Ÿæœç´¢åŠ é€Ÿå™¨æ¶æ„</p><p>ç¡¬ä»¶ç»“æ„ä¸Šä¼šæœ‰äº›ã€Œéæ•°å€¼å‚æ•°ã€éœ€è¦è®¾è®¡ï¼Œå¦‚è¿æ¥æ€§</p><ol><li><p>temporal mapping æ—¶é—´æ˜ å°„</p><p>é¡ºåºå¤„ç†</p></li><li><p>spatial parallelism ç©ºé—´æ˜ å°„</p><p>ç©ºé—´å¹¶è¡Œå¤„ç†</p></li></ol><p>ä¸¤ç§ embeddingï¼Œé€‰æ‹©å¹¶è¡Œç»´åº¦ä¸é¡ºåºç»´åº¦ï¼Œåˆ†åˆ«æŒ‰ç…§é‡è¦æ€§æ’åº</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412031738639.png width=2032 height=1183 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412031738639_hu_61e7b9a6cdb26569.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412031738639_hu_1a1d55c3aba128ac.png 1024w" loading=lazy alt=image-20250412031738639 class=gallery-image data-flex-grow=171 data-flex-basis=412px></p></li><li><p>åº”ç”¨</p><ol><li><p>Once-for-ALL for Transformer and NLP</p><ul><li>HAT</li></ul></li><li><p>3Då»ºæ¨¡</p></li><li><p>GAN</p><p>å°æ¨¡å‹é¢„è§ˆç»“æœï¼Œå¤§æ¨¡å‹è¾“å‡ºç»“æœ</p></li><li><p>Pose estimation</p></li><li><p>Quantum AI é‡å­</p><p>æœç´¢æœ€ä½³ç”µè·¯é—¨</p></li></ol></li></ul><h2 id=lec09-çŸ¥è¯†è’¸é¦-kd>Lec09 çŸ¥è¯†è’¸é¦ KD</h2><p>Temperature æ¸©åº¦ï¼Œé«˜çš„æ¸©åº¦ï¼Œä¸åŒçš„åŒºåˆ«è¶Šå°ï¼Œsmoothï¼ŒTåœ¨softmaxçš„x => x / T</p><h3 id=åŒ¹é…å¯¹é½ä»€ä¹ˆ>åŒ¹é…/å¯¹é½ä»€ä¹ˆï¼Ÿ</h3><ol><li><p>å¯¹é½ä¸­é—´æƒé‡ matching intermediate weights</p><p>éš¾ç‚¹ï¼Œç»´åº¦ä¸ä¸€æ ·ä½ç§©è¿‘ä¼¼/å…¨è¿æ¥/</p></li><li><p>ä¸­é—´ç‰¹å¾ intermediate future / activation matching</p><p>æ¿€æ´»å€¼ï¼Œä¸­é—´çš„ç»“æœï¼Œä¹Ÿæ˜¯ç›¸ä¼¼çš„</p></li><li><p>æ¢¯åº¦ Gradients</p><p>è®¡ç®—æƒé‡æ¢¯åº¦æˆ–è®¡ç®—æ¿€æ´»å€¼æ¢¯åº¦åŒ¹é…</p><p>è¡¨ç°å¥½çš„æ¨¡å‹çš„æ³¨æ„åŠ›å›¾æ˜¯ç›¸ä¼¼çš„</p></li><li><p>ç¨€ç–æ¨¡å¼ sparsity patterns</p><p>æ¥æºäºæ¿€æ´»å‡½æ•° ReLU ä¾‹å¦‚ã€‚</p></li><li><p>Relational information</p><ul><li>ä¸åŒçš„å±‚ä¹‹é—´ C_in x C_out</li><li>ä¸åŒæ ·æœ¬ä¹‹é—´ï¼ŒåŒä¸€ä¸ªæ¨¡å‹ï¼Œä¸åŒæ ·æœ¬è¾“å…¥çš„ä¸åŒè¾“å‡ºä¹‹é—´çš„å…³ç³»</li></ul></li></ol><h3 id=online-distillation-åœ¨çº¿è’¸é¦>online distillation åœ¨çº¿è’¸é¦</h3><h4 id=self-distillation>self-distillation</h4><p>æ•™å¸ˆæ¨¡å‹å’Œå­¦ç”Ÿæ¨¡å‹æ¶æ„ä¸€è‡´</p><p>æ•™å¸ˆæ¨¡å‹æ­£å¸¸è®­ç»ƒï¼Œå­¦ç”Ÿæ¨¡å‹ç”¨æ•™å¸ˆæ¨¡å‹çš„äº¤å‰ç†µæ¦‚ç‡æ¥è®­ã€‚</p><p>ç”¨å‰ä¸€æ­¥çš„ä½œä¸ºæ•™å¸ˆæ¨¡å‹ï¼Œåä¸€ä¸ªä»¥å‰ä¸€ä¸ªä¸ºç»“æœï¼Œ</p><p>æœ€åæŠŠæ‰€æœ‰æ¨¡å‹ensembleï¼Œå¾—ä¸€ä¸ªæ›´å¥½çš„ç»“æœ</p><h4 id=deep-mutual-learning-äº’å­¦ä¹ -dml>Deep Mutual Learning äº’å­¦ä¹  DML</h4><p>ä¸¤ä¸ªä¸ä¸€å®šç›¸åŒçš„æ¨¡å‹æ¶æ„ï¼Œäº’ä¸ºå¸ˆç”Ÿï¼ŒN1è®­ç»ƒæ—¶ï¼ŒN2æŒ‡å¯¼ï¼Œåä¹‹äº¦ç„¶ã€‚</p><p>çœŸå®æ ‡ç­¾çš„äº¤å‰ç†µè¯¯å·® + KLæ•£åº¦ ä¸¤è€…ç»“æœ</p><p>ä¸éœ€è¦é¢„å…ˆè®­ç»ƒï¼Œæ•™å¸ˆæ¨¡å‹ä¸ä¸€å®šè¦æ¯”å­¦ç”Ÿæ¨¡å‹å¤§ã€‚</p><h5 id=combined-å‰é¢ä¸¤ç§æ–¹æ³•ç»“åˆ-be-your-own-teacher-deep-supervision--distillation>Combined å‰é¢ä¸¤ç§æ–¹æ³•ç»“åˆ Be Your Own Teacher: deep supervision + distillation</h5><p>ç”¨æ·±å±‚ç½‘ç»œè¾“å‡ºï¼Œä½œä¸ºæµ…å±‚ç½‘ç»œçš„æ•™å¸ˆï¼Œæ¥è‡ªç»Ÿä¸€æ¨¡å‹çš„ä¸åŒéƒ¨åˆ†ã€‚</p><p>è’¸é¦æŸå¤±ï¼Œåœ¨å¯¹çœŸå®æ ‡ç­¾çš„ç»“æœä¸Šï¼Œæ•™å¸ˆæ¨¡å‹æ¯”å­¦ç”Ÿæ¨¡å‹çš„æ•ˆæœå¥½æ—¶æ‰èƒ½ä½œä¸ºæ•™å¸ˆ</p><p>ç‰©ä½“è¯†åˆ«ï¼Œä¹Ÿå¯ä»¥çœ‹æˆï¼ˆåŒºåŸŸï¼‰åˆ†ç±»</p><h5 id=å¢å¼ºå°æ¨¡å‹çš„æ•ˆæœ>å¢å¼ºå°æ¨¡å‹çš„æ•ˆæœ</h5><p>å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œåšæ•°æ®å¢å¼º cut out, mixup, dropout</p><p>å®¹æ˜“æ¬ æ‹Ÿåˆï¼Œåšç½‘ç»œå¢å¼ºï¼ŒNetAugï¼ŒåŸºç¡€æ¨¡å‹æ‰©å±•</p><h2 id=lec10-mcunet-tinyml>Lec10 MCUnet TinyML</h2><h3 id=ç“¶é¢ˆ>ç“¶é¢ˆ</h3><p>å‚æ•°æ•°é‡ï¼Œå³°å€¼æ¿€æ´»ï¼Œä¸ï¼Œå†…å­˜</p><h3 id=tinynas>TinyNAS</h3><p>Resolution åˆ†è¾¨ç‡ å’Œ Width Multipler å®½åº¦è°ƒèŠ‚å› å­</p><ol><li><p>Automated search space optimization è‡ªåŠ¨æœç´¢ç©ºé—´ä¼˜åŒ–</p><p>åˆ†ææ»¡è¶³é™åˆ¶çš„æ¨¡å‹çš„FLOPsåˆ†å¸ƒï¼Œåœ¨å„è‡ªçš„æœç´¢ç©ºé—´ä¸­ï¼Œé«˜FLOPs=>é«˜æ¨¡å‹èƒ½åŠ›=>æ›´å¯èƒ½é«˜ACC</p><p>åœ¨åŒæ ·çš„å†…å­˜é™åˆ¶ä¸‹ï¼Œèƒ½æœ‰æ›´é«˜çš„è¿ç®—é‡çš„è®¾è®¡ç©ºé—´æ›´å¥½</p><p>Flash å­˜å‚¨æƒé‡ï¼ŒSRAM å­˜å‚¨æ¿€æ´»å€¼</p><p>ï¼ˆæœ€å¥½çš„é…æ¯”ï¼‰</p><p>Flashâ†‘ï¼Œå®½åº¦è°ƒèŠ‚å› å­ï¼ˆé€šé“æ•°ï¼‰â†‘ï¼Œåˆ†è¾¨ç‡â†“ï¼Œå¦åˆ™åœ¨ SRAM ä¸­å­˜ä¸ä¸‹ åˆ†è¾¨ç‡ x é€šé“æ•°</p><p>SRAMâ†‘ï¼Œå®½åº¦è°ƒèŠ‚å› å­åŸºæœ¬ä¸å˜ï¼Œåˆ†è¾¨ç‡â†‘</p></li><li><p>Resource-constrained model specialization èµ„æºæœ‰é™çš„æ¨¡å‹ç‰¹åŒ–</p></li></ol><p>å±‚çš„å†…å­˜çš„å³°å€¼æœ€å°</p><h4 id=patch-based-inference-åˆ†å—>Patch-based Inference åˆ†å—</h4><p>ä¸å†æ˜¯ per-layer æ•´å±‚è¾“å…¥è¾“å‡ºï¼Œæ”¹ä¸º per-patchï¼Œåˆ†æˆå‡ éƒ¨åˆ†è¾“å…¥è¾“å‡º</p><ul><li><p>åå¤„ï¼Œå¢åŠ äº†latencyå»¶è¿Ÿï¼Œé™åˆ¶äº†å¹¶è¡Œèƒ½åŠ›ï¼ˆä¸è¿‡å¾®æ§åˆ¶å™¨çš„å¹¶è¡Œèƒ½åŠ›æ˜¯å¼±çš„ï¼‰</p><p>å·ç§¯çš„é‡å¤è®¡ç®—ï¼Œæ„Ÿå—é‡ï¼Œå¤šäº†é‡å çš„éƒ¨åˆ†ã€‚æ„Ÿå—é‡æ‰©å±•</p></li><li><p>å¯ä»¥è°ƒæ•´ï¼ˆå‡å°æ—©æœŸçš„æ„Ÿå—é‡ï¼Œ1x1ï¼Œå‡å°‘åˆ†å—é˜¶æ®µçš„å·ç§¯å±‚ï¼‰ï¼Œæ€»çš„éœ€è¦ä¸ä¸€æ ·ï¼Œåœ¨åé¢å¢åŠ å›å·ç§¯å±‚ï¼Œæ¶ˆé™¤å½±å“</p><p>æ—©æœŸç”¨ åˆ†å—æ¨ç†ï¼ŒåæœŸé™ä¸‹æ¥ï¼Œæ˜¯æ­£å¸¸æ¨ç†</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412221709215.png width=1942 height=1064 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412221709215_hu_d5ceb53149cb9134.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250412221709215_hu_b31c4b62f807e858.png 1024w" loading=lazy alt=image-20250412221709215 class=gallery-image data-flex-grow=182 data-flex-basis=438px></p></li><li><p>å†æŠŠè¿™ç§åˆ†å—æ¨ç†çš„æ–¹å¼ï¼Œæ”¾å…¥æœç´¢ç©ºé—´ï¼Œæ¨ç†è°ƒåº¦</p></li><li><p>å¯ä»¥æ”¯æŒæ›´å¤§çš„è¾“å…¥åˆ†è¾¨ç‡</p></li></ul><h4 id=åº”ç”¨>åº”ç”¨</h4><ul><li><p>Tiny Vision</p><p>classification, visual wake wordsï¼Œæ£€æµ‹ä»»åŠ¡ åˆ†è¾¨ç‡æ•æ„Ÿï¼ˆç›¸æ¯”åˆ†ç±»ï¼‰ï¼Œæ‰€ä»¥åˆ†å—æ¨ç†ï¼Œèƒ½ä½¿å¾—åˆ†è¾¨ç‡æé«˜</p><p>on-device training</p></li><li><p>Tiny Audio</p><p>äºŒç»´è¯­éŸ³ï¼Œï¼ˆæ—¶é—´ï¼Œé¢‘ç‡ï¼‰åŠŸç‡ï¼Œconvï¼Œç›¸é‚»çš„é¢‘ç‡ã€æ—¶é—´å…³è”</p></li><li><p>Tiny time series/anomaly detection å¾®å‹æ—¶é—´åºåˆ—å¼‚å¸¸æ£€æµ‹</p><p>å¼‚å¸¸äº‹ä»¶ã€äº§å“ï¼ˆautoencoderï¼Œç¬¦åˆæ­£å¸¸åˆ†å¸ƒï¼Œé‡å»ºè¯¯å·®å°ï¼Œä¸ç¬¦åˆï¼Œè¯¯å·®å¤§ï¼‰</p><p>VLAï¼Œå¤šä¸ªä»»åŠ¡</p></li></ul><h2 id=lec11-tinyengine>Lec11 TinyEngine</h2><h3 id=loop-optimization-å¾ªç¯ä¼˜åŒ–>Loop optimization å¾ªç¯ä¼˜åŒ–</h3><h4 id=loop-reordering-å¾ªç¯é‡æ’>Loop reordering å¾ªç¯é‡æ’</h4><p>è®©è®¿é—®å†…å­˜æ›´ç¬¦åˆ cache lineï¼Œè¿ç»­è®¿é—®</p><p>çŸ©é˜µä¹˜æ³• i, j, k => i, k, jï¼Œè™½ç„¶è¾“å‡ºè®¿é—®å˜å¾—ä¸è¿ç»­ï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šè¢«coveræ‰</p><h4 id=loop-tiling-å¾ªç¯åˆ†å—>Loop tiling å¾ªç¯åˆ†å—</h4><p>å†…å­˜è®¿é—®å°± N*N => N*Tiling_size => Tiling_size * Tiling_size</p><p>å†…å­˜å±€éƒ¨æ€§ï¼Œé™ä½ç¼“å­˜æœªå‘½ä¸­</p><p>ä¸€èˆ¬å¾ªç¯å†…å±‚å¾€å¤–å§ï¼ˆï¼Ÿï¼‰</p><p>for ti, N block</p><p>â€‹ for ti, ti + block</p><h5 id=ä¸¤å±‚ç¼“å­˜>ä¸¤å±‚ç¼“å­˜ï¼Ÿ</h5><p>è®¾ç½®ç¬¬äºŒå±‚åˆ†å—å¤§å°ï¼Œå¤šå±‚æ¬¡çš„åˆ†å— Tile2ï¼Œå’ŒL2 cache å¤§å°è®¾è®¡</p><h3 id=loop-unrolling-å¾ªç¯å±•å¼€>Loop unrolling å¾ªç¯å±•å¼€</h3><p>åˆ†æ”¯é¢„æµ‹ï¼Œfor æ¡ä»¶åˆ¤å®šï¼Œå¾ªç¯å±•å¼€ï¼Œå‡å°‘åˆ†æ”¯ï¼›ä½†ä¼šå¢åŠ é‡å¤ä»£ç ï¼Œå¢åŠ äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°</p><h3 id=simd-single-instruction-multiple-data-programming-å•æŒ‡ä»¤å¤šæ•°æ®>SIMD (single instruction, multiple data) programming å•æŒ‡ä»¤å¤šæ•°æ®</h3><h4 id=isa-instruction-set-architecture-æŒ‡ä»¤é›†æ¶æ„>ISA (Instruction set architecture) æŒ‡ä»¤é›†æ¶æ„</h4><h5 id=cisc-complex-instruction-set-computer-å¤æ‚æŒ‡ä»¤é›†è®¡ç®—æœº>CISC (Complex Instruction Set Computer) å¤æ‚æŒ‡ä»¤é›†è®¡ç®—æœº</h5><p>Intel x86</p><p>å¹¶è¡Œå¤„ç†èŒƒå¼</p><p>Vector Registerï¼Œå‘é‡å¯„å­˜å™¨</p><p>Vector Operationï¼Œå‘é‡è¿ç®—</p><p>æé«˜ååé‡ï¼Œé€Ÿåº¦</p><h5 id=risc-reduced-instruction-set-computer-ç²¾ç®€æŒ‡ä»¤è®¡ç®—æœº>RISC (Reduced Instruction Set Computer) ç²¾ç®€æŒ‡ä»¤è®¡ç®—æœº</h5><p>Arm, RISC-V</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415131811589.png width=2487 height=1203 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415131811589_hu_bfac195046a81881.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415131811589_hu_27822bc7dcd050c4.png 1024w" loading=lazy alt=image-20250415131811589 class=gallery-image data-flex-grow=206 data-flex-basis=496px></p><h3 id=multithreading-å¤šçº¿ç¨‹>Multithreading å¤šçº¿ç¨‹</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>pthread_t</span> <span class=n>threads</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=n>ThreadData</span> <span class=n>thread_data</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=n>pthread_create</span><span class=p>(</span><span class=o>&amp;</span><span class=n>threads</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=k>nullptr</span><span class=p>,</span> <span class=n>func</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>thread_data</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=n>pthread_join</span><span class=p>(</span><span class=n>threads</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=k>nullptr</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=openmp>OpenMP</h4><p>ç¼–è¯‘å™¨æŒ‡ä»¤</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>omp_set_num_threads</span><span class=p>(</span><span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#pragma omp parallel for
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>N</span><span class=p>;</span> <span class=n>i</span> <span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>N</span><span class=p>;</span> <span class=n>j</span> <span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;</span> <span class=n>N</span><span class=p>;</span> <span class=n>k</span> <span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>C</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+=</span> <span class=n>A</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>*</span> <span class=n>B</span><span class=p>[</span><span class=n>k</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=cuda>CUDA</h4><p>MMA çŸ©é˜µç´¯åŠ </p><h3 id=inference-optimization>Inference Optimization</h3><h4 id=image-to-column-im2col-convolution>Image to Column (Im2col) convolution</h4><h4 id=in-place-depth-wise-convolution>In-place depth-wise convolution</h4><h4 id=nhwc-for-point-wise-convolution-nchw-for-depth-wise-convolution>NHWC for point-wise convolution, NCHW for depth-wise convolution</h4><h4 id=winograd-convolution>Winograd convolution</h4><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415144734112.png width=1382 height=867 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415144734112_hu_fc3707c01f873052.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415144734112_hu_95f7a35d306d4505.png 1024w" loading=lazy alt=image-20250415144734112 class=gallery-image data-flex-grow=159 data-flex-basis=382px></p><h2 id=lec12-transfomer--llm>Lec12 Transfomer & LLM</h2><h3 id=transformer-åŸºç¡€>Transformer åŸºç¡€</h3><p>&mldr;</p><h3 id=transfomer-design-variants-å˜ä½“>Transfomer Design Variants å˜ä½“</h3><h4 id=encoder-decoder-t5>Encoder-Decoder (T5)</h4><h4 id=encoder-only-bert-bidirectional-encoder-representations-from-transformers>Encoder-only (BERT, Bidirectional Encoder Representations from Transformers)</h4><ul><li>Masked Language Model (MLM)</li><li>Next Sentence Prediction (NSP)</li></ul><h4 id=decoder-only-gpt-generative-pre-trained-transformer>Decoder-only (GPT, Generative Pre-trained Transformer)</h4><ul><li>Next word prediction</li></ul><h3 id=absoluterelative-positional-encoding>Absolute/Relative Positional Encoding</h3><ul><li><p>ç»å¯¹ä½ç½®ç¼–ç </p><p>åµŒå…¥è¾“å…¥ä¸­</p><p>è´¯ç©¿æ•´ä¸ªTransfomerè¿‡ç¨‹</p></li><li><p>ç›¸å¯¹ä½ç½®ç¼–ç </p><p>åªåœ¨æ³¨æ„åŠ›æœºåˆ¶çš„éƒ¨åˆ†</p><p>èƒ½å¤„ç†æ›´é•¿çš„ä¸Šä¸‹æ–‡ï¼Œtrain short, test long</p><ol><li><p>ALiBi (Attention with Linear Biases)</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415165626626.png width=2434 height=1096 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415165626626_hu_a3a80bca31e310eb.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415165626626_hu_cce4a7c5cdd601d8.png 1024w" loading=lazy alt=image-20250415165626626 class=gallery-image data-flex-grow=222 data-flex-basis=532px></p></li><li><p>RoPE (Rotary Positional Embedding)</p><p>LLaMa</p><p>æŠŠé•¿çš„åµŒå…¥è½¬ä¸ºäºŒç»´çš„å½¢å¼ï¼Œ(d1, d2)</p><p>interpolating æ’å€¼ï¼Œå½“ m ç¿»å€ï¼Œä¸ºäº†ä¿æŒè¿˜èƒ½æ­£å¸¸è¡¨ç¤ºï¼Œtheta / 2</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415165948390.png width=2482 height=1175 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415165948390_hu_b0c9e7b064708d70.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415165948390_hu_4cd97e10a119947b.png 1024w" loading=lazy alt=image-20250415165948390 class=gallery-image data-flex-grow=211 data-flex-basis=506px></p></li></ol></li></ul><h3 id=kv-cache-optimization>KV cache optimization</h3><p>éœ€è¦ KVï¼Œæ‰èƒ½åœ¨ Q çš„æ—¶å€™ï¼Œç®—å‡ºå¯¹åº”çš„ æ³¨æ„åŠ›</p><p>æ–°tokenè¿›æ¥ï¼Œæ²¡æœ‰ KV cacheï¼Œåˆ™éœ€è¦é‡ç®— KVï¼Ÿï¼Ÿï¼Ÿ</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416021940775.png width=2060 height=836 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416021940775_hu_276de9e596bb8ffc.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416021940775_hu_b44a45eb58ddff04.png 1024w" loading=lazy alt=image-20250416021940775 class=gallery-image data-flex-grow=246 data-flex-basis=591px></p><h4 id=multi-head-attention-mha>Multi-Head Attention (MHA)</h4><p>n heads for query, n heads for key/value</p><p>KV cache å¤§å°ä¼šä¹˜ä»¥ n_kvï¼Œå¤ªå¤§</p><h4 id=multi-query-attention-mqa>Multi-Query Attention (MQA)</h4><p>n heads for query, 1 head for key/value</p><p>ä¼šå¤§å¤§å‰Šå¼±æ¨¡å‹èƒ½åŠ›</p><h4 id=grouped-query-attention-gqa>Grouped-Query Attention (GQA)</h4><p>æŠ˜ä¸­</p><p>n heads for query, G heads for key/value (typically G = N/8)</p><p>åœ¨å¤§æ¨¡å‹ä¸‹ï¼Œå‡†ç¡®ç‡å’Œ MHA å·®ä¸å¤š</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415185619993.png width=1511 height=650 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415185619993_hu_cdbe65e25534f891.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415185619993_hu_7c7dd0e81fdd934.png 1024w" loading=lazy alt=image-20250415185619993 class=gallery-image data-flex-grow=232 data-flex-basis=557px></p><h3 id=ffn--swiglu-gated-linear-units>FFN => SwiGLU (Gated Linear Units)</h3><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415190529371.png width=2478 height=1256 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415190529371_hu_6d748348cb105390.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415190529371_hu_bc9c8a894461c46c.png 1024w" loading=lazy alt=image-20250415190529371 class=gallery-image data-flex-grow=197 data-flex-basis=473px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415190557019.png width=1671 height=636 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415190557019_hu_fbc13de481d682a9.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415190557019_hu_ed46eb22937941b9.png 1024w" loading=lazy alt=image-20250415190557019 class=gallery-image data-flex-grow=262 data-flex-basis=630px></p><h3 id=llm>LLM</h3><ul><li><p>LLaMa</p><ol><li><p>LLaMa</p><p>Decoder-only, Pre-norm,SwiGLU(swish,gatedlinearunits), rotary positional embedding (RoPE)</p><p>7B model_d 4096, 32 heads</p><p>65B model_d 8192, 64 heads</p></li><li><p>LLaMa 2</p><p>ä¸Šä¸‹æ–‡æ›´é•¿ 2k => 4k</p><p>GQA åˆ†ç»„è¯¢é—®æ³¨æ„åŠ›</p></li><li><p>LLaMa 3</p><p>å¤šè¯­è¨€ token</p></li></ol></li><li><p>Mistral-7B</p><p>æ»‘åŠ¨çª—å£æ³¨æ„åŠ›æœºåˆ¶ï¼Œæ‰©å±•ä¸Šä¸‹æ–‡</p></li></ul><p>æ•°æ®å’Œæ¨¡å‹å‚æ•°ä¸€èµ·å˜å¤§ã€‚</p><h2 id=lec13-llm-deployment-techniques>Lec13 LLM Deployment Techniques</h2><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416154932613.png width=1500 height=405 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416154932613_hu_4629dca5a5e3d1f6.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416154932613_hu_a89f0ce5220f84ae.png 1024w" loading=lazy alt=image-20250416154932613 class=gallery-image data-flex-grow=370 data-flex-basis=888px></p><h3 id=quantization>Quantization</h3><h4 id=weight-activation-quantization-smoothquant>Weight-Activation Quantization: SmoothQuant</h4><p>å‰é¢æåˆ°çš„å“ªäº›æœ´ç´ çš„é‡åŒ–æ–¹æ³•å¯¹LLMï¼Œå…¶å®æ•ˆæœä¸å¥½</p><p>åŸå› ï¼šoutliers å¼‚å¸¸å€¼ï¼ŒæŸäº›æ¿€æ´»å€¼å¾ˆå¤§ï¼Œç ´åç²¾åº¦</p><p>æ¿€æ´»å€¼ï¼Œä¸ªåˆ«å¼‚å¸¸é«˜çš„channelï¼Œè“è‰²éƒ¨åˆ†å°†è¢«èˆå…¥é›¶ï¼›</p><p>æƒé‡å€¼ï¼Œä¸€èˆ¬éƒ½æ¯”è¾ƒå°ï¼Œezã€‚</p><p>å–èˆï¼Œsmooth bondï¼š</p><p>è€ƒè™‘åˆ°æƒé‡å’Œæ¿€æ´»å€¼æ˜¯çº¿æ€§çŸ©é˜µè¿ç®—ï¼Œæ‰€ä»¥ï¼Œæ¯”å¦‚æ¿€æ´»å€¼ä¹˜ 0.1ï¼Œæƒé‡ä¹˜ 10ï¼Œç»“æœä¸å˜ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415203628745.png width=2357 height=716 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415203628745_hu_c8019d96b6258a98.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415203628745_hu_7301060d77b88839.png 1024w" loading=lazy alt=image-20250415203628745 class=gallery-image data-flex-grow=329 data-flex-basis=790px></p><ol><li><p>Calibration Stage</p><p>æ‰¾åˆ°æ¿€æ´»å€¼ col_maxï¼Œæ‰¾åˆ°æƒé‡ row_maxï¼Œç›¸é™¤å¾—åˆ°ç¼©æ”¾å› å­ s = \sqrt(col_max / row_max)</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415204653698.png width=1846 height=740 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415204653698_hu_8ed85037706828ec.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415204653698_hu_27d9d8bdc794959c.png 1024w" loading=lazy alt=image-20250415204653698 class=gallery-image data-flex-grow=249 data-flex-basis=598px></p></li><li><p>Smoothing Stage</p><p>åº”ç”¨ç¼©æ”¾å› å­</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415204804801.png width=2009 height=997 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415204804801_hu_cb8f097f8318385e.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415204804801_hu_2d84a295e22df8c5.png 1024w" loading=lazy alt=image-20250415204804801 class=gallery-image data-flex-grow=201 data-flex-basis=483px></p></li><li><p>Inference (deployed model) éƒ¨ç½²</p><p>æ²¡æœ‰å†ç¼©æ”¾ï¼Œç¼–è¯‘çš„æ—¶å€™å¤„ç†äº†ï¼ˆfuse åˆ°å‰ä¸€å±‚ï¼‰</p></li></ol><p>ä¸ºä»€ä¹ˆå•èŠ‚ç‚¹æ¯”åˆ†å¸ƒå¼å¥½ï¼Œcommunication overhead</p><h4 id=weight-only-quantization-awq-and-tinychat>Weight-Only Quantization: AWQ and TinyChat</h4><p><strong>W4A16</strong> for Single-batch single user server</p><p>å•ç”¨æˆ·ï¼Œå°±æ˜¯ batchsize æ˜¯ 1ï¼Œè®¡ç®—ç“¶é¢ˆæ˜¯ weight</p><p>weightåœ¨è¾¹ç¼˜è®¾å¤‡çš„LLMæ¨ç†ä¸­çš„å½±å“</p><ol><li>ä¸Šä¸‹æ–‡ä¸ç”Ÿæˆé˜¶æ®µï¼Œç”Ÿæˆé˜¶æ®µæ˜¯ç“¶é¢ˆ</li><li>ç”Ÿæˆé˜¶æ®µå—é™äºå†…å­˜é€šè®¯</li><li>weightçš„å ç”¨å†…å­˜çš„å¤§å°ï¼Œæ¯”activationå¤§å¤šäº†</li></ol><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415213903708.png width=2480 height=912 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415213903708_hu_4317370f47500f48.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415213903708_hu_c7e14618b1682f9d.png 1024w" loading=lazy alt=image-20250415213903708 class=gallery-image data-flex-grow=271 data-flex-basis=652px></p><h5 id=awq-activation-aware-weight-quantization>AWQ: Activation-aware Weight Quantization</h5><p>ä¼ ç»Ÿ RTNï¼ˆRound To Nearestï¼‰FP16 => INT3ï¼Œclip()ï¼Œé™ä½å¾ˆå¤šã€‚</p><p>ï¼Ÿï¼Ÿï¼Ÿ</p><p>åªè¦ä¿ç•™ä¸€è¡Œï¼Œå³1%channelï¼Œçš„å…³é”®æƒé‡ï¼Œå¹»è§‰æ˜¾è‘—ä¸‹é™ï¼</p><p>æ€ä¹ˆæ‰¾å‡ºè¿™ 1% å‘¢ï¼Ÿ</p><p>åœ¨é‡åŒ–æƒé‡çš„è¿‡ç¨‹ä¸­ï¼Œä¸å…³æ³¨æƒé‡çš„æƒ…å†µï¼Œè€Œæ˜¯å…³æ³¨æ¿€æ´»å€¼çš„æƒ…å†µï¼</p><p>å› ä¸ºä¸‹ä¸€å±‚çš„æ¿€æ´»å€¼ï¼Œæ˜¯ç”±æƒé‡ä¸ä¸Šä¸€å±‚çš„æ¿€æ´»å€¼ç›¸ä¹˜å¾—å‡ºï¼Œæ‰€ä»¥ï¼Œæ¿€æ´»å€¼å¤§çš„ï¼Œä¿ç•™ï¼Œ</p><p>ä¹Ÿæ˜¯å‰é¢è¯´çš„å°‘é‡çš„å¼‚å¸¸å€¼outlier</p><p>ä½†æ˜¯åŒä¸ªå¼ é‡ä¸­å‡ºç°fp16 å’Œ int8ï¼Œå¾ˆéš¾å®ç°ï¼Œä¼šå¼•å…¥<strong>æ··åˆç²¾åº¦</strong>çš„è®¡ç®—ï¼Œå˜å¾—éº»çƒ¦ã€‚</p><p>å…¶å®æ˜¯ä¸å¿…è¦å¼•å…¥çš„ï¼Œå€Ÿç”¨å‰é¢SmoothQuantä¸­ç”¨åˆ°çš„æ–¹æ³•ï¼ŒæŠŠæƒé‡çš„æ•æ„Ÿæ€§è½¬ç»™æˆ‘ä»¬ä¿æŒä¸å˜çš„æ¿€æ´»å€¼</p><p>ç›¸å½“äºå¢åŠ ä¸€ä½çš„ç²¾åº¦</p><p>ä¸éœ€è¦åå‘ä¼ æ’­ï¼Œä¸éœ€è¦åŸºäºå›å½’çš„æ–¹æ³•ï¼Œåªéœ€è¦ calibration æ ¡å‡†æ•°æ®é›†ã€‚</p><p>ï¼ˆPerplexity å›°æƒ‘åº¦ æ˜¯è¡¡é‡è¯­è¨€æ¨¡å‹è´¨é‡çš„ä¸€ä¸ªæŒ‡æ ‡ï¼Œå’ŒçœŸæ˜¯è¾“å‡ºçš„æ¯”è¾ƒï¼Œè¶Šå°è¶Šå¥½ï¼‰</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415215452151.png width=987 height=735 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415215452151_hu_abd5625cd096b908.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250415215452151_hu_9f49148ab4a7987d.png 1024w" loading=lazy alt=image-20250415215452151 class=gallery-image data-flex-grow=134 data-flex-basis=322px></p><h5 id=tinychat-llm-inference-engine-on-edge>TinyChat: LLM Inference Engine on Edge</h5><h6 id=hardware-aware-packing>Hardware-aware packing</h6><p>æ€ä¹ˆè§£å†³ 4bit å’Œ 1å­—èŠ‚ å¯¹ä¸é½çš„é—®é¢˜ï¼Ÿ</p><p>æ”¹å˜å­˜å‚¨æ–¹å¼ï¼Œä¸ºäº†æ›´å¥½åœ°è§£ç ï¼Œäº¤é”™å­˜å‚¨</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416005829003.png width=2120 height=1223 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416005829003_hu_e53f3da8838e0869.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416005829003_hu_9d95431e6f77e382.png 1024w" loading=lazy alt=image-20250416005829003 class=gallery-image data-flex-grow=173 data-flex-basis=416px></p><h6 id=kernel-fusion>Kernel Fusion</h6><p>Kernel call å¾ˆè´µï¼Œåšèåˆï¼ŒBMMï¼Œæ‰¹é‡çŸ©é˜µä¹˜æ³•</p><h4 id=qserve-w4a8kv4>QServe (W4A8KV4)</h4><h5 id=èƒŒæ™¯-èåˆä¸¤è€…çš„ä¼˜ç‚¹>èƒŒæ™¯-èåˆä¸¤è€…çš„ä¼˜ç‚¹</h5><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416011051694.png width=2262 height=1186 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416011051694_hu_1e4762963fa833ea.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416011051694_hu_11f4bc1cc52011e5.png 1024w" loading=lazy alt=image-20250416011051694 class=gallery-image data-flex-grow=190 data-flex-basis=457px></p><h5 id=smoothattention>SmoothAttention</h5><p>ç±»ä¼¼ä¸SmoothQuantï¼ŒQ æ˜¯å¹³æ»‘çš„ï¼ŒK ä¼šæœ‰æŸäº›é€šé“æœ‰outlierå¼‚å¸¸å€¼</p><h5 id=åé‡åŒ–ç”±äºæº¢å‡ºå¯èƒ½è¦è°ƒæ•´è®¡ç®—æ–¹å¼>åé‡åŒ–ï¼Œç”±äºæº¢å‡ºå¯èƒ½è¦è°ƒæ•´è®¡ç®—æ–¹å¼</h5><p>æ”¹å˜ä½æ•°ä¹‹åï¼Œè´Ÿæ•°çš„è¯ï¼Œä¹˜ä¸€ä¸ªæ•°ï¼Œå¯èƒ½ä¸‹æº¢å‡ºäº†ï¼Œæ‰€ä»¥å¯ä»¥å…ˆä¹˜å†åŠ å‡</p><p>å…ˆç¼©æ”¾è¿˜æ˜¯å…ˆåŠ å‡ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416015019363.png width=2553 height=1068 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416015019363_hu_bd68e0615a9d4888.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416015019363_hu_4bc965debe1f9f59.png 1024w" loading=lazy alt=image-20250416015019363 class=gallery-image data-flex-grow=239 data-flex-basis=573px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416015228315.png width=2280 height=841 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416015228315_hu_bb97ce608897171f.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416015228315_hu_f49349b7f1960417.png 1024w" loading=lazy alt=image-20250416015228315 class=gallery-image data-flex-grow=271 data-flex-basis=650px></p><h3 id=pruning--sparsity>Pruning & Sparsity</h3><h4 id=weight-sparsity-wanda>Weight Sparsity: Wanda</h4><p>ä¼ ç»Ÿï¼šçœ‹æƒé‡æœ¬èº«magnitude</p><p>Wandaï¼šå…³æ³¨æœ€ç»ˆæ¿€æ´»å€¼å°çš„ï¼Œå¯¹åº”çš„æƒé‡</p><h4 id=contextual-sparsity>Contextual Sparsity</h4><h5 id=dejavu-input-dependednt-sparsity>DejaVu (input dependednt sparsity)</h5><p>ï¼Ÿ</p><h5 id=moe-mixture-of-experts>MoE (Mixture-of-Experts)</h5><p>æé«˜æ€»å‚æ•°ï¼Œä¸æé«˜æ¨ç†ä»£ä»·</p><p>routerè·¯ç”±å™¨åˆ†é…workloadå·¥ä½œ</p><h6 id=è·¯ç”±æœºåˆ¶>è·¯ç”±æœºåˆ¶</h6><p>tokené€‰æ‹©expert</p><p>experté€‰æ‹©token</p><p>å…¨å±€expertåˆ†é…</p><h4 id=attention-sparsity>Attention Sparsity</h4><h5 id=spatten-token-pruning--head-pruning>SpAtten (token pruning & head pruning)</h5><p>Q-Kï¼ŒKåˆ—çš„attention sumï¼Œå¤§ = é‡è¦</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416020822222.png width=1109 height=746 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416020822222_hu_c41a80c45078338.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416020822222_hu_ea14401ca7bf8051.png 1024w" loading=lazy alt=image-20250416020822222 class=gallery-image data-flex-grow=148 data-flex-basis=356px></p><h5 id=h2o-token-pruning-in-kv-cache>H2O: token pruning in KV cache</h5><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416021040545.png width=1175 height=461 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416021040545_hu_b7e60311140dc4b4.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416021040545_hu_ea227e730cbd177c.png 1024w" loading=lazy alt=image-20250416021040545 class=gallery-image data-flex-grow=254 data-flex-basis=611px></p><h3 id=llm-serving-systems>LLM Serving Systems</h3><h4 id=important-metrics-æŒ‡æ ‡-for-llm-serving>Important Metrics æŒ‡æ ‡ for LLM Serving</h4><ul><li>Time To First Token (TTFT)ï¼Œå“åº”é€Ÿåº¦ï¼Œå®æ—¶äº’åŠ¨</li><li>Time Per Output Token (TPOT)ï¼Œæ¯ä¸ªtokenæ‰€éœ€æ—¶é—´ 100 ms/token, 10 token/s</li><li>Latency = (TTFT) + (TPOT * number of token to be generated)ï¼Œæ€»å»¶è¿Ÿ</li><li>Throughputï¼Œå¯¹æ‰€æœ‰è¯·æ±‚çš„æ¯ç§’äº§ç”Ÿçš„ token æ•°</li></ul><h4 id=ä¼˜åŒ–ç›®æ ‡>ä¼˜åŒ–ç›®æ ‡</h4><p>æœ€å° TTFTï¼Œæœ€å¤§ throughputï¼Œå‡å° TPOTï¼Œåä¸¤ä¸ªéœ€è¦ tradeoffï¼Œå¸¸çŸ›ç›¾</p><p>å¸¸ç”¨å¯å‘å¼ï¼šè¾“å‡ºé•¿åº¦ï¼Œè¾“å…¥é•¿åº¦ï¼Œæ¨¡å‹å¤§å°</p><h4 id=paged-attention-vllm>Paged Attention (vLLM)</h4><h5 id=kv-cache--çš„èµ„æºæµªè´¹>KV Cache çš„èµ„æºæµªè´¹</h5><ol><li>Internal fragmentationï¼šå†…éƒ¨ç¢ç‰‡åŒ–ï¼Œç”±äºä¸çŸ¥é“è¾“å‡ºé•¿åº¦ï¼Œè¿‡åº¦åˆ†é…ç©ºé—´</li><li>Reservationï¼šé¢„ç•™ç¢ç‰‡åŒ–ï¼Œç°åœ¨æ­¥éª¤æ²¡ç”¨ï¼Œæœªæ¥ä¼šç”¨</li><li>External fragmentationï¼šå¤šä¸ªrequestï¼Œä¸çŸ¥é“sequenceé•¿åº¦ï¼Œè¦ç©ºå‡ºä½ç½®</li></ol><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416022438962.png width=2560 height=544 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416022438962_hu_dc7a22d451f3a388.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416022438962_hu_30335e7ea2f2f239.png 1024w" loading=lazy alt=image-20250416022438962 class=gallery-image data-flex-grow=470 data-flex-basis=1129px></p><h5 id=è§£å†³--pagedattentionçš„å¥½å¤„>è§£å†³ / PagedAttentionçš„å¥½å¤„</h5><p>ç”± OS æ“ä½œç³»ç»Ÿçš„ virtual memory and paging è™šæ‹Ÿå†…å­˜å’Œåˆ†é¡µæœºåˆ¶å¯å‘</p><p>äº¤æ›¿ä½¿ç”¨ KV blocks</p><ol><li>è§£å†³ <strong>KV-cache</strong> å†…å­˜ç¢ç‰‡åŒ–ï¼Œæ”¯æŒ<strong>å¤šè®¿é—®</strong> requests</li><li>åŠ¨æ€å—æ˜ å°„ ä½¿å¾— èƒ½å¤Ÿ <strong>å…±äº« Prompt</strong></li></ol><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416022728222.png width=2453 height=1014 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416022728222_hu_a1e4d8e3ac93974c.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416022728222_hu_ad9e4bcc996de33d.png 1024w" loading=lazy alt=image-20250416022728222 class=gallery-image data-flex-grow=241 data-flex-basis=580px></p><h4 id=flashattention>FlashAttention</h4><p>ç”Ÿæˆattentionæ³¨æ„åŠ›çŸ©é˜µæ—¶ï¼ŒNxN å¾ˆå¤§</p><p>tiling + kernel fusion</p><h4 id=speculative-decoding-æ¨æµ‹æ€§è§£ç >Speculative Decoding æ¨æµ‹æ€§è§£ç </h4><p>å°æ¨¡å‹ Draft modelï¼Œç”Ÿæˆ</p><p>å¤§æ¨¡å‹ Target modelï¼ŒéªŒè¯</p><p>å°æ¨¡å‹è‡ªå›å½’ç”Ÿæˆï¼Œå¤§æ¨¡å‹å¹¶è¡ŒéªŒè¯ï¼ˆå› ä¸ºå¤§æ¨¡å‹è¿è¡Œæ¯”è¾ƒè´µï¼‰</p><p>çº æ­£ï¼Œé‡æ–°ç”Ÿæˆ</p><h4 id=batching>Batching</h4><p>å¢åŠ ååé‡</p><ul><li>no batchingï¼Œä¸åšæ‰¹å¤„ç†</li><li>static batchingï¼Œé™æ€æ‰¹å¤„ç†ï¼Œå›ºå®šæ‰¹æ¬¡å¤§å°</li><li>dynamic batchingï¼ŒåŠ¨æ€æ‰¹å¤„ç†ï¼Œæ‰¹æ¬¡å¤§å°åˆ°äº†ï¼Œæˆ–è€…æ—¶é—´åˆ°äº†</li><li>continuous batch (in-flight batch)ï¼Œè¿ç»­æ‰¹å¤„ç†ï¼Œtokençº§åˆ«</li></ul><h2 id=lec-14-llm-post-training>Lec 14 LLM Post-Training</h2><h3 id=llm-fine-tuning-å¾®è°ƒ>LLM Fine-Tuning å¾®è°ƒ</h3><h4 id=supervised-fine-tuning-sft-ç›‘ç£å¾®è°ƒ>Supervised Fine-Tuning (SFT) ç›‘ç£å¾®è°ƒ</h4><p>å¯¹é½äººç±»ä»·å€¼è§‚/åå¥½ï¼Œæ¯”å¦‚è¯´è¯æ›´åŠ å‹å¥½ï¼Œæ›´åŠ å–„è§£äººæ„</p><p>helpfulness & safety</p><h4 id=reinforcement-learning-from-human-feedback-rlhf-åŸºäºäººç±»åé¦ˆçš„å¼ºåŒ–å­¦ä¹ >Reinforcement Learning from Human Feedback (RLHF) åŸºäºäººç±»åé¦ˆçš„å¼ºåŒ–å­¦ä¹ </h4><p>BLEUã€ROUGEçš„æµ‹è¯•ï¼Œå®¢è§‚ç­”æ¡ˆï¼ŒRLHF æ›´åŠ ä¸»è§‚ï¼Œäººç±»å®šä¹‰çš„åˆ›é€ æ€§ã€å¯ä¿¡çš„ã€æœ‰ç”¨çš„</p><h5 id=æœ´ç´ çš„>æœ´ç´ çš„</h5><p>å¥–åŠ±æ¨¡å‹è®­ç»ƒâ”€â”€æ•°æ®ç”Ÿæˆç»“æœï¼Œäººç±»å¯¹ä¸åŒç»“æœæ’åºï¼Œæ¯”è¾ƒå‡½æ•°ï¼Œæ’åºå‰çš„å¤§å¤§å¤§äºåçš„</p><p>ä¸¤æ–¹é¢</p><ol><li>è°ƒæ•´åçš„æ¨¡å‹ï¼Œä¸ä¼šè¿‡æ‹Ÿåˆå¥–åŠ±æ¨¡å‹ï¼Œå’ŒåŸå§‹æ¨¡å‹çš„å†…å®¹ä¸èƒ½åå·®è¿‡å¤š</li><li>å¥–åŠ±æ¨¡å‹ä¸‹çš„ç»“æœä¸é”™ï¼Œç¬¦åˆäººç±»åå¥½</li></ol><p>ä¸‰ä¸ªæ¨¡å‹ï¼Œä¸¤ä¸ªæŸå¤±å€¼</p><h5 id=direct-preference-optimization-dpo-ç›´æ¥åå¥½ä¼˜åŒ–>Direct Preference Optimization (DPO) ç›´æ¥åå¥½ä¼˜åŒ–</h5><p>ç®€åŒ–æµç¨‹ï¼Œè½¬åŒ–ä¸ºå•æµç¨‹çš„ SFT ä»»åŠ¡</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416123850866.png width=1516 height=290 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416123850866_hu_297eae2994f1aebf.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250416123850866_hu_c911b00705af73b3.png 1024w" loading=lazy alt=image-20250416123850866 class=gallery-image data-flex-grow=522 data-flex-basis=1254px></p><h4 id=parameter-efficient-fine-tuning-peft>Parameter Efficient Fine-Tuning (PEFT)</h4><h5 id=bitfit-fine-tune-only-the-bias-terms-åªå¾®è°ƒåç½®é¡¹>BitFit (Fine-tune only the bias terms) åªå¾®è°ƒåç½®é¡¹</h5><p>å¾®è°ƒæƒé‡éœ€è¦å­˜å‚¨æ¿€æ´»å€¼ï¼Œä½†å¾®è°ƒåç½®é¡¹ä¸éœ€è¦å­˜å‚¨æ¿€æ´»å€¼</p><h5 id=tinytl-lite-residual-learning>TinyTL: Lite Residual Learning</h5><p>åœ¨ä¸»å¹²ç½‘ç»œè®¡ç®—é‡è¾ƒå¤§çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ è½»é‡çº§çš„ä¾§åˆ†æ”¯ï¼Œåªæ›´æ–°ä¾§åˆ†æ”¯ï¼Œå­¦ä¹ æ®‹å·®</p><p>ä¸‹é‡‡æ · group conv, 1x1 convï¼Œä¸Šé‡‡æ ·ï¼Œæ¿€æ´»è§„æ¨¡å°</p><h5 id=adapter-æ’å…¥é€‚é…å™¨å±‚>Adapter æ’å…¥é€‚é…å™¨å±‚</h5><p>Adapter Layerï¼šæ®‹å·®ï¼Œä¸‹é‡‡æ · æ¿€æ´» ä¸Šé‡‡æ ·ï¼Œbottleneck</p><p>å¯¹æ¯ä¸ªä»»åŠ¡ï¼Œåªæ·»åŠ ä¸€äº›å¯è®­ç»ƒçš„å‚æ•°</p><p>ä¼šå¢åŠ æ¨¡å‹æ·±åº¦ï¼Œå¢åŠ è®¡ç®—å¼€é”€ï¼Œå»¶è¿Ÿå¢åŠ </p><p>ä¸æ”¹å˜æ¨¡å‹ï¼Ÿ</p><h5 id=prompt-tuning>Prompt Tuning</h5><p>å¯ä»¥è®­ç»ƒè¿ç»­çš„promptï¼Œå­¦ä¹ prompt</p><h5 id=prefix-tuning>Prefix-Tuning</h5><p>Prompt-Tuning åªå¯¹ç¬¬ä¸€å±‚æœ‰æç¤º => å¯¹æ¯ä¸€å±‚æœ‰æç¤º</p><p>å¢åŠ è¾“å…¥æŸå¤±ï¼ŒKV cache ä½¿ç”¨å˜å¤§ï¼Œå»¶è¿Ÿå˜å¤§</p><p>ä¸å¼•å…¥é¢å¤–æ¨ç†å»¶è¿Ÿï¼Ÿ</p><h5 id=lora>LoRA</h5><p>åŒæ ·è®­ç»ƒä¾§åˆ†æ”¯</p><p>ä» d ç»´ => ä½ç§© r ç»´ï¼ˆé«˜æ–¯åˆ†å¸ƒåˆå§‹åŒ–ï¼‰ï¼Œä½ç§© r ç»´ => d ç»´ï¼ˆé›¶åˆå§‹åŒ–ï¼‰</p><p>æœ€åˆæ·»åŠ ï¼Œä¸ä¼šæœ‰å½±å“</p><p>h = x @ W + x @ A @ B = x @ (W + A @ B) = x @ W'</p><p>æ²¡æœ‰éçº¿æ€§æ¿€æ´»ï¼Œæ‰€ä»¥å¯ä»¥fuseåˆ°åŸæœ¬çš„çŸ©é˜µä¹˜æ³•</p><h5 id=qlora>QLoRA</h5><p>åŒæ · LoRA çš„è®¾è®¡åŸåˆ™ï¼ŒåŠ ä¸Šå¯¹éª¨æ¶æ¨¡å‹çš„é‡åŒ–</p><ol><li>å¼•å…¥ NormalFloat (NF4)ï¼Œcentroid ä¸æ˜¯å­¦åˆ°çš„ï¼Œæ˜¯å›ºå®šçš„</li><li>åŒé‡é‡åŒ– Double quantizationï¼Œç¼©æ”¾å› å­ä¹Ÿè¢«é‡åŒ–</li></ol><p>CPUå¸è½½åŠŸèƒ½çš„åˆ†é¡µä¼˜åŒ–å™¨ï¼Œä¼˜åŒ–çŠ¶æ€ä¸ç”¨æ—¶ï¼Œå­˜æ”¾åœ¨CPUï¼ŒèŠ‚çœå†…å­˜</p><h5 id=bit-delta>Bit-Delta</h5><p>Your Fine-Tune May Only Be Worth One Bit</p><p>å‡ºå‘ç‚¹æ˜¯ï¼Œæ¨¡å‹å·²ç»å­¦å¾—å¾ˆå¥½äº†ï¼Œå¾®è°ƒåªéœ€è¦åŠ ä¸€ç‚¹ç‚¹å‚æ•°å°±å¥½</p><p>èƒ½ä¸èƒ½å°±å¾®è°ƒ 1 ä½ï¼ŒæŠŠå¢é‡é‡åŒ–è‡³ä¸€ä½ï¼Œè¿˜æœ‰ä¸€ä¸ªç¼©æ”¾å› å­</p><p>äºŒå€¼åŒ–deltaï¼Œsin(delta) > 0 => 1 else -1</p><h3 id=multi-model-llms>Multi-model LLMs</h3><h4 id=cross-attention-based-flamingo>Cross-Attention Based: Flamingo</h4><p>å°†è§†è§‰ä¿¡æ¯æ³¨å…¥injectåˆ°è¯­è¨€æ¨¡å‹</p><p>LLM å‚æ•°å›ºå®šï¼ŒåŠ å…¥cross-attention layers</p><p>è§†è§‰ä¿¡æ¯ KVï¼Œæ–‡æœ¬ä¿¡æ¯ Q</p><h4 id=visual-tokens-as-input-palm-e-vila>Visual Tokens as Input: PaLM-E, VILA</h4><p>å…¨éƒ¨éƒ½ tokenizeï¼Œè§†è§‰ä¿¡æ¯tokens</p><p>è§£å†»LLMå‚æ•°ï¼›</p><p>äº¤é”™ä½¿ç”¨å›¾æ–‡ï¼Œè€Œä¸æ˜¯å›¾æ–‡å¯¹ï¼Œå¦åˆ™LLMæ€§èƒ½ä¸‹é™ä¸¥é‡ï¼›</p><p>æ··åˆæ•°æ®ï¼Œè¿˜æ˜¯éœ€è¦çº¯æ–‡æœ¬æ•°æ®</p><p>åˆ†è¾¨ç‡é‡è¦</p><p>é«˜åˆ†è¾¨ç‡çš„å¤„ç†ï¼Œåˆ†å—å¤šå°‘ï¼Œçœ‹ä»»åŠ¡ï¼ŒOCR åˆ†å—å¤šå¥½ï¼›çŸ¥è¯†æ¨ç†ä¸ä¸€å®š</p><p>QKVï¼ŒæŠŠä½åˆ†è¾¨ç‡ä½œä¸º Qï¼Œé«˜åˆ†è¾¨ç‡ä½œä¸º KV</p><h4 id=enabling-visual-outputs-vila-u>Enabling Visual Outputs: VILA-U</h4><p>ç»Ÿä¸€å›¾åƒå’Œæ–‡å­—ç†è§£</p><h3 id=prompt-engineering>Prompt Engineering</h3><h4 id=in-context-learning-icl>In-Context Learning (ICL)</h4><p>zero-shot few-shot</p><h4 id=chain-of-thought-cot>Chain-of-Thought (CoT)</h4><p>let&rsquo;s think step by step</p><h4 id=retrieval-augmented-generation-rag>ReTrieval Augmented Generation (RAG)</h4><h2 id=lec15-long-context-llm>Lec15 Long-Context LLM</h2><h3 id=context-extension>Context Extension</h3><h4 id=pope>PoPE</h4><p>å¢åŠ é¢‘ç‡ï¼Œæ‰©å±•ä¸Šä¸‹æ–‡ï¼Œç„¶åè¿˜éœ€è¦å»å¾®è°ƒ Fine-tune</p><h4 id=longlora>LongLoRA</h4><p>æ€§èƒ½ç“¶é¢ˆï¼šæ³¨æ„åŠ›æœºåˆ¶ã€‚äºŒæ¬¡å¢é•¿</p><p>åç§»ç¨€ç–æ³¨æ„åŠ›ï¼Œä¸åŒæ¨¡å¼ï¼Œä½œä¸ºä¸€ä¸ªæ³¨æ„åŠ›å¤´</p><p>æ€ä¹ˆFine-Tune embedding å’Œ normalization å±‚çš„ï¼Ÿ</p><p>ä¸¤ä¸ªæ¨¡å¼éƒ½ç”¨ï¼Œæ¯”å•ç”¨ä¸€ä¸ªæ¨¡å¼å¥½ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250425163300680.png width=2463 height=1101 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250425163300680_hu_6079ce95bb3f2080.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250425163300680_hu_cf1ca00561cfb455.png 1024w" loading=lazy alt=image-20250425163300680 class=gallery-image data-flex-grow=223 data-flex-basis=536px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250425164007742.png width=1927 height=246 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250425164007742_hu_b6a2065cc5c2cde3.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250425164007742_hu_6520be9708dbb469.png 1024w" loading=lazy alt=image-20250425164007742 class=gallery-image data-flex-grow=783 data-flex-basis=1880px></p><h3 id=evaluation-of-long-context-llms-é•¿ä¸Šä¸‹æ–‡å¤§æ¨¡å‹çš„è¯„ä¼°æ ‡å‡†>Evaluation of Long-Context LLMs é•¿ä¸Šä¸‹æ–‡å¤§æ¨¡å‹çš„è¯„ä¼°æ ‡å‡†</h3><h4 id=the-lost-in-the-middle-phenomenon-ä¸­é—´ä¸¢å¤±ç°è±¡>The Lost-in-the-Middle Phenomenon ä¸­é—´ä¸¢å¤±ç°è±¡</h4><p>å½“ç›¸å…³ä¿¡æ¯åœ¨å¼€å¤´å’Œç»“å°¾æ—¶ï¼Œå‡†ç¡®ç‡é«˜ï¼Œä¸­é—´å‡†ç¡®ç‡ä½ã€‚</p><p>**ç”Ÿæˆä¸€æ®µæµç•…çš„é•¿ä¸Šä¸‹æ–‡å›å¤ï¼Œä¸æ„å‘³ç€æ¨¡å‹çœŸæ­£è®°ä½äº†é‡Œé¢çš„å†…å®¹ï¼Œ**æ‰€ä»¥åªç”¨å›°æƒ‘åº¦æ˜¯ä¸å¤Ÿçš„ã€‚</p><h4 id=long-context-benchmarks-é•¿ä¸Šä¸‹æ–‡çš„åŸºå‡†æµ‹è¯•-niah-longbench>Long-Context Benchmarks é•¿ä¸Šä¸‹æ–‡çš„åŸºå‡†æµ‹è¯•: NIAH, LongBench</h4><h5 id=niah-needle-in-a-haystack-å¤§æµ·æé’ˆ>NIAH (Needle In A Haystack) å¤§æµ·æé’ˆ</h5><p>aaåœ¨bbå¹²äº†ccã€‚åšè¯¢é—®</p><p>éšç€ä¸Šä¸‹æ–‡çš„å˜é•¿ï¼Œè¯¢é—®åœ¨æ–‡ç« xx%çš„ä½ç½®çš„å†…å®¹needleï¼Œæ£€ç´¢Retrivalå‡†ç¡®ç‡ã€‚</p><p><strong>äººä¸ºè®¾è®¡çš„åˆæˆåŸºå‡†æµ‹è¯•</strong></p><h5 id=longbench>LongBench</h5><p>å¤šç§ä»»åŠ¡ï¼Œå‘ç°ä¸Šä¸‹æ–‡å‹ç¼©ç­‰æŠ€æœ¯ä¸å¦‚ä½ç½®ç¼–ç ã€‚</p><p><strong>ç°å®ä¸–ç•Œçš„æµ‹è¯•</strong></p><h3 id=efficient-attention-mechanismskv-cache-è¿‡å¤§çš„é—®é¢˜>Efficient Attention Mechanismsï¼ŒKV cache è¿‡å¤§çš„é—®é¢˜</h3><h4 id=kv-cache>KV Cache</h4><p>BS * layers * kv-heads * n_emd * length * 2 * typeï¼Œæ¯ä¸ªtoken</p><h4 id=streamingllm-and-attention-sinks>StreamingLLM and Attention Sinks</h4><p>ä¿æŒæ’å®šå†…å­˜ï¼ŒWindow Attention çš„é—®é¢˜ï¼Œç¬¬ä¸€ä¸ªtokenè¢«ç§»å‡ºæ—¶ï¼ŒPPLä¸Šå‡</p><p>Dense Attention çš„é—®é¢˜ï¼Œåœ¨tokené•¿åº¦è¶…è¿‡é¢„è®­ç»ƒé•¿åº¦æ—¶ï¼ŒPPLä¸Šå‡ perplex</p><p>æ»‘åŠ¨çª—å£ + Re-computation é‡è®¡ç®—</p><h6 id=attention-sink-æ³¨æ„åŠ›æ±‡èš-ç°è±¡>Attention Sink æ³¨æ„åŠ›æ±‡èš ç°è±¡</h6><p>å¯¹<strong>ç¬¬ä¸€ä¸ªtoken</strong>çš„æ³¨æ„åŠ›ä¼šé«˜ã€‚</p><p>ç”¨äº†softmaxï¼Œæ³¨æ„åŠ›å¾—åˆ†å’Œä¸º1ï¼Œå°±ç®—æœ‰äº›ä¸éœ€è¦å…³æ³¨ï¼Œè€Œè‡ªå›å½’æ¨¡å‹ä¸­ï¼Œé¦–ä¸ªtokenæ˜¯å…¨å±€å¯è§çš„ï¼Œæ‰€ä»¥æŠŠè¿™äº›å†—ä½™çš„æ³¨æ„åŠ›å¾—åˆ†ç»™å®ƒã€‚</p><p>æ˜¯å› ä¸ºsemantic <strong>è¯­ä¹‰</strong>ï¼Œè¿˜æ˜¯position <strong>ä½ç½®</strong>ï¼Ÿæ˜¯ä½ç½®ã€‚</p><p><strong>ä¿ç•™æ¥ä¸€ä¸ªå¯è®­ç»ƒçš„æ³¨æ„åŠ›æ±‡èšç‚¹ / å››ä¸ªæ³¨æ„åŠ›æ±‡èšç‚¹ã€‚</strong></p><p>ï¼ˆå®éªŒå¾—å‡ºå››ä¸ªæ˜¯ sweet pointï¼‰</p><p>ViT çš„æ³¨æ„åŠ›æ±‡èšç‚¹å‡ºç°åœ¨è¯­ä¹‰ä¿¡æ¯æ¯”è¾ƒå°‘çš„åŒºåŸŸã€‚</p><p>Bert åœ¨å¥å­æœ«å°¾çš„åˆ†éš”ç¬¦æ ‡è®°</p><p><strong>streamingLLMä¸ç­‰åŒäºé•¿ä¸Šä¸‹æ–‡ï¼ŒæŸ¥è¯¢æ—©æœŸçš„æ˜¯æŸ¥ä¸åˆ°çš„ï¼Œåœ¨kv cacheä¸­æ·˜æ±°äº†ã€‚</strong></p><p>(DuoAttention æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜)</p><h4 id=duoattention-retrieval-heads-and-streaming-heads>DuoAttention: Retrieval Heads and Streaming Heads</h4><p>Duo = Twoï¼Œ<strong>åŒæ ·ä¸èƒ½æ— é™é•¿ï¼Œä½†æ˜¯èƒ½å¤Ÿå‡ç¼“</strong>ã€‚</p><p>retrieval head å’Œ streaming head</p><p>retrieval headï¼Œæœ€åˆçš„ dense attention</p><p>streaming headï¼Œåªå…³æ³¨ recent token & reduced tokens</p><p>æ¯ä¸ªæ³¨æ„åŠ›å¤´éƒ½éœ€è¦è®­alpha</p><p>å› ä¸ºæ˜¯è¦ç”¨æ›´å°‘çš„å†…å­˜ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯¹<strong>è¿™ä¸ªæ³¨æ„åŠ›ç»“æœåšè’¸é¦distill</strong>ï¼Œä½¿å¾—å’Œæœ€ç»ˆçš„å·®å€¼æœ€å°ã€‚</p><p><strong>éœ€è¦è®­ç»ƒå¤šå°‘ä¸ªalphaï¼Ÿ</strong></p><p>layers x heads</p><p><strong>è®­ç»ƒææ–™ï¼Ÿ</strong></p><p>ç±»ä¼¼äºNIAHï¼Œè®¾ç½®ä¸€ç³»åˆ— passkeyã€‚</p><p><strong>æ¨ç†çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿ</strong></p><p>è®¾ç½®é˜ˆå€¼thresholdï¼Œå¤§äºdenseï¼Œå°äºstreamingã€‚</p><p><strong>decoding</strong></p><p>ä¸¤ç§ kv cache ä¸€ä¸ªæ˜¯å…¨éƒ¨ï¼Œä¸€ä¸ªæ˜¯sink point + æœ€è¿‘å‡ ä¸ªtoken</p><p>è®¡ç®—æ˜¯æ­£å¸¸çš„å¤šå¤´ã€‚</p><p><strong>prefilling</strong></p><p>åˆ†å—æ³¨æ„åŠ›</p><p>time complexity $O(L^2) \to O(LK)$</p><p>memory complexity $O(L) \to O(K)$</p><p>å¸Œæœ› streaming head è¶Šå¤šï¼ŒèŠ‚çœçš„è¶Šå¤šã€‚</p><p>å®éªŒä¸­ï¼Œæœ‰ä¸€åŠå¯ä»¥ä½œä¸ºstreaming headã€‚</p><p>å®é™…ä¸Šæ˜¯<strong>å¯¹attentionçš„å‰ªæã€ç¨€ç–åŒ–</strong>ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250430150408915.png width=2045 height=499 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250430150408915_hu_6fc78555e7c8a5f0.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250430150408915_hu_e53338f72f47b63.png 1024w" loading=lazy alt=image-20250430150408915 class=gallery-image data-flex-grow=409 data-flex-basis=983px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250430150615629.png width=2282 height=654 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250430150615629_hu_bff49cc4150d77b0.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250430150615629_hu_f989fa1b169dc28b.png 1024w" loading=lazy alt=image-20250430150615629 class=gallery-image data-flex-grow=348 data-flex-basis=837px></p><h4 id=quest-query-aware-sparsity>Quest: Query-Aware Sparsity</h4><ol><li>Dense Attention</li><li>Query-Agnostic Sparsity æŸ¥è¯¢æ— å…³ï¼Œè¦æ˜¯åœ¨å‰ä¸€ä¸ªtokené™¤ç§»é™¤äº†kvï¼Œåé¢çš„ä¸ä¼šå†æœ‰è¿™ä¸ªtoekn</li><li>Query-Aware Sparsityï¼ŒæŸ¥è¯¢æ„ŸçŸ¥ï¼Œå‰ä¸€ä¸ªç§»é™¤äº†ï¼Œä¸å½±å“åé¢è¿˜æ˜¯å¯ä»¥æœ‰ï¼›åŸºäºæ­£åœ¨è§£ç çš„æ–°è¯å…ƒã€‚</li></ol><p>å› ä¸ºç¡®å®ä¼šæœ‰æŸä¸ªtokenå¯¹å‰ä¸€ä¸ªæ¥è¯´ä¸é‡è¦ï¼Œä½†å¯¹ä¸‹ä¸€ä¸ªå¾ˆé‡è¦çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…¨éƒ½å­˜ä¸‹æ¥kv cacheï¼Œ<strong>å› æ­¤æ²¡æœ‰èŠ‚çœå†…å­˜ï¼Œåªæ˜¯èŠ‚çœç§»åŠ¨çš„å†…å­˜å¼€é”€</strong>ï¼ŒåªæŠ“å–é‡è¦çš„ kv cacheï¼Œå…¶ä»–çš„ç•™åœ¨å†…å­˜ä¸­ã€‚</p><p>åŒæ ·çš„å¯¹ attention page æ±‚å’Œ/æ±‚å¹³å‡ï¼ŒåªæŠ“å–é‡è¦çš„pageï¼Œå…¶ä½™çš„ç•™åœ¨å†…å­˜</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250501025912215.png width=1721 height=758 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250501025912215_hu_57f92e3e7fa6bb40.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250501025912215_hu_d4eb82400d9a689c.png 1024w" loading=lazy alt=image-20250501025912215 class=gallery-image data-flex-grow=227 data-flex-basis=544px></p><h3 id=beyond-transformers>Beyond Transformers</h3><h4 id=state-space-models-ssms-mamba>State-Space Models (SSMs): Mamba</h4><p>æ³¨æ„åŠ›æœºåˆ¶ä¸¤å¤§ä»»åŠ¡ï¼Œä¸åŒä¹‹é—´ï¼Œå•ä¸ªå†…éƒ¨ã€‚ <strong>è¿˜æ˜¯ä¸æ‡‚#</strong></p><p>Mambaï¼ŒåŠ åŸºç¡€ä¸Šå¼•å…¥ Selective State Spafe)</p><p>å›ºå®šçš„kv cacheï¼Œä¸çº¿æ€§å¢é•¿ã€‚</p><h4 id=hybrid-models-jamba>Hybrid Models: Jamba</h4><p>æ··åˆæ¨¡å‹ã€‚</p><h2 id=lec16-vit>Lec16 ViT</h2><h3 id=basics-of-vision-transformer-vit>Basics of Vision Transformer (ViT)</h3><p>Patchï¼ˆCNN, patch_size, 3, hidden_dimï¼‰ï¼ŒPosition Encodingï¼Œç„¶åå°±å’Œè¯­è¨€æ¨¡å‹ä¸€æ ·äº†</p><p>å¯¹æ¯”CNNï¼Œæ•°æ®é‡å°çš„æ—¶å€™ï¼ŒCNNå¥½ï¼Œå¤§çš„æ—¶å€™ï¼ŒViTå¥½ã€‚</p><h3 id=efficient-vit--accerleration-techniques>Efficient ViT & accerleration techniques</h3><p>è¶…åˆ†è¾¨ç‡ï¼Œæœ‰å®æ—¶åº”ç”¨åœºæ™¯ï¼›</p><p>é«˜åˆ†è¾¨ç‡ï¼Œå¯¹è‡ªåŠ¨é©¾é©¶é‡è¦ã€‚</p><p>é«˜åˆ†è¾¨ç‡ï¼Œå¯¹æ¯”CNNï¼ŒViT çš„è®¡ç®—é‡æå‡å¾ˆå¿«ï¼Œæ˜¯äºŒæ¬¡æ–¹çš„æå‡ï¼Œåˆ†è¾¨ç‡ä¹Ÿæ˜¯äºŒæ¬¡æ–¹ï¼Œæ‰€ä»¥å°±æ˜¯å››æ¬¡æ–¹ã€‚</p><p>Segment Anything</p><h4 id=windows-attention>Windows attention</h4><p>æ³¨æ„åŠ›æœºåˆ¶åªåœ¨çª—å£windowå†…å‘ç”Ÿï¼Œå›ºå®štokenå¤§å°ï¼Œè®¡ç®—å¤æ‚åº¦çš„æ˜¯çº¿æ€§çš„ã€‚</p><p>ä½†è¿™æ ·ä¸€æ¥ï¼Œæ³¨æ„åŠ›å°±åœ¨å±€éƒ¨æµé€šï¼Œå…¨å±€æ²¡æœ‰äº†ï¼Ÿ</p><p><strong>Swin Transformer</strong> å¼•å…¥ <strong>shift window</strong>ï¼Œshift operationï¼Œè®©ä¸‹ä¸€å±‚çš„çª—å£ç§»åŠ¨ï¼Œä½¿å¾—èƒ½æ³¨æ„åˆ°ç›¸é‚»çª—å£çš„å†…å®¹ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527163636223.png width=902 height=521 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527163636223_hu_9bb43053f771ff19.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527163636223_hu_65cf25c84bdeef2.png 1024w" loading=lazy alt=image-20250527163636223 class=gallery-image data-flex-grow=173 data-flex-basis=415px></p><h5 id=sparse-windows-attention>Sparse Windows attention</h5><p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„windowséƒ½æ˜¯æœ‰ç”¨çš„ã€‚</p><p><strong>FlatFormer</strong>ï¼Œç›¸æ¯”äº ç­‰çª—å£ç»„åˆï¼Œç”¨ ç­‰å¤§å°ç»„åˆ ï¼Œå¯ä»¥æ›´åŠ ç¡¬ä»¶å‹å¥½ï¼Œæ›´å¥½åœ°å¹¶è¡Œï¼Œä¸å¤šç­‰å¾…ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527163650238.png width=1899 height=645 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527163650238_hu_19d57f9b8c96a3ca.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527163650238_hu_83dd10e65d49ddf6.png 1024w" loading=lazy alt=image-20250527163650238 class=gallery-image data-flex-grow=294 data-flex-basis=706px></p><h4 id=linear-attention>Linear attention</h4><p>æ›¿æ¢ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527164046256.png width=2434 height=1103 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527164046256_hu_b0d3d8b3dc1accff.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527164046256_hu_5f009dcd26ad77b.png 1024w" loading=lazy alt=image-20250527164046256 class=gallery-image data-flex-grow=220 data-flex-basis=529px></p><p>ç„¶åå‘ç°æ•ˆæœå·®å¾ˆå¤šï¼Œæ³¨æ„åŠ›ä¸çªå‡ºäº†ã€‚</p><p>æ“…é•¿æ•æ‰å…¨å±€ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä½†å±€éƒ¨ä¿¡æ¯ä¸è¡Œã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527165047146.png width=2503 height=1088 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527165047146_hu_6e43812a2f1135c.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527165047146_hu_220d57c1a5531eb7.png 1024w" loading=lazy alt=image-20250527165047146 class=gallery-image data-flex-grow=230 data-flex-basis=552px></p><p>æƒ³åˆ°CNNæ˜¯æå–å±€éƒ¨ä¿¡æ¯çš„å¥½å·¥å…·ï¼Œåœ¨åŸå…ˆçš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸ŠCNN</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527205318607.png width=2424 height=688 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527205318607_hu_219d85b78f22a9e3.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527205318607_hu_c3c32659b636d10.png 1024w" loading=lazy alt=image-20250527205318607 class=gallery-image data-flex-grow=352 data-flex-basis=845px></p><p>ç»“æœæå‡ã€‚ï¼ˆåˆ†ææ–°çš„æ³¨æ„åŠ›åˆ†å¸ƒä¸åŸæœ¬çš„æ³¨æ„åŠ›åˆ†å¸ƒç‰¹å¾çš„åŒºåˆ«ï¼Œå¾—å‡ºçš„è§£å†³æ–¹æ¡ˆï¼‰</p><h4 id=sparse-attention>Sparse attention</h4><p><strong>SparseViT</strong>ï¼Œç”¨ L2 æ¿€æ´»å€¼æ¥ç¡®å®šçª—å£çš„é‡è¦ç¨‹åº¦ã€‚</p><p>åˆ†å‡ºä¸åŒçš„é‡è¦ç¨‹åº¦ï¼Œå¯ä»¥åœ¨ä¸åŒå±‚ä½¿ç”¨ä¸åŒçš„ç¨€ç–åº¦ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527205729628.png width=2495 height=969 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527205729628_hu_46d1510dec38fac5.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527205729628_hu_f0fada0766d3f7c8.png 1024w" loading=lazy alt=image-20250527205729628 class=gallery-image data-flex-grow=257 data-flex-basis=617px></p><h3 id=self-supervised-learning-for-vit>Self-supervised learning for ViT</h3><p>æ€ä¹ˆåˆ©ç”¨unlabeled data</p><h4 id=contrastive-learning>Contrastive learning</h4><p>æ‹¿åŒä¸€å¼ å›¾ç‰‡çš„ä¸åŒ cropï¼Œå»åšåŒä¸€çš„ã€æ‹‰è¿‘çš„ lossï¼Œä¸åŒçš„å›¾ç‰‡åšæ‹‰è¿œçš„ lossã€‚</p><p>åœ¨å°æ•°æ®é›†ä¸Šè®­çš„æ—¶å€™ï¼ŒSLï¼Œæ›´å¤§çš„æ¨¡å‹å¯èƒ½å¾—ä¸åˆ°æ›´å¥½çš„ç»“æœï¼Œä½†æ˜¯ç”¨äº†å¯¹æ¯”å­¦ä¹ è‡ªç›‘ç£self-SLï¼ˆCLï¼‰ä¼šæ›´å¥½</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527213845273.png width=2154 height=1308 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527213845273_hu_3ecd920e2eecce9a.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527213845273_hu_3431e3c37c1c0094.png 1024w" loading=lazy alt=image-20250527213845273 class=gallery-image data-flex-grow=164 data-flex-basis=395px></p><p>å¤šæ¨¡æ€å¯¹æ¯”å­¦ä¹  <strong>CLIP</strong></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527214423449.png width=1936 height=1175 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527214423449_hu_6a8f7867d22e3f40.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527214423449_hu_5f38de318095fbfd.png 1024w" loading=lazy alt=image-20250527214423449 class=gallery-image data-flex-grow=164 data-flex-basis=395px></p><h4 id=masked-image-modeling>Masked image modeling</h4><p>ç±»ä¼¼ä¸bertçš„é‡å»ºé®æŒ¡ï¼ŒMask Language Models, MLMã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527215151473.png width=2446 height=1185 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527215151473_hu_c9f6bc9a3f567fdc.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527215151473_hu_85855e8fd97ee5f0.png 1024w" loading=lazy alt=image-20250527215151473 class=gallery-image data-flex-grow=206 data-flex-basis=495px></p><p>Heavy encoderåªç¼–ç æœªé®çš„å›¾ç‰‡ï¼Œliteä¼šç¼–ç æ‰€æœ‰ã€‚</p><p>mask 70~75% sweet spot</p><p>ä½œä¸ºå¯¹æ¯”ï¼Œbert æ¯”ç‡æ˜¯ 15%ï¼Œå›¾ç‰‡å†—ä½™å¤§ã€‚</p><h3 id=vit--autoregressive-image-generation>ViT & Autoregressive Image Generation</h3><p>Autoregressive ARã€‚</p><h4 id=hybrid-autoregressive-transformer-hart>Hybrid Autoregressive Transformer (HART)</h4><p>å’Œæ–°ç›®æ ‡æ˜¯å‡å°‘è¿­ä»£æ¬¡æ•°æ¥åŠ é€Ÿã€‚</p><p>æœ‰ä¸‰ç§ä¸åŒçš„ç”Ÿæˆæ–¹å¼ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527220043178.png width=2560 height=1147 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527220043178_hu_7be52bf7a8cf119a.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527220043178_hu_b80baa76c9a6dd8b.png 1024w" loading=lazy alt=image-20250527220043178 class=gallery-image data-flex-grow=223 data-flex-basis=535px></p><p>æ–‡å­—ç”Ÿæˆå’Œå›¾åƒç”Ÿæˆçš„ä¸åŒï¼Œè¯­è¨€æœ‰è¯æ±‡è¡¨ï¼Œç¦»æ•£çš„ï¼Œè€Œå›¾åƒæ˜¯è¿ç»­çš„ã€‚</p><p>è¦ç”¨ä¸€ç§ARæ¶æ„æŠŠè¿™ä¸¤ç§æ¨¡æ€ç»Ÿä¸€èµ·æ¥ï¼Œå°±éœ€è¦ä¸€ç§ç¦»æ•£çš„å›¾åƒæ ‡è®°ï¼Œå°±å¯ä»¥ä½¿ç”¨åŒæ ·çš„lossäº†ã€‚</p><p>å…·ä½“çš„ï¼ŒåŠ å…¥vector quantized, VQ encoder/decoderå’Œ codebookï¼Œä¸€ä¸ªåƒç´ çš„vectoré‡åŒ–æ˜¯ä¸€ä¸ªæ ‡é‡ï¼ˆé‡åŒ–ï¼‰ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527220442830.png width=2249 height=1158 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527220442830_hu_13e1d2a242348d6e.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527220442830_hu_1df5e57a10919bf4.png 1024w" loading=lazy alt=image-20250527220442830 class=gallery-image data-flex-grow=194 data-flex-basis=466px></p><p>ç»éªŒæ³•åˆ™ï¼šä¸€æ¬¡æ€§ç”Ÿæˆæ›´å¤šçš„æ ‡è®°tokenã€‚</p><p>Visual Autoregressiveï¼Œ<strong>VAR</strong>ï¼Œå¼•å…¥æ–°çš„æ ‡è®°ç”Ÿæˆæ–¹æ³•ã€‚</p><p>å…ˆä¸ºä¸€å¼ å›¾åƒç”Ÿæˆä¸€ä¸ªtokenï¼Œå’Œåˆ†æˆ2x2&mldr;ï¼Œå¤šä¸ªç²’åº¦ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527221348853.png width=2345 height=1136 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527221348853_hu_581321086b9e42b9.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527221348853_hu_6ae4d039a8969ad3.png 1024w" loading=lazy alt=image-20250527221348853 class=gallery-image data-flex-grow=206 data-flex-basis=495px></p><p>ä»–çš„ attention maskï¼Œä¹Ÿæœ‰å˜åŒ–ï¼ˆæ²¡ç‰¹åˆ«ç†è§£</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527221517972.png width=2461 height=1014 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527221517972_hu_261d90ba519cb7e1.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527221517972_hu_4200f1478c90e94.png 1024w" loading=lazy alt=image-20250527221517972 class=gallery-image data-flex-grow=242 data-flex-basis=582px></p><p>ä¸è¿‡æ•ˆæœæ²¡é‚£ä¹ˆå¥½ã€‚</p><p>Hybrid Image Tokenizationï¼Œ<strong>HART</strong></p><p>å°çš„duffusion modelï¼Œ<strong>residual duffusion</strong>æ®‹å·®æ‰©æ•£ï¼Œæ¥å­¦ä¹ ç¦»æ•£tokenå’Œè¿ç»­tokençš„åŒºåˆ«ï¼ˆå› ä¸ºç¦»æ•£tokenè‡ªå·±å­¦ç»†ç²’åº¦çš„å¾ˆå›°éš¾ï¼‰</p><p>è®­ç»ƒæ—¶å€™é‡‡æ ·50% 50%ï¼Œè®©ä¸¤è€…åœ¨ decoder ä¸­å¤„äºåŒä¸€ç©ºé—´</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527221835339.png width=2528 height=1193 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527221835339_hu_dfbb8c936074bfcf.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527221835339_hu_980cd3d3f6daeb0c.png 1024w" loading=lazy alt=image-20250527221835339 class=gallery-image data-flex-grow=211 data-flex-basis=508px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527222340548.png width=2560 height=801 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527222340548_hu_a07e2ce693b561b0.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527222340548_hu_9db7c94c679df433.png 1024w" loading=lazy alt=image-20250527222340548 class=gallery-image data-flex-grow=319 data-flex-basis=767px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527222609940.png width=2425 height=894 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527222609940_hu_fd3c3664d2e5644.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250527222609940_hu_8b67a659dbdc0890.png 1024w" loading=lazy alt=image-20250527222609940 class=gallery-image data-flex-grow=271 data-flex-basis=651px></p><h2 id=lec17-gan-video-point-cloud>Lec17 GAN, Video, Point Cloud</h2><h3 id=efficient-gan>Efficient GAN</h3><p>æ˜¾ç„¶ä¸ºäº†åŠ é€Ÿæ¨ç†ï¼Œå‹ç¼© generator</p><p>un/conditional GAN</p><p>æä¾›æ¡ä»¶ï¼ˆclass, segmentation map, strokes/éšæœºå™ªå£°</p><p>GAN æ¯”è¯†åˆ«çš„æ¨¡å‹è´µ</p><h4 id=gan-compression>GAN Compression</h4><p>é‡å»ºreconstruction lossï¼Œè’¸é¦ï¼ˆä¸­é—´ç‰¹å¾å›¾ï¼‰distillation lossï¼ŒcGAN lossï¼ˆçœŸå®å›¾ç‰‡å’Œç”Ÿæˆå›¾ç‰‡ï¼‰</p><h4 id=anycost-gan>AnyCost GAN</h4><p>StyleGAN2åªé‡‡æ ·æœ€é«˜åˆ†è¾¨ç‡ï¼ŒMSG-GANé‡‡æ ·æ‰€æœ‰åˆ†è¾¨ç‡ï¼Œéšæœºé‡‡æ ·</p><p>ä¸åŒé€šé“æ•°é‡ï¼Œå¢åŠ è’¸é¦æŸå¤±ï¼Œå¯ä»¥ä½¿å¾—åˆ å»é€šé“åçš„å›¾ç‰‡æ ·å¼ç±»ä¼¼</p><p>åŒæ ·çš„åˆ¤åˆ«å™¨å¯¹äºä¸åŒçš„åˆ†è¾¨ç‡æ•ˆæœä¸ä¸€å®šéƒ½å¥½</p><h4 id=differentiable-augmentation-for-data-efficient-gans>Differentiable Augmentation for Data-Efficient GANs</h4><p>éœ€è¦æ”¶é›†å¾ˆå¤šæ•°æ®ï¼Œè´µ</p><p>å›¾ç‰‡å¢å¼º</p><p>åªå¯¹çœŸå®å›¾ç‰‡å¢å¼ºï¼Œé¢œè‰²æ”¹å˜ï¼Œå›¾ç‰‡ä½ç½®shiftï¼Œéƒ¨åˆ†cutoutï¼Œä¼šå¯¼è‡´ç”Ÿæˆçš„å›¾ç‰‡ä¹Ÿé•¿è¿™æ ·ï¼Œæ‰€ä»¥ä¸å¥½</p><p>ï¼ˆè®­ç»ƒDçš„æ—¶å€™ï¼‰åœ¨ç”Ÿæˆåéƒ½åº”ç”¨ï¼Œåˆ¤åˆ«å™¨å¯¹è½¬æ¢åçš„å›¾ç‰‡çš„åˆ¤åˆ«ç‡é«˜ï¼Œå¯¹åŸå›¾ç‰‡ Gï¼Œæ•ˆæœä¸å¥½</p><p>åœ¨è®­ç»ƒï¼ˆGå’ŒDçš„æ—¶å€™ï¼‰éƒ½åˆ¤åˆ«å‰è¿ç”¨å›¾ç‰‡è½¬æ¢</p><h3 id=efficient-video-understanding>Efficient Video Understanding</h3><p>temporal modeling æ—¶é—´å»ºæ¨¡</p><h4 id=2d-cnn>2D CNN</h4><p>é‡‡æ ·å›¾ç‰‡ï¼Œå†aggregateï¼Œaverage max</p><p>åŒæµç½‘ç»œ spatial + temporalï¼Œoptical flow</p><p>2D CNN + Post-fusion(e.g. LSTM) ï¼Œlow level æ˜¯ç‹¬ç«‹å¤„ç†çš„</p><p>å¥½å¤„ï¼Œè®¡ç®—é«˜æ•ˆï¼Œé‡å¤åˆ©ç”¨å›¾ç‰‡è¯†åˆ«2D CNN</p><p>åå¤„ï¼Œæ—¶é—´ä¿¡æ¯ï¼Œå…‰æµè®¡ç®—é‡å¤§ï¼Œlate fusion æ— æ³•å»ºæ¨¡ low level</p><h4 id=3d-cnn>3D CNN</h4><p>C3Dï¼Œå‚æ•°é‡å˜å¤§</p><p>I3Dï¼Œç”¨2D CNNæ¥åˆå§‹åŒ–3D CNNï¼Œinflationï¼Œå°±é‡å¤</p><p>å¥½å¤„ï¼Œæ—¶ç©ºä¿¡æ¯ä¸€èµ· ï¼Œå„ä¸ªçº§åˆ«çš„ä¿¡æ¯éƒ½å¯ä»¥å»ºæ¨¡</p><p>åå¤„ï¼Œæ¨¡å‹å¤§å°ï¼Œè®¡ç®—é‡éƒ½å˜å¤§</p><h4 id=tsm-temporal-shift-module>TSM (Temporal Shift module)</h4><p>ä¸ç”¨è®¡ç®—é‡ã€å‚æ•°æ¥ä¸ºæ—¶é—´å»ºæ¨¡</p><p>offlineï¼Œbi-direction å¯ä»¥åšåŒå‘</p><p>onlineï¼Œuni-direction åšå•å‘</p><p>shift çš„æ¯”ä¾‹ï¼Œä¸èƒ½å¤ªå¤šä¹Ÿä¸èƒ½å¤ªå°‘</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250601153930427.png width=1436 height=536 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250601153930427_hu_6ad4098158a39e88.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250601153930427_hu_ea789585a809da1b.png 1024w" loading=lazy alt=image-20250601153930427 class=gallery-image data-flex-grow=267 data-flex-basis=642px></p><h3 id=efficient-point-cloud-understanding>Efficient Point Cloud Understanding</h3><p>ç¨€ç–ï¼Œéè§„æ•´ï¼›åº”ç”¨åœºæ™¯ç®—åŠ›é™åˆ¶</p><h4 id=pvcnn--spvcnn>PVCNN / SPVCNN</h4><p>Point-Voxelï¼ŒPoint localï¼ŒVoxel globalï¼ˆç¨€ç–æ‰0ï¼Œè®© point å»åšé«˜ç²’åº¦ï¼‰</p><p>3D NAS SPV</p><h4 id=bevfusion-birds-eye-view>BEVFusion (Bird&rsquo;s-Eye View)</h4><p>Dense æ‘„åƒå¤´ï¼ŒSparse é›·è¾¾ï¼Œäº§ç”ŸBEV + 3D å¯¹è±¡æ£€æŸ¥</p><h2 id=lec18-diffusion-model>Lec18 Diffusion Model</h2><h3 id=basics-of-diffusion-model>Basics of diffusion model</h3><h4 id=denoising-diffusion-models>Denoising diffusion models</h4><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612144431428.png width=2460 height=1317 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612144431428_hu_4c9849eb4d03cc76.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612144431428_hu_fe1f8a0e686762e5.png 1024w" loading=lazy alt=image-20250612144431428 class=gallery-image data-flex-grow=186 data-flex-basis=448px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612144612691.png width=2143 height=530 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612144612691_hu_af8dd42a3d6e0904.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612144612691_hu_496728e371b5621b.png 1024w" loading=lazy alt=image-20250612144612691 class=gallery-image data-flex-grow=404 data-flex-basis=970px></p><p>è®­ç»ƒç®—æ³•</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612144858452.png width=2363 height=1065 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612144858452_hu_386987a032bd871c.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612144858452_hu_ad5c432142e70e58.png 1024w" loading=lazy alt=image-20250612144858452 class=gallery-image data-flex-grow=221 data-flex-basis=532px></p><p>é‡‡æ ·ç®—æ³•</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612145637150.png width=2535 height=1206 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612145637150_hu_4b99adf85c10d09.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612145637150_hu_3a37a941badb5d28.png 1024w" loading=lazy alt=image-20250612145637150 class=gallery-image data-flex-grow=210 data-flex-basis=504px></p><h4 id=conditional-diffusion-models>Conditional diffusion models</h4><h5 id=scalar-condition>Scalar condition</h5><p>Class IDï¼Œencodeï¼Œembeddingï¼ŒåŠ åˆ°ç‰¹å¾å›¾ä¸Šï¼ˆæˆ–è€…embedding scale å’Œ biasæ›´åŠ å¤æ‚ï¼‰
<img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150234787.png width=2339 height=1143 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150234787_hu_71da306afb27c118.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150234787_hu_966cfad1a55d2501.png 1024w" loading=lazy alt=image-20250612150234787 class=gallery-image data-flex-grow=204 data-flex-basis=491px></p><h5 id=text-condition>Text condition</h5><h6 id=cross-attention>Cross Attention</h6><p>å›¾åƒå’Œæ–‡æœ¬å¹¶ä¸å¯¹ç§°ï¼Œå›¾ç‰‡ Qï¼Œæ–‡æœ¬ K V</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150219729.png width=2315 height=988 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150219729_hu_667fab28f0805788.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150219729_hu_fd9b09f37ef00e9e.png 1024w" loading=lazy alt=image-20250612150219729 class=gallery-image data-flex-grow=234 data-flex-basis=562px></p><h6 id=joint-attention>Joint Attention</h6><p>æ–‡æœ¬å’Œå›¾åƒå¯¹ç§°</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150515135.png width=2467 height=1023 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150515135_hu_110f64eff5f7e32f.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150515135_hu_704b293914362bd9.png 1024w" loading=lazy alt=image-20250612150515135 class=gallery-image data-flex-grow=241 data-flex-basis=578px></p><h6 id=single-self-attention>Single Self Attention</h6><p>Early fusion</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150613830.png width=1778 height=922 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150613830_hu_9486d50f30767f82.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150613830_hu_9cb1c012468a4a20.png 1024w" loading=lazy alt=image-20250612150613830 class=gallery-image data-flex-grow=192 data-flex-basis=462px></p><h5 id=pixel-wise-condition>Pixel-wise condition</h5><p>Control Net</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150841930.png width=2480 height=928 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150841930_hu_b3d5a4ab739d27e5.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612150841930_hu_a281c2b82c87a8e6.png 1024w" loading=lazy alt=image-20250612150841930 class=gallery-image data-flex-grow=267 data-flex-basis=641px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612151008236.png width=2309 height=1188 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612151008236_hu_3b2bd718a74684a6.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612151008236_hu_41410bd422f6b51e.png 1024w" loading=lazy alt=image-20250612151008236 class=gallery-image data-flex-grow=194 data-flex-basis=466px></p><p>å…³äºå¤šæ ·æ€§å’Œè´¨é‡ï¼Œå¢åŠ  c çš„åˆ†ç±»å™¨ï¼Œå¼ºåº¦</p><p>classifier-free guidance</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612151941365.png width=2476 height=1188 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612151941365_hu_d407e2b5001a1c17.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612151941365_hu_336ef96be56acc34.png 1024w" loading=lazy alt=image-20250612151941365 class=gallery-image data-flex-grow=208 data-flex-basis=500px></p><h4 id=latent-diffusion-models>Latent diffusion models</h4><p>è¾ƒå°‘è®¡ç®—é‡</p><p>é¢„è®­ç»ƒ VAEï¼Œç¼–ç åˆ°æ½œç©ºé—´ diffusionï¼Œæœ€åå†è§£ç </p><p>å­¦ä¹ ç›®æ ‡æ˜¯ä¸€æ ·çš„ï¼Œé¢„æµ‹å™ªéŸ³</p><p>é‡‡æ ·ä¹Ÿæ˜¯ç±»ä¼¼</p><p>åˆ†è¾¨ç‡å‹ç¼©çš„è¶Šå¤šï¼Œè¿è¡Œçš„è¶Šå¿«</p><h5 id=deep-compression-autoencoder-dc-ae-f64>Deep Compression Autoencoder (DC-AE) f64</h5><p>å‹ç¼© 64 å€ï¼Œè€ƒè™‘ Attention å¹³æ–¹ï¼Œå‡å°‘çš„è®¡ç®—æœ‰ 4k å€</p><p>å…·ä½“åœ°ï¼Œé€šè¿‡æ˜¾å¼ space-to-channel / channel-to-spaceï¼Œæ®‹å·®è‡ªç¼–ç ï¼Œä½¿å¾—æ›´åŠ ç¨³å®š</p><p>å› ä¸ºè‡ªç¼–ç å™¨è¦çš„è®¡ç®—é‡å˜å¤§ï¼Œä¸ºäº†å‡å°‘è®¡ç®—é‡ï¼Œä½¿ç”¨åˆ†å±‚ç¨€ç–è°ƒä¼˜çš„æ–¹å¼ï¼Œå‡å°‘è®¡ç®—é‡</p><p>è¿˜æœ‰ Linear Attentionï¼Œä½¿ç”¨å° LLM ä½œä¸ºæ–‡æœ¬ç¼–ç å™¨ï¼Œkernel fusionï¼Œflow based PPM æ±‚è§£å™¨</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612154044926.png width=2110 height=1057 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612154044926_hu_7c42e0313c571d0e.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612154044926_hu_461e724981ea8eb1.png 1024w" loading=lazy alt=image-20250612154044926 class=gallery-image data-flex-grow=199 data-flex-basis=479px></p><h4 id=image-editing>Image editing</h4><h5 id=stroke-base-editing>Stroke-Base Editing</h5><p>é€šè¿‡å¢åŠ å™ªå£°ï¼Œä½¿å¾—è‰å›¾å’Œå›¾åƒæ¥è¿‘ï¼Œç„¶åè§£å‡ºæ¥ï¼ˆå…·ä½“è®­ç»ƒæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿï¼‰</p><p>SDEdit</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612155420892.png width=2375 height=811 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612155420892_hu_8e4cc2a362f5e20c.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612155420892_hu_d064d7abb01559cd.png 1024w" loading=lazy alt=image-20250612155420892 class=gallery-image data-flex-grow=292 data-flex-basis=702px></p><h4 id=model-personalization>Model personalization</h4><p>äººç‰©ä¸€è‡´æ€§</p><p>DreamBoothï¼Œé€šè¿‡ finetuneï¼Œç”¨ç‰¹åˆ«çš„æ ‡è¯†ç¬¦æ¥ä»£è¡¨è¿™ä¸ªç±»åˆ«</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612155712527.png width=2381 height=1152 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612155712527_hu_67bded98bfde30bd.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612155712527_hu_14afe4c4e8004013.png 1024w" loading=lazy alt=image-20250612155712527 class=gallery-image data-flex-grow=206 data-flex-basis=496px></p><p>ä½†æ˜¯ï¼Œåªèƒ½å¯¹æ¯ä¸€ä¸ªæ–°çš„ç±»åˆ«éƒ½éœ€è¦å»finetuneï¼Œcostly</p><p>åç»­ä¹Ÿæœ‰ training-free çš„æŠ€æœ¯</p><h3 id=fast-sampling-techniques>Fast sampling techniques</h3><p>èƒ½å¦å¢å¤§æ­¥å¹…ï¼Œå‡å°‘æ­¥éª¤</p><h4 id=denoising-diffusion-implicit-models>Denoising diffusion implicit models</h4><p>ä¹‹å‰çš„é©¬å°”å¯å¤«Markovian åªä¾èµ–å‰ä¸€ä¸ªæ­¥éª¤ï¼Œå¢åŠ å’Œ x0 çš„å…³ç³»</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612160144368.png width=2213 height=1117 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612160144368_hu_eefef8c252c397ba.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612160144368_hu_105f32547e4feaa7.png 1024w" loading=lazy alt=image-20250612160144368 class=gallery-image data-flex-grow=198 data-flex-basis=475px></p><h4 id=distillation>Distillation</h4><p>æ¸è¿›è’¸é¦ï¼Œæ•™å¸ˆæ¨¡å‹ä¸€æ­¥ä¸€æ­¥ï¼Œå­¦ç”Ÿæ¨¡å‹ä»æ•™å¸ˆæ¨¡å‹çš„ä¸¤æ­¥é‡Œé¢è’¸é¦å­¦ä¹ æˆä¸€æ­¥ï¼Œç„¶åæ¸è¿›è’¸é¦ï¼Œå°±å¯ä»¥å‡å°‘æ­¥æ•°</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612160241743.png width=2130 height=1325 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612160241743_hu_e135cefd6a1da6a6.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612160241743_hu_c36cdf870d34dbb1.png 1024w" loading=lazy alt=image-20250612160241743 class=gallery-image data-flex-grow=160 data-flex-basis=385px></p><h3 id=acceleration-techniques>Acceleration techniques</h3><h4 id=sparsity>Sparsity</h4><p>ç¼–è¾‘åªç¼–è¾‘äº†ä¸€äº›ï¼Œä½†éœ€è¦å¯¹æ‰€æœ‰åƒç´ è¿›è¡Œè¿ç®—</p><p>SDEditï¼Œåªé‡æ–°è®¡ç®—æ”¹å˜çš„éƒ¨åˆ†ï¼Œåˆ«çš„éƒ¨åˆ†å¤ç”¨</p><p>Sparse Incremental Generative Engine (SIGE)</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612160639455.png width=2441 height=1247 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612160639455_hu_d6a9aebfe5f15ed3.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612160639455_hu_5d5fee72aeea92fb.png 1024w" loading=lazy alt=image-20250612160639455 class=gallery-image data-flex-grow=195 data-flex-basis=469px></p><p>Image Inpaintingï¼Œç±»ä¼¼ï¼ŒåŒæ—¶å¯ä»¥å®ç°äº¤äº’å¼</p><h4 id=quantization-1>Quantization</h4><p>SVDQuant</p><p>å’Œ LLM ä¸åŒï¼ŒDiffusion Model æ˜¯compute-boundï¼Œæ‰€ä»¥ weight-only quantization æ²¡åŠæ³•åŠ é€Ÿæ‰©æ•£æ¨¡å‹</p><p>ä½¿ç”¨ç±»ä¼¼ SmoothQuant çš„æ–¹å¼ï¼ŒæŠŠæ¿€æ´»å€¼çš„ outlier è½¬ç§»åˆ°æƒé‡ä¸Šï¼Œç„¶åæƒé‡ä½¿ç”¨ side (low rank) branch å»å…¨ç²¾åº¦ä¿æŒç²¾åº¦æŸå¤±ï¼Œç»è¿‡ SVDï¼Œå¼‚å¸¸å€¼å‡å°‘W4A4</p><p>åŒæ—¶ï¼Œå¦‚æœä½¿ç”¨ LoRA funetuningï¼Œå°±ä¸éœ€è¦é‡æ–°é‡åŒ–ï¼Œåœ¨åŸæœ¬çš„å…¨ç²¾åº¦ä¸Šè¿½åŠ ç§©å°±è¡Œäº†</p><p>ç®€å•å®ç°ï¼Œä¼šå¸¦æ¥ä¸å°çš„å…¶ä»–å¼€é”€ï¼Œkernel fusion æŠŠæ—æ”¯çš„ kernel åˆåœ¨åŸæœ¬çš„ kernel ä¸­ï¼Œç”±äºä»–ä»¬å…±äº«è¾“å…¥/è¾“å‡º</p><h4 id=parallelism>Parallelism</h4><p>DistriFusionï¼Œç›¸é‚»æ—¶é—´æˆ³çš„è¾“å…¥å®é™…ä¸Šå¾ˆç›¸ä¼¼ï¼Œå¯ä»¥é€šè¿‡é€šä¿¡æ—§çš„æ¿€æ´»å€¼ï¼Œæ¥ overlap é€šä¿¡ä¸è®¡ç®—</p><p>åŒæ—¶ï¼Œåœ¨æ›´é«˜çš„åˆ†è¾¨ç‡ä¸‹ï¼ŒåŠ é€Ÿæ¯”æ›´é«˜ï¼Œå› ä¸ºé€šä¿¡å¼€é”€æ›´å¤§ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612161913159.png width=2363 height=1041 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612161913159_hu_ed18db285ee356b.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250612161913159_hu_ac76f82f3f8298a.png 1024w" loading=lazy alt=image-20250612161913159 class=gallery-image data-flex-grow=226 data-flex-basis=544px></p><h2 id=lec19-distributed-training-1>Lec19 Distributed Training 1</h2><h3 id=background-and-motivation>Background and motivation</h3><p>æ¨¡å‹å¤§ï¼Œå¯¹äºå• GPU æ¥è¯´è®­ç»ƒæ—¶é—´å¤ªé•¿ï¼Œéœ€è¦å¤š GPU ååŒè®­ç»ƒ</p><h3 id=parallelization-methods-for-distributed-trainging>Parallelization methods for distributed trainging</h3><ul><li><p>Data parallelism</p><p>æ‹†åˆ†æ•°æ®ï¼Œå¤šä¸ª GPU ä¸Šçš„æ¨¡å‹æƒé‡æ˜¯å…±äº«çš„</p><p>partition data, sharing model</p></li><li><p>Pipeline Parallelism</p><p>æ‹†åˆ†æ¨¡å‹ï¼Œä¸€ä»½æ•°æ®ã€‚</p><p>æŒ‰ layer-dimension åˆ’åˆ†</p></li><li><p>Tensor Parallelism</p><p>æ‹†åˆ†æ¨¡å‹ï¼Œä¸€ä»½æ•°æ®ã€‚</p><p>æŒ‰ æ¿€æ´»å€¼ æ¥åˆ’åˆ†</p></li><li><p>Sequence Parallelism</p><p>data parallelism æ˜¯ batchï¼Œsequence parallelism æ˜¯ token</p></li></ul><h3 id=communication-primitives>Communication primitives</h3><ul><li><p><strong>One-to-One: Send and Recv</strong></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613165612939.png width=1962 height=1081 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613165612939_hu_d4fcbd4f319089e7.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613165612939_hu_133f2af03898a92d.png 1024w" loading=lazy alt=image-20250613165612939 class=gallery-image data-flex-grow=181 data-flex-basis=435px></p></li><li><p><strong>One-to-Many and Many-to-One: Scatter and Gather</strong></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613165825185.png width=2322 height=1055 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613165825185_hu_a5d6eda6815286c6.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613165825185_hu_f0fac2f144570faa.png 1024w" loading=lazy alt=image-20250613165825185 class=gallery-image data-flex-grow=220 data-flex-basis=528px></p></li><li><p><strong>Many-to-One and One-to-Many: Reduce and Broadcast</strong></p><p>Reduce å¯ä»¥çœ‹ä½œæ˜¯ Gather + Reduce å½’çº¦æ“ä½œ</p><p>Broadcast æ˜¯æŠŠå¼ é‡çš„å…¨éƒ¨éƒ½åˆ†å‘ç»™æ‰€æœ‰èŠ‚ç‚¹ï¼ŒScatter æ˜¯æŠŠä¸åŒéƒ¨åˆ†åˆ†å‘ç»™ä¸åŒèŠ‚ç‚¹</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613172900306.png width=2323 height=1156 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613172900306_hu_b9aaa7151ea0703a.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613172900306_hu_7b5f438c01c4650c.png 1024w" loading=lazy alt=image-20250613172900306 class=gallery-image data-flex-grow=200 data-flex-basis=482px></p></li><li><p><strong>Many-to-Many: All-Reduce and All-Gather</strong></p><p>All-Reduce å¯¹æ‰€æœ‰ workers åš Reduce</p><p>All-Gather å¯¹æ‰€æœ‰ workers åš Gather</p></li></ul><h3 id=data-parallelism>Data Parallelism</h3><h4 id=parameter-server>Parameter Server</h4><p>ä¸­å¿ƒåŒ–</p><ol><li>Workers pull model from Server</li><li>Workers push & sum to Server gradient</li><li>Server update model using gradient</li><li>Workers replicate / pull the updated model to update local copy</li></ol><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613164631712.png width=2508 height=1297 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613164631712_hu_44a83d3756b6b902.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613164631712_hu_e1bda9e5ec8296cc.png 1024w" loading=lazy alt=image-20250613164631712 class=gallery-image data-flex-grow=193 data-flex-basis=464px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613200509743.png width=2323 height=975 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613200509743_hu_f270c48467681b30.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613200509743_hu_d759adaabd3ad813.png 1024w" loading=lazy alt=image-20250613200509743 class=gallery-image data-flex-grow=238 data-flex-basis=571px></p><h4 id=å»ä¸­å¿ƒåŒ–çš„æ–¹æ³•>å»ä¸­å¿ƒåŒ–çš„æ–¹æ³•</h4><ul><li><p>Naive All-Reduce, Sequential</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613200734771.png width=2194 height=1125 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613200734771_hu_e4150071f0ac17f1.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613200734771_hu_ed4c3329af763a79.png 1024w" loading=lazy alt=image-20250613200734771 class=gallery-image data-flex-grow=195 data-flex-basis=468px></p></li><li><p>Better All-Reduce, Ring</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613200800292.png width=2473 height=1113 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613200800292_hu_a57ce8d6af8016.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613200800292_hu_3e3c58361e0f1fcd.png 1024w" loading=lazy alt=image-20250613200800292 class=gallery-image data-flex-grow=222 data-flex-basis=533px></p></li><li><p>Naive All-Reduce, Parallel Reduce</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613201020226.png width=2413 height=1114 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613201020226_hu_55e97c8644f0f44d.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613201020226_hu_d84e6a8de0c13d0f.png 1024w" loading=lazy alt=image-20250613201020226 class=gallery-image data-flex-grow=216 data-flex-basis=519px></p></li><li><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613201121123.png width=1884 height=634 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613201121123_hu_92926dfef16c07c1.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613201121123_hu_16e804aed20a0525.png 1024w" loading=lazy alt=image-20250613201121123 class=gallery-image data-flex-grow=297 data-flex-basis=713px></p></li><li><p>Recursive Halving All Reduce (Butterfly All Reduce)</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613201351600.png width=2458 height=1135 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613201351600_hu_5135e62de8c3a435.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613201351600_hu_25fadad1749f3052.png 1024w" loading=lazy alt=image-20250613201351600 class=gallery-image data-flex-grow=216 data-flex-basis=519px></p></li></ul><h3 id=reducing-memory-in-data-parallelism-zero-123-and-fsdp>Reducing memory in data parallelism: Zero-1/2/3 and FSDP</h3><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613202114941.png width=2448 height=1267 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613202114941_hu_5f384b2a345bcd48.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613202114941_hu_919c0cd187b17a6e.png 1024w" loading=lazy alt=image-20250613202114941 class=gallery-image data-flex-grow=193 data-flex-basis=463px></p><h3 id=pipeline-parallelism>Pipeline parallelism</h3><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613212924989.png width=2404 height=1172 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613212924989_hu_8e53d8ff76c7119e.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613212924989_hu_c4c6c32adc158858.png 1024w" loading=lazy alt=image-20250613212924989 class=gallery-image data-flex-grow=205 data-flex-basis=492px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613213026648.png width=2409 height=1158 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613213026648_hu_8f9e5f90e1a80b69.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613213026648_hu_a4cd5a6ad7dded2b.png 1024w" loading=lazy alt=image-20250613213026648 class=gallery-image data-flex-grow=208 data-flex-basis=499px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613213054283.png width=2379 height=994 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613213054283_hu_84a1d2cdabd6bd19.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613213054283_hu_dacd269c8198030f.png 1024w" loading=lazy alt=image-20250613213054283 class=gallery-image data-flex-grow=239 data-flex-basis=574px></p><h3 id=tensor-parallelism>Tensor parallelism</h3><p>ä» d_dim ç»´åº¦åˆ‡ï¼Œå‚ç›´åˆ‡ï¼Œå†æ°´å¹³åˆ‡</p><p>Scatter and All-Reduce</p><p>broadcast activation</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613214711506.png width=2400 height=1306 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613214711506_hu_a07381a63091d056.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613214711506_hu_2230fb72f7835f79.png 1024w" loading=lazy alt=image-20250613214711506 class=gallery-image data-flex-grow=183 data-flex-basis=441px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613214001072.png width=2094 height=1064 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613214001072_hu_240946dd6073a058.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613214001072_hu_446ff4c39cc4f32c.png 1024w" loading=lazy alt=image-20250613214001072 class=gallery-image data-flex-grow=196 data-flex-basis=472px></p><h3 id=sequence-parallelism>Sequence parallelism</h3><p>å¤„ç†é•¿ä¸‹æ–‡</p><p>æ¯”å¦‚æŠŠä¸€æœ¬ä¹¦çš„ä¸åŒç« èŠ‚åˆ†åˆ«åšï¼Œä½†æ˜¯æ³¨æ„åŠ›ä¸èƒ½äº’ç›¸è®¡ç®—ï¼Œåªæ˜¯å±€éƒ¨çš„è¯ï¼Œä¼šç¼ºå¤±ä¸Šä¸‹æ–‡ã€‚</p><h4 id=deepspeed-ulysses-solution-1-re-partition-data-in-attention-layers>DeepSpeed Ulysses (Solution 1: Re-partition data in Attention layers)</h4><p>All-to-All å…¨å¯¹å…¨é€šä¿¡å¼€é”€å¤§ï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šä¿¡æˆæœ¬é«˜ï¼›</p><p>æœ€å¤§å¹¶è¡Œåº¦ï¼Ÿä¼šå—åˆ°æ¨¡å‹çš„å¤šå¤´æ³¨æ„åŠ›çš„å¤´çš„ä¸ªæ•°</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613215341718.png width=2478 height=1347 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613215341718_hu_5139d54be6ec48cc.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613215341718_hu_b1fde7d1ed26c759.png 1024w" loading=lazy alt=image-20250613215341718 class=gallery-image data-flex-grow=183 data-flex-basis=441px></p><h4 id=ring-attentionsolution-2-ring-attention>Ring Attention(Solution 2: Ring Attention)</h4><p>äº¤æ¢ KV1 KV2 KV3</p><p>å¹¶è¡Œåº¦ä¸å†å— head_num é™åˆ¶</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613220222536.png width=2248 height=1042 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613220222536_hu_6a4567cf0091b1c7.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250613220222536_hu_ca81ca5fb67b545d.png 1024w" loading=lazy alt=image-20250613220222536 class=gallery-image data-flex-grow=215 data-flex-basis=517px></p><p>Longvillaï¼Œç»“åˆè¿™ä¸¤ç§æ–¹æ³•ï¼Œåœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸­ï¼Œç”¨ Ulyssesï¼ŒèŠ‚ç‚¹ä¹‹é—´ç”¨ Ring Attentionã€‚</p><p>ï¼ˆèŠ‚ç‚¹å†…éƒ¨é€šä¿¡é«˜ï¼‰</p><h2 id=lec20-distributed-training-2>Lec20 Distributed Training 2</h2><h3 id=hybrid-mixed-parallelism-and-how-to-auto-parallelize>Hybrid (mixed) parallelism and how to auto-parallelize</h3><h4 id=2d-parallelism>2D Parallelism</h4><ul><li><p>Outer: DP</p><p>Inner: PP</p></li><li><p>Outer: PP</p><p>Inner: TP</p></li><li><p>Intra-node: all-to-all repartition</p><p>Inter-node: ring attention</p></li></ul><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614012437333.png width=1910 height=1107 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614012437333_hu_6f693826f0f91bda.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614012437333_hu_10197c568b844492.png 1024w" loading=lazy alt=image-20250614012437333 class=gallery-image data-flex-grow=172 data-flex-basis=414px></p><h4 id=3d-parallelism>3D Parallelism</h4><ul><li>PP + TP + DP</li></ul><h4 id=how-to-auto-parallelize>How to Auto Parallelize</h4><p>æ¨¡å‹å¤ªå¤§ï¼Œä¸èƒ½æ”¾å•æœºï¼›PP</p><p>æ¨¡å‹å±‚å¤ªå¤§ï¼Œä¸èƒ½æ–¹å•æœºï¼›TP</p><h4 id=alpa-a-unified-compiler-for-distributed-training>Alpa: A Unified Compiler for Distributed Training</h4><p>æœç´¢ç©ºé—´å¤§ï¼Œåˆ†å±‚æœç´¢ç©ºé—´ Hierarchical Spaceã€‚</p><p>Inter-op Parallelism</p><p>Intra-op Parallelism</p><p>Costï¼Œè®¡ç®—æˆæœ¬ã€é€šä¿¡æˆæœ¬ã€æ•°æ®é‡åˆ†å¸ƒæˆæœ¬</p><p>ï¼ˆé‚£è¿˜æœ‰è¯´æ³•å—ï¼Ÿè¿™ä¸ªè®¾è®¡ï¼‰</p><h3 id=understand-the-bandwidth-and-latency-bottleneck-of-distributed-training>Understand the bandwidth and latency bottleneck of distributed training</h3><p>é€šä¿¡å¾ˆé‡è¦ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614013903028.png width=2121 height=467 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614013903028_hu_ca07c8b785348800.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614013903028_hu_40298beacfbd3352.png 1024w" loading=lazy alt=image-20250614013903028 class=gallery-image data-flex-grow=454 data-flex-basis=1090px></p><p><strong>ä¼°ç®—å»¶è¿Ÿ</strong></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614014017059.png width=2213 height=1198 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614014017059_hu_f58ca66a5b265b56.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614014017059_hu_4313c5c87ac60be7.png 1024w" loading=lazy alt=image-20250614014017059 class=gallery-image data-flex-grow=184 data-flex-basis=443px></p><h3 id=gradient-compression-overcome-the-bandwidth-bottleneck>Gradient compression: overcome the bandwidth bottleneck</h3><h4 id=gradient-prunning>Gradient Prunning</h4><h5 id=sparse-communication-ç¨€ç–é€šä¿¡>Sparse Communication ç¨€ç–é€šä¿¡</h5><p>ç»“åˆå±€éƒ¨æ¢¯åº¦ç´¯ç§¯çš„æ¢¯åº¦å‰ªæ</p><ul><li><p>åª send top-k æ¢¯åº¦ by magnitude</p></li><li><p>ä¿æŒæœª sendï¼ˆæ²¡æœ‰åˆ° top-k çš„ï¼‰ä½œä¸º error feedback (residual)</p><p>ä¿ç•™æ®‹å·®ï¼Œç›´åˆ°ç´¯ç§¯åˆ°é˜ˆå€¼ ï¼ˆæ¢¯åº¦è£åˆ‡ï¼‰</p></li></ul><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614021915785.png width=1153 height=542 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614021915785_hu_df335455ec4a0161.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614021915785_hu_59ba5690634140fb.png 1024w" loading=lazy alt=image-20250614021915785 class=gallery-image data-flex-grow=212 data-flex-basis=510px></p><p>å¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p><ul><li><p>Momentum åŠ¨é‡æœºåˆ¶</p><p>ç›´æ¥ç´¯ç§¯æ¢¯åº¦ï¼Œä¼šå¯¼è‡´ä¼˜åŒ–æ–¹å‘çš„åç§»</p><p><strong>åº”è¯¥ç´¯ç§¯é€Ÿåº¦ï¼Œè€Œéæ¢¯åº¦</strong></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614014930010.png width=1773 height=869 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614014930010_hu_c0dd3cf88bcd543d.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614014930010_hu_a1213cc14908ac35.png 1024w" loading=lazy alt=image-20250614014930010 class=gallery-image data-flex-grow=204 data-flex-basis=489px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614015158377.png width=1695 height=788 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614015158377_hu_500013976071b3f5.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614015158377_hu_61c41ce8123f8908.png 1024w" loading=lazy alt=image-20250614015158377 class=gallery-image data-flex-grow=215 data-flex-basis=516px></p></li></ul><h5 id=deep-gradient-compression>Deep Gradient Compression</h5><p>warm up training</p><p>åœ¨è®­ç»ƒæ—©æœŸï¼Œæƒé‡æ”¹å˜å¤§ï¼›warm up learning rate</p><p>ç´¯ç§¯æ¢¯åº¦ä¼šåŠ å‰§é—®é¢˜ï¼›warm up sparsity</p><p>æŒ‡æ•°é€æ¸å¢å¤§ï¼Œä¿æŒç¨³å®šã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614015736570.png width=725 height=529 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614015736570_hu_18c15fdca4c025cd.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614015736570_hu_ec110903f60e0cb9.png 1024w" loading=lazy alt=image-20250614015736570 class=gallery-image data-flex-grow=137 data-flex-basis=328px></p><p>æ¢¯åº¦å‹ç¼©æ¯”å¯ä»¥åˆ°å¾ˆé«˜ï¼Œ99.9%ï¼Œæ²¡æœ‰1000xï¼Ÿç´¢å¼•å¼€é”€ã€bias åç½®æ²¡æœ‰å‰ªæï¼Œ<strong>åç½®å¯¹æ®‹å·®è®­ç»ƒå¾ˆé‡è¦</strong>ã€‚</p><h5 id=powersgd-low-rank-gradient-compression>PowerSGD: Low-Rank Gradient Compression</h5><p><strong>é—®é¢˜ï¼šç¨€ç–æ¢¯åº¦ï¼Œåœ¨ all-reduce ç¯èŠ‚ä¼šå˜å¾—è¶Šæ¥å¯†é›†</strong></p><p>é‡‡ç”¨å›ºå®šç¨€ç–æ¨¡å¼ï¼Œç²—ç²’åº¦ç¨€ç–ã€‚</p><p>ç”¨ä½ç§©åˆ†è§£ï¼Œæ¥å›ºå®šç¨€ç–æ¨¡å¼ï¼Œç²—ç²’åº¦ç¨€ç–ã€‚</p><h4 id=gradient-quantization>Gradient Quantization</h4><h5 id=1-bit-sgd>1-Bit SGD</h5><p>æŠŠæ¢¯åº¦é‡åŒ–ä¸º 1 bitï¼Œé›¶é˜ˆå€¼ï¼ŒåŒæ—¶ä¿ç•™ delta å€¼ä½œä¸ºæ®‹å·®ï¼Œç¼“è§£è¯¯å·®ï¼ˆç´¯ç§¯åˆ°é˜ˆå€¼ï¼Œç›´æ¥åŠ å›ï¼‰ã€‚</p><p>æ¯ä¸€åˆ—éƒ½å¢åŠ ä¸€ä¸ª fp32 çš„ç¼©æ”¾å› å­</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022206527.png width=1340 height=550 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022206527_hu_33e3a6a0be2b784.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022206527_hu_6358c5de2067400f.png 1024w" loading=lazy alt=image-20250614022206527 class=gallery-image data-flex-grow=243 data-flex-basis=584px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022215979.png width=1369 height=654 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022215979_hu_13c50d7a58cf59b0.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022215979_hu_cfd70140f1589f40.png 1024w" loading=lazy alt=image-20250614022215979 class=gallery-image data-flex-grow=209 data-flex-basis=502px></p><h5 id=threshold-quantization>Threshold Quantization</h5><p>è®¾ç½® tauï¼Œå¤§äº tau ä¸º tauï¼Œå°äº -tau ä¸º -tauï¼Œä¹‹é—´ä¸º 0</p><p>éœ€è¦ç»éªŒé€‰æ‹© tau å€¼ï¼ŒåŒæ ·æœ‰ç´¯ç§¯è¯¯å·®çš„æœºåˆ¶</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022458482.png width=1168 height=535 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022458482_hu_4772a4f99a7d86d2.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022458482_hu_526326e0ef267f5a.png 1024w" loading=lazy alt=image-20250614022458482 class=gallery-image data-flex-grow=218 data-flex-basis=523px></p><h5 id=terngrad>TernGrad</h5><p>é‡åŒ– g_i / max(g) ä¸º 0, 1, -1 ï¼Œä»¥æ¦‚ç‡æ¥éšæœºé‡åŒ–ï¼ŒæœŸæœ›ä¸€è‡´ï¼Œä¸éœ€è¦ç´¯ç§¯è¯¯å·®ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022659938.png width=1124 height=613 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022659938_hu_bce9817bfcff6245.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022659938_hu_2f40ce47452d16fa.png 1024w" loading=lazy alt=image-20250614022659938 class=gallery-image data-flex-grow=183 data-flex-basis=440px></p><h3 id=delayed-gradient-update-overcome-the-latency-bottleneck>Delayed gradient update: overcome the latency bottleneck</h3><h4 id=bandwidth-vs-latency>Bandwidth vs. Latency</h4><p>å¸¦å®½å®¹æ˜“æå‡ï¼Œå‰ªæé‡åŒ–ã€ç¡¬ä»¶æå‡ï¼›</p><p>å»¶è¿Ÿç”±ç‰©ç†é™åˆ¶ï¼Œè¢«å…‰é€Ÿé™åˆ¶</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022852163.png width=1367 height=506 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022852163_hu_3bb4127c97dc7a1d.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022852163_hu_1fe97341a227314d.png 1024w" loading=lazy alt=image-20250614022852163 class=gallery-image data-flex-grow=270 data-flex-basis=648px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022909511.png width=1451 height=568 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022909511_hu_4640f795858f9bd1.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614022909511_hu_6320affbd71d958a.png 1024w" loading=lazy alt=image-20250614022909511 class=gallery-image data-flex-grow=255 data-flex-basis=613px></p><p>å»¶è¿Ÿé«˜ï¼ŒåŒæ­¥å»¶è¿Ÿä¼šå˜é«˜ã€‚</p><p>Delayed Gradient Averaging</p><p>è¶…è¿‡å¤ªå¤šæ­¥æ˜¯ä¸è¡Œçš„ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614030644450.png width=953 height=443 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614030644450_hu_2288e141cd40551d.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614030644450_hu_3c7109830e44853.png 1024w" loading=lazy alt=image-20250614030644450 class=gallery-image data-flex-grow=215 data-flex-basis=516px></p><p>æœ€æ–°çš„å‡å»å½“å‰çš„æ¥è¡¥å¿å»¶è¿Ÿï¼Œavg_g å·²ç»æœ‰äº†è‡ªå·±èŠ‚ç‚¹çš„æ¢¯åº¦ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614032017831.png width=1111 height=551 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614032017831_hu_942944bcbb0c93e0.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614032017831_hu_dbf4c203be69330c.png 1024w" loading=lazy alt=image-20250614032017831 class=gallery-image data-flex-grow=201 data-flex-basis=483px></p><h2 id=lec21-on-device-training-and-transfer-learning>Lec21 On-Device Training and Transfer Learning</h2><h3 id=deep-leakage-fram-gradients-gradient-is-not-safe-to-share>Deep leakage fram gradients, gradient is not safe to share</h3><p><strong>Federated learning è”é‚¦å­¦ä¹ </strong></p><p>FedAvg algorithmï¼Œåªä¼ é€æƒé‡/æ¢¯åº¦</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614132630692.png width=1221 height=554 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614132630692_hu_b1e5d6461b4cf9f3.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614132630692_hu_6f22ce8fe997746a.png 1024w" loading=lazy alt=image-20250614132630692 class=gallery-image data-flex-grow=220 data-flex-basis=528px></p><ul><li>Membership Inferenceï¼ŒæŒ‡å‡ºå¯ä»¥ç”¨æ¢¯åº¦åˆ¤æ–­æŸä¸ªè®°å½•æ˜¯å¦åœ¨æ‰¹æ¬¡ä¸­ä½¿ç”¨</li><li>Property Inferenceï¼ŒæŒ‡å‡ºå¯ä»¥ç”¨æ¢¯åº¦åˆ¤æ–­æœ‰ç‰¹å®šå±æ€§çš„æ ·æœ¬æ˜¯å¦åœ¨æ‰¹æ¬¡ä¸­</li></ul><p><strong>Deep Leakage Attack</strong></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614133052908.png width=1097 height=603 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614133052908_hu_328c024376223aa6.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614133052908_hu_2949f90be1a8a1d3.png 1024w" loading=lazy alt=image-20250614133052908 class=gallery-image data-flex-grow=181 data-flex-basis=436px></p><p>ä¸€å¼ å›¾ç‰‡okï¼Œä¸€ä¸ªæ‰¹æ¬¡å¤šä¸ªå›¾ç‰‡ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œé¡ºåºå¯èƒ½ä¸ç¡®å®šï¼Œä½†æ˜¯å†…å®¹å¯ä»¥</p><p><strong>é˜²å¾¡ç­–ç•¥</strong></p><ul><li><p>å¢åŠ  Gaussian / laplacian noiseï¼Œè¿‡å°æ²¡æœ‰ç”¨ï¼Œè¿‡å¤§ç ´åæ¨¡å‹</p></li><li><p>æ¢¯åº¦å‹ç¼©ï¼Œå‰ªææ¯”ä¾‹åˆ° 70% åŸºæœ¬ä¸æ³„éœ²ï¼Œä¿æŒæ€§èƒ½</p><p>åªæœ‰å¾ˆå°‘çš„æ¢¯åº¦æ³„éœ²ï¼Œå¤åŸä¸å‡ºæ¥ã€‚</p></li></ul><h3 id=memory-bottleneck-of-on-device-training>Memory bottleneck of on-device training</h3><p>è®­ç»ƒçš„å†…å­˜å ç”¨å¤§ï¼Œå› ä¸ºæ‰¹æ¬¡å¤§ã€éœ€è¦å­˜å‚¨ä¸­é—´æ¿€æ´»å€¼</p><p>ï¼ˆcheckpoint æ¥è®¡ç®—æ¢ç©ºé—´ï¼‰</p><ul><li>Last åªå¾®è°ƒæœ€åä¸€å±‚ï¼Ÿå‡†ç¡®ç‡ä¸‹é™å¾ˆå¤š</li><li>BN + Last</li><li><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614134803215.png width=1182 height=670 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614134803215_hu_e286425f22b4e7bd.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614134803215_hu_a20f4090eb0dfc7a.png 1024w" loading=lazy alt=image-20250614134803215 class=gallery-image data-flex-grow=176 data-flex-basis=423px></li></ul><p>ä»£ä»·å¾ˆå¤§ï¼Œæ•ˆæœä¸å¥½</p><h3 id=tiny-tansfer-learning-tinytl>Tiny tansfer learning (TinyTL)</h3><p>åå‘ä¼ æ’­æ›´æ–°æƒé‡éœ€è¦æ¿€æ´»å€¼ï¼Œbiasåç½®ä¸éœ€è¦æ¿€æ´»å€¼</p><p>åªå¾®è°ƒåç½®ï¼ŒBias + Last</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614140601427.png width=759 height=589 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614140601427_hu_f482238898fad1d.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614140601427_hu_f444c9813e043ca.png 1024w" loading=lazy alt=image-20250614140601427 class=gallery-image data-flex-grow=128 data-flex-basis=309px></p><p>å¼•å…¥è½»é‡åˆ†æ”¯</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614140753094.png width=775 height=556 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614140753094_hu_1deaf0e469bd6c28.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614140753094_hu_a639449d8b91ed69.png 1024w" loading=lazy alt=image-20250614140753094 class=gallery-image data-flex-grow=139 data-flex-basis=334px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614140826258.png width=1132 height=573 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614140826258_hu_692e285a95884417.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614140826258_hu_e705b6160a8355e5.png 1024w" loading=lazy alt=image-20250614140826258 class=gallery-image data-flex-grow=197 data-flex-basis=474px></p><p>æ¯”å‰ªææ¿€æ´»å€¼æ›´æœ‰æ•ˆ</p><h3 id=sparse-back-propagation-sparsebp>Sparse back-propagation (SparseBP)</h3><p>ä»ç”Ÿç‰©å­¦å‡ºå‘çš„æ–¹æ³•ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141009296.png width=1125 height=563 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141009296_hu_15d754af3e1b574a.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141009296_hu_f2119d7de2a19dfc.png 1024w" loading=lazy alt=image-20250614141009296 class=gallery-image data-flex-grow=199 data-flex-basis=479px></p><p>åªæ›´æ–°ä¸€éƒ¨åˆ†å±‚ï¼ˆæ·±åº¦æ·±çš„é«˜çº§ç‰¹å¾ï¼‰</p><p>åªæ›´æ–°ä¸€å±‚ä¸­çš„ä¸€éƒ¨åˆ†å‚æ•°</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141140713.png width=1143 height=572 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141140713_hu_2b9e09a3a0ee3687.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141140713_hu_1d1c040630c990db.png 1024w" loading=lazy alt=image-20250614141140713 class=gallery-image data-flex-grow=199 data-flex-basis=479px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141154775.png width=1039 height=597 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141154775_hu_248ad6f73c8a8bb9.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141154775_hu_8a4130dbb924cc99.png 1024w" loading=lazy alt=image-20250614141154775 class=gallery-image data-flex-grow=174 data-flex-basis=417px></p><p>æ€ä¹ˆé€‰æ‹©ï¼Ÿ</p><p>èµ·å§‹åˆ†è¾¨ç‡é«˜ï¼Œåé¢é€šé“æ•°å¤š</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141448171.png width=1203 height=570 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141448171_hu_b99f12adb0dfd007.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141448171_hu_d4a8c29f9e4d4719.png 1024w" loading=lazy alt=image-20250614141448171 class=gallery-image data-flex-grow=211 data-flex-basis=506px></p><p>contribution analysis è´¡çŒ®åˆ†æ</p><p>è‡ªåŠ¨æ±‚è§£å™¨ï¼Œç±»ä¼¼æ•æ„Ÿåº¦åˆ†æ</p><p>åªæ›´æ–°å‰é¢çš„å±‚ï¼Œacc ç”šè‡³å˜å·®ã€‚</p><p>å‘ç°é‡å¤çš„èµ·ä¼ï¼Œpeakæ˜¯ç‚¹å·ç§¯ï¼Œcurveæ˜¯æ·±åº¦å·ç§¯</p><p>æ›´æ–°æ¯”ä¾‹ã€‚</p><p>ç”¨è¿›åŒ–ç®—æ³•æœç´¢ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141750320.png width=1211 height=587 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141750320_hu_d52f34269720fefe.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614141750320_hu_c916b45384a44bee.png 1024w" loading=lazy alt=image-20250614141750320 class=gallery-image data-flex-grow=206 data-flex-basis=495px></p><p>SparseBP çš„è¾“å‡ºä¼šæ›´é•¿ï¼Ÿå¾…ç ”ç©¶ã€‚</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614142713545.png width=1206 height=587 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614142713545_hu_6f1cbc894b75ade.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614142713545_hu_f2a5cca2ef243cb1.png 1024w" loading=lazy alt=image-20250614142713545 class=gallery-image data-flex-grow=205 data-flex-basis=493px></p><h3 id=quantized-training-with-quantization-aware-scaling-qas>Quantized training with quantization aware scaling (QAS)</h3><p>åœ¨ int8 ä¸‹ï¼Œæ¢¯åº¦å€¼è¿‡å°</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614143244669.png width=1133 height=632 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614143244669_hu_e2bda51e1653d1c.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614143244669_hu_79cbc7cf5752b467.png 1024w" loading=lazy alt=image-20250614143244669 class=gallery-image data-flex-grow=179 data-flex-basis=430px></p><p>ä¿®æ­£ç¼©æ”¾å› å­</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614143847560.png width=1067 height=552 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614143847560_hu_af9551ebd47f5774.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614143847560_hu_f07a08ec16c1473a.png 1024w" loading=lazy alt=image-20250614143847560 class=gallery-image data-flex-grow=193 data-flex-basis=463px></p><h3 id=pockengine-system-support-for-sparse-back-propagation>PockEngine: system support for sparse back-propagation</h3><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614144507235.png width=1001 height=573 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614144507235_hu_b5338a28ffee1a9d.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614144507235_hu_204a9f7a09eb3970.png 1024w" loading=lazy alt=image-20250614144507235 class=gallery-image data-flex-grow=174 data-flex-basis=419px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614144519082.png width=970 height=560 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614144519082_hu_dee383ff135c8fb6.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614144519082_hu_46582d5442e6262f.png 1024w" loading=lazy alt=image-20250614144519082 class=gallery-image data-flex-grow=173 data-flex-basis=415px></p><p>å¤šç§èŠ¯ç‰‡ï¼Œç¼–è¯‘ä¸­ï¼Œè¿è¡Œè½»ï¼Œè®­ç»ƒä¼˜åŒ–ã€‚</p><h2 id=lec22-quantum-machine-learning-1>Lec22 Quantum Machine Learning 1</h2><p>è§£ç é‡å­çº é”™ä»£ç </p><p>Noisy Intermediate-Scale Quantum (NISQ)</p><h3 id=single-qubit-state-and-gates>Single qubit state and gates</h3><h4 id=single-qubit-state>Single qubit state</h4><p>basic component => Quantum Bit (Qubit)</p><p>state => statevector</p><p>Bra-ket notation ç‹„æ‹‰å…‹ç¬¦å·</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614151944103.png width=1649 height=1026 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614151944103_hu_dd25d8d08932184e.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614151944103_hu_84041915a2d090e1.png 1024w" loading=lazy alt=image-20250614151944103 class=gallery-image data-flex-grow=160 data-flex-basis=385px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614152018133.png width=1292 height=339 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614152018133_hu_63e0611035847d94.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614152018133_hu_1f5057980b11ebe2.png 1024w" loading=lazy alt=image-20250614152018133 class=gallery-image data-flex-grow=381 data-flex-basis=914px></p><p><strong>Measurement</strong></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614155838740.png width=1164 height=699 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614155838740_hu_bbe48f13240050ab.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614155838740_hu_3e22d8bc7c56dc40.png 1024w" loading=lazy alt=image-20250614155838740 class=gallery-image data-flex-grow=166 data-flex-basis=399px></p><p><strong>Bloch Sphere</strong> å¸ƒæ´›èµ«çƒ</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614161304846.png width=1477 height=868 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614161304846_hu_c76ef274ede36861.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614161304846_hu_44ca0c3d16f48814.png 1024w" loading=lazy alt=image-20250614161304846 class=gallery-image data-flex-grow=170 data-flex-basis=408px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614161314120.png width=2553 height=1107 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614161314120_hu_5fce267d376fd511.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614161314120_hu_21c5be2e0c0f458.png 1024w" loading=lazy alt=image-20250614161314120 class=gallery-image data-flex-grow=230 data-flex-basis=553px></p><p>ç”¨å¸ƒæ´›èµ«çƒå»è¡¨ç¤ºä»»æ„é‡å­æ¯”ç‰¹çš„çŠ¶æ€</p><h4 id=single-qubit-gates>Single Qubit Gates</h4><p>æ‰€æœ‰ Quantum gates é‡å­é—¨ éƒ½æ˜¯ <strong>reversible</strong> å¯é€†çš„ï¼ˆä¿è¯èƒ½é‡æ˜¯ä¸€è‡´çš„ï¼‰</p><p>æœ€ç®€å•çš„é‡å­é—¨æ˜¯æ’ç­‰æ˜ å°„</p><p>å¯é€†é—¨å¯ç”¨çŸ©é˜µã€å¸ƒæ´›èµ«çƒçš„æ—‹è½¬</p><h5 id=pauli-gates>Pauli Gates</h5><ul><li>X Gate (Not Gate)</li><li>Y Gate</li><li>Z Gateï¼Œ0 => 0, 1 => -1, å…¨å±€ç›¸ä½ phaseï¼Œå¸¸è§„æ— æ³•æµ‹é‡ï¼Œæ‰€ä»¥ä¹Ÿè®¤ä¸ºä¸€è‡´</li></ul><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162343499.png width=2275 height=1234 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162343499_hu_29583f4275b6234a.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162343499_hu_f0e508a4a4646403.png 1024w" loading=lazy alt=image-20250614162343499 class=gallery-image data-flex-grow=184 data-flex-basis=442px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162450413.png width=1957 height=690 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162450413_hu_353b8b0ada3b0b7c.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162450413_hu_a6418387af0a0377.png 1024w" loading=lazy alt=image-20250614162450413 class=gallery-image data-flex-grow=283 data-flex-basis=680px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162815210.png width=2177 height=1017 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162815210_hu_53da467a68d7450c.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162815210_hu_813972b1d564ba8e.png 1024w" loading=lazy alt=image-20250614162815210 class=gallery-image data-flex-grow=214 data-flex-basis=513px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162859531.png width=1208 height=1111 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162859531_hu_9eca65bb6f93ce87.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614162859531_hu_6e0c156bf3b162a4.png 1024w" loading=lazy alt=image-20250614162859531 class=gallery-image data-flex-grow=108 data-flex-basis=260px></p><h5 id=hadamard-gate>Hadamard Gate</h5><p>åˆ›å»ºå åŠ æ€</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163314899.png width=1715 height=758 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163314899_hu_283ab58aa44ef562.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163314899_hu_7f801f4a9137f4d2.png 1024w" loading=lazy alt=image-20250614163314899 class=gallery-image data-flex-grow=226 data-flex-basis=543px></p><h5 id=other-gates>Other Gates</h5><ul><li>Phase Gate</li><li>S Gate</li><li>S dagger Gate</li></ul><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163355276.png width=2038 height=792 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163355276_hu_7798c972f9b61006.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163355276_hu_bff7d08179e8e78e.png 1024w" loading=lazy alt=image-20250614163355276 class=gallery-image data-flex-grow=257 data-flex-basis=617px></p><h5 id=u-gate>U Gate</h5><p>å¯ä»¥è¡¨ç¤ºæ‰€æœ‰ï¼Œé€šç”¨é—¨</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163501587.png width=2187 height=977 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163501587_hu_cf17d9592b31f557.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163501587_hu_2ef1e5d38080774d.png 1024w" loading=lazy alt=image-20250614163501587 class=gallery-image data-flex-grow=223 data-flex-basis=537px></p><h3 id=multiple-qubit-state-and-gates>Multiple-qubit state and gates</h3><h4 id=multiple-qubit-state>Multiple-qubit state</h4><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163625648.png width=1570 height=503 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163625648_hu_841b40b9660289d3.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163625648_hu_220f98e5c5af51e3.png 1024w" loading=lazy alt=image-20250614163625648 class=gallery-image data-flex-grow=312 data-flex-basis=749px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163657750.png width=1986 height=899 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163657750_hu_3c5acd4722ef9ea2.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614163657750_hu_33258c54323b915e.png 1024w" loading=lazy alt=image-20250614163657750 class=gallery-image data-flex-grow=220 data-flex-basis=530px></p><h4 id=multiple-qubit-gates>Multiple-qubit gates</h4><ul><li>CNOT Gate</li><li>&mldr;</li></ul><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614164219673.png width=2430 height=885 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614164219673_hu_f39c7d4692689050.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614164219673_hu_6b1ba0dec140248b.png 1024w" loading=lazy alt=image-20250614164219673 class=gallery-image data-flex-grow=274 data-flex-basis=658px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614164713691.png width=1605 height=1186 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614164713691_hu_d4ce106d9ee4f09e.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614164713691_hu_bc4d302a03ad0380.png 1024w" loading=lazy alt=image-20250614164713691 class=gallery-image data-flex-grow=135 data-flex-basis=324px></p><h3 id=quantum-circuit>quantum circuit</h3><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165152849.png width=1932 height=1146 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165152849_hu_f4f5aa20384ed9c6.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165152849_hu_b57f8491b6e11bb2.png 1024w" loading=lazy alt=image-20250614165152849 class=gallery-image data-flex-grow=168 data-flex-basis=404px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165242605.png width=1972 height=1115 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165242605_hu_a809d5c4f20c8409.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165242605_hu_5df4f0515ad07288.png 1024w" loading=lazy alt=image-20250614165242605 class=gallery-image data-flex-grow=176 data-flex-basis=424px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165405669.png width=2437 height=896 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165405669_hu_5b4e48fdca2aa068.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165405669_hu_30138f6bd9f96ca.png 1024w" loading=lazy alt=image-20250614165405669 class=gallery-image data-flex-grow=271 data-flex-basis=652px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165644261.png width=2269 height=1056 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165644261_hu_6fce716f25dd73dc.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614165644261_hu_7267238d3c3346fc.png 1024w" loading=lazy alt=image-20250614165644261 class=gallery-image data-flex-grow=214 data-flex-basis=515px></p><p>æ•°æ®ç¼–ç /ä¸Šä¼ ä»£ä»·æ˜¯ç°åœ¨çš„ä¸»è¦ç“¶é¢ˆã€‚</p><h3 id=the-nisq-era-and-compilation-problems>the NISQ era and compilation problems</h3><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614170857415.png width=2148 height=350 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614170857415_hu_860c41ab590d64e5.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614170857415_hu_366c7a296811f707.png 1024w" loading=lazy alt=image-20250614170857415 class=gallery-image data-flex-grow=613 data-flex-basis=1472px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614170705556.png width=1414 height=205 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614170705556_hu_5116d888174b1bca.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614170705556_hu_a59627445ed66766.png 1024w" loading=lazy alt=image-20250614170705556 class=gallery-image data-flex-grow=689 data-flex-basis=1655px></p><p>Single-qubit X error rate => 1.718e-3</p><p>CNOT error rate => 6.973e-2</p><p>ä¸åŒé‡å­æ¯”ç‰¹çš„æ€§èƒ½å¯èƒ½ä¸åŒï¼Œè¯¯å·®ç‡ã€‚</p><p>Sabre Qubit Mapping</p><p>çœ‹äº¤æ¢åèƒ½æ‰§è¡Œçš„é—¨ï¼Œå¯å‘å¼äº¤æ¢</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614172900090.png width=2487 height=1313 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614172900090_hu_eb07847247d66a86.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614172900090_hu_60504c984c87a341.png 1024w" loading=lazy alt=image-20250614172900090 class=gallery-image data-flex-grow=189 data-flex-basis=454px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614172953543.png width=2473 height=791 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614172953543_hu_9baf264039b80cd8.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614172953543_hu_c8551bffde8ff7a9.png 1024w" loading=lazy alt=image-20250614172953543 class=gallery-image data-flex-grow=312 data-flex-basis=750px></p><p><strong>QuantumNAS</strong></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614173036947.png width=2313 height=991 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614173036947_hu_97381e94e42697e8.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614173036947_hu_619fff6cc9af196d.png 1024w" loading=lazy alt=image-20250614173036947 class=gallery-image data-flex-grow=233 data-flex-basis=560px></p><h3 id=the-example-workflow-and-compiler-on-neutral-atom-quantum-computer>the example workflow and compiler on neutral atom quantum computer</h3><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614173159070.png width=2129 height=1329 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614173159070_hu_cd6beb395e263fac.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614173159070_hu_b97073934485b825.png 1024w" loading=lazy alt=image-20250614173159070 class=gallery-image data-flex-grow=160 data-flex-basis=384px></p><p>æœ€å¤§ k å‰²å»ä¼˜åŒ–ç¼–è¯‘</p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614173537427.png width=2424 height=1145 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614173537427_hu_7371898682497bae.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614173537427_hu_3a511f608888dcfc.png 1024w" loading=lazy alt=image-20250614173537427 class=gallery-image data-flex-grow=211 data-flex-basis=508px></p><h2 id=lec23-quantum-machine-learning-2>Lec23 Quantum Machine Learning 2</h2><p><a class=link href="https://www.dropbox.com/scl/fi/wxpnpwkrl6pw7lb4n4vrg/Lec23-Quantum-ML-II.pdf?rlkey=21msd9zdilhry5pydlkvbn7n4&amp;e=1&amp;st=aoyc9pzv&amp;dl=0" target=_blank rel=noopener>Lec23-Quantum-ML-II.pdf</a>
<sup><svg aria-hidden="true" focusable="false" viewBox="0 0 100 100" width="12" height="12" class="icon outbound"><path fill="currentColor" d="M18.8 85.1h56c2.2.0 4-1.8 4-4v-32h-8v28h-48v-48h28v-8h-32c-2.2.0-4 1.8-4 4v56C14.8 83.3 16.6 85.1 18.8 85.1z"/><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"/></svg></sup></p><blockquote><p>TBD.</p></blockquote><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614174243356.png width=2159 height=1126 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614174243356_hu_55ecf486e0158fbb.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614174243356_hu_fc52d1d5faec2932.png 1024w" loading=lazy alt=image-20250614174243356 class=gallery-image data-flex-grow=191 data-flex-basis=460px></p><h3 id=parameterized-quantum-circuit-pqc>Parameterized Quantum Circuit (PQC)</h3><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614174538876.png width=2276 height=1318 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614174538876_hu_93e85cb972818325.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614174538876_hu_c2a8a39b3ec8fb5d.png 1024w" loading=lazy alt=image-20250614174538876 class=gallery-image data-flex-grow=172 data-flex-basis=414px></p><p><img src=/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614175013836.png width=2108 height=1306 srcset="/p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614175013836_hu_9a44d9bd794ff683.png 480w, /p/mit6.5940-tinyml-and-efficient-deep-learning-computing/note.assets/image-20250614175013836_hu_5cb80f51af00617a.png 1024w" loading=lazy alt=image-20250614175013836 class=gallery-image data-flex-grow=161 data-flex-basis=387px></p><p>ç¡¬ä»¶æ•ˆç‡</p><h3 id=pqc-training>PQC Training</h3><h3 id=quantum-classifiers>Quantum Classifiers</h3><h3 id=noise-aware-on-chip-training-qoc-of-pqc>Noise Aware On-Chip Training (QOC) of PQC</h3><h3 id=torchquantum-library-for-qml>TorchQuantum Library for QML</h3><h3 id=robust-quantum-architecture-search>Robust Quantum Architecture Search</h3></section><footer class=article-footer><section class=article-tags><a href=/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/>å­¦ä¹ ç¬”è®°</a>
<a href=/tags/mlsys/>MLsys</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>æœ€åæ›´æ–°äº 2025 å¹´ 6 æœˆ 14 æ—¥ 18:55 CST</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=[".main-article",".widget--toc"];e.forEach(e=>{const t=document.querySelector(e);t&&renderMathInElement(t,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})})</script></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/nano_vllm_combing/><div class=article-image><img src=/p/nano_vllm_combing/cover.5308205972c00de18a4858211a279b66_hu_3d434b630450e4f9.jpg width=250 height=150 loading=lazy alt="Featured image of post nano-vLLM ç®€å•æ¢³ç†" data-key=nano_vllm_combing data-hash="md5-UwggWXLADeGKSFghGiebZg=="></div><div class=article-details><h2 class=article-title>nano-vLLM ç®€å•æ¢³ç†</h2></div></a></article><article class=has-image><a href=/p/cmu_15-445_database_2024fall_p1/><div class=article-image><img src=/p/cmu_15-445_database_2024fall_p1/cover.45ed0849550e8bf447f0cbab3eb6bf2f_hu_b14e6486dba5d61e.jpeg width=250 height=150 loading=lazy alt="Featured image of post ã€å­¦ä¹ ç¬”è®°ã€CMU 15-445 (2024 fall) Project #1 - Buffer Pool Manager" data-key=CMU_15-445_database_2024fall_P1 data-hash="md5-Re0ISVUOi/RH8MurPra/Lw=="></div><div class=article-details><h2 class=article-title>ã€å­¦ä¹ ç¬”è®°ã€CMU 15-445 (2024 fall) Project #1 - Buffer Pool Manager</h2></div></a></article><article class=has-image><a href=/p/cmu_15-445_database_2024fall_hw1/><div class=article-image><img src=/p/cmu_15-445_database_2024fall_hw1/cover.6720ee12dcab4376e768ab60d9784dad_hu_43dc54f7d72b6d6c.jpeg width=250 height=150 loading=lazy alt="Featured image of post ã€å­¦ä¹ ç¬”è®°ã€CMU 15-445 (2024 fall) Homework #1 - SQL" data-key=CMU_15-445_database_2024fall_HW1 data-hash="md5-ZyDuEtyrQ3bnaKtg2XhNrQ=="></div><div class=article-details><h2 class=article-title>ã€å­¦ä¹ ç¬”è®°ã€CMU 15-445 (2024 fall) Homework #1 - SQL</h2></div></a></article><article class=has-image><a href=/p/cmu_15-445_database_2024fall_p0/><div class=article-image><img src=/p/cmu_15-445_database_2024fall_p0/cover.c96c63a067f2239cda27d50e64c97e7e_hu_17adc0e0026cd6b9.jpeg width=250 height=150 loading=lazy alt="Featured image of post ã€å­¦ä¹ ç¬”è®°ã€CMU 15-445 (2024 fall) Project #0 - C++ Primer" data-key=CMU_15-445_database_2024fall_P0 data-hash="md5-yWxjoGfyI5zaJ9UOZMl+fg=="></div><div class=article-details><h2 class=article-title>ã€å­¦ä¹ ç¬”è®°ã€CMU 15-445 (2024 fall) Project #0 - C++ Primer</h2></div></a></article><article class=has-image><a href=/p/cs149_2024_note/><div class=article-image><img src=/p/cs149_2024_note/cover.664e6dffed8260e16a7d442976d4323f_hu_9dada7ff6176f365.jpeg width=250 height=150 loading=lazy alt="Featured image of post ã€å­¦ä¹ ç¬”è®°ã€CS149 (2024)" data-key=CS149_2024_note data-hash="md5-Zk5t/+2CYOFqfUQpdtQyPw=="></div><div class=article-details><h2 class=article-title>ã€å­¦ä¹ ç¬”è®°ã€CS149 (2024)</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=Livinfly/Livinfly.github.io data-repo-id=R_kgDON6qCKA data-category=Announcements data-category-id=DIC_kwDON6qCKM4CnBxR data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=zh-CN data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark")}})()</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2025 Livinfly's Blog</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.32.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>